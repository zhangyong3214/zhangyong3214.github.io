{"meta":{"title":"tankã®è®°å¿†","subtitle":"ç§¯æä¹è§‚ï¼Œå–œæ¬¢è½¯ä»¶","description":"æ¬¢è¿æ¥åˆ°tankã®è®°å¿†","author":"tank","url":"https://zhangyong3214.github.io","root":"/"},"pages":[{"title":"åˆ†ç±»","date":"2022-01-27T08:31:13.129Z","updated":"2022-01-27T08:31:13.129Z","comments":true,"path":"categories/index.html","permalink":"https://zhangyong3214.github.io/categories/index.html","excerpt":"","text":""},{"title":"","date":"2022-04-05T09:32:31.595Z","updated":"2022-04-05T09:32:31.595Z","comments":true,"path":"css/custom.css","permalink":"https://zhangyong3214.github.io/css/custom.css","excerpt":"","text":"/* æ–‡ç« é¡µH1-H6å›¾æ ‡æ ·å¼æ•ˆæœ */ h1::before, h2::before, h3::before, h4::before, h5::before, h6::before { -webkit-animation: ccc 1.6s linear infinite ; animation: ccc 1.6s linear infinite ; } @-webkit-keyframes ccc { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg) } to { -webkit-transform: rotate(-1turn); transform: rotate(-1turn) } } @keyframes ccc { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg) } to { -webkit-transform: rotate(-1turn); transform: rotate(-1turn) } } #content-inner.layout h1::before { color: #ef50a8 ; margin-left: -1.55rem; font-size: 1.3rem; margin-top: -0.23rem; } #content-inner.layout h2::before { color: #fb7061 ; margin-left: -1.35rem; font-size: 1.1rem; margin-top: -0.12rem; } #content-inner.layout h3::before { color: #ffbf00 ; margin-left: -1.22rem; font-size: 0.95rem; margin-top: -0.09rem; } #content-inner.layout h4::before { color: #a9e000 ; margin-left: -1.05rem; font-size: 0.8rem; margin-top: -0.09rem; } #content-inner.layout h5::before { color: #57c850 ; margin-left: -0.9rem; font-size: 0.7rem; margin-top: 0.0rem; } #content-inner.layout h6::before { color: #5ec1e0 ; margin-left: -0.9rem; font-size: 0.66rem; margin-top: 0.0rem; } #content-inner.layout h1:hover, #content-inner.layout h2:hover, #content-inner.layout h3:hover, #content-inner.layout h4:hover, #content-inner.layout h5:hover, #content-inner.layout h6:hover { color: #49b1f5 ; } #content-inner.layout h1:hover::before, #content-inner.layout h2:hover::before, #content-inner.layout h3:hover::before, #content-inner.layout h4:hover::before, #content-inner.layout h5:hover::before, #content-inner.layout h6:hover::before { color: #49b1f5 ; -webkit-animation: ccc 3.2s linear infinite ; animation: ccc 3.2s linear infinite ; } /* é¡µé¢è®¾ç½®iconè½¬åŠ¨é€Ÿåº¦è°ƒæ•´ */ #rightside_config i.fas.fa-cog.fa-spin { animation: fa-spin 5s linear infinite ; } /*--------æ›´æ¢å­—ä½“------------*/ @font-face { font-family: 'tzy'; /* å­—ä½“åè‡ªå®šä¹‰å³å¯ */ src: url('https://cdn.jsdelivr.net/gh/tzy13755126023/BLOG_SOURCE/font/ZhuZiAWan.woff2'); /* å­—ä½“æ–‡ä»¶è·¯å¾„ */ font-display: swap; } body, .gitcalendar { font-family: tzy !important; } .categoryBar-list { max-height: 400px; } .clock-row { overflow: hidden; text-overflow: ellipsis; } /*3sä¸ºåŠ è½½åŠ¨ç”»çš„æ—¶é—´ï¼Œ1ä¸ºåŠ è½½åŠ¨ç”»çš„æ¬¡æ•°ï¼Œease-in-outä¸ºåŠ¨ç”»æ•ˆæœ*/ #page-header, #web_bg { -webkit-animation: imgblur 2s 1 ease-in-out; animation: imgblur 2s 1 ease-in-out; } @keyframes imgblur { 0% { filter: blur(5px); } 100% { filter: blur(0px); } } /*é€‚é…ä½¿ç”¨-webkitå†…æ ¸çš„æµè§ˆå™¨ */ @-webkit-keyframes imgblur { 0% { -webkit-filter: blur(5px); } 100% { -webkit-filter: blur(0px); } } .table-wrap img { margin: .6rem auto .1rem !important; } /* æ ‡ç­¾å¤–æŒ‚ ç½‘ç«™å¡ç‰‡ start */ .site-card-group img { margin: 0 auto .1rem !important; } .site-card-group .info a img { margin-right: 10px !important; } [data-theme='dark'] .site-card-group .site-card .info .title { color: #f0f0f0 !important; } [data-theme='dark'] .site-card-group .site-card .info .desc { color: rgba(255, 255, 255, .7) !important; } .site-card-group .info .desc { margin-top: 4px !important; } /* ä»£ç å—é¢œè‰² */ figure.highlight pre .addition { color: #00bf03 !important; }"},{"title":"","date":"2022-04-05T09:32:31.667Z","updated":"2022-04-05T09:32:31.667Z","comments":true,"path":"js/chocolate.js","permalink":"https://zhangyong3214.github.io/js/chocolate.js","excerpt":"","text":"/* * @Author: tzy1997 * @Date: 2020-12-15 20:55:25 * @LastEditors: tzy1997 * @LastEditTime: 2021-01-12 19:02:25 */ // å‹æƒ…é“¾æ¥é¡µé¢ å¤´åƒæ‰¾ä¸åˆ°æ—¶ æ›¿æ¢å›¾ç‰‡ if (location.href.indexOf(\"link\") !== -1) { var imgObj = document.getElementsByTagName(\"img\"); for (i = 0; i < imgObj.length; i++) { imgObj[i].onerror = function() { this.src = \"https://cdn.jsdelivr.net/gh/tzy13755126023/BLOG_SOURCE/theme_f/friend_404.gif\" } } } $(function() { // æ°”æ³¡ function bubble() { $('#page-header').circleMagic({ radius: 10, density: .2, color: 'rgba(255,255,255,.4)', clearOffset: 0.99 }); }! function(p) { p.fn.circleMagic = function(t) { var o, a, n, r, e = !0, i = [], d = p.extend({ color: \"rgba(255,0,0,.5)\", radius: 10, density: .3, clearOffset: .2 }, t), l = this[0]; function c() { e = !(document.body.scrollTop > a) } function s() { o = l.clientWidth, a = l.clientHeight, l.height = a + \"px\", n.width = o, n.height = a } function h() { if (e) for (var t in r.clearRect(0, 0, o, a), i) i[t].draw(); requestAnimationFrame(h) } function f() { var t = this; function e() { t.pos.x = Math.random() * o, t.pos.y = a + 100 * Math.random(), t.alpha = .1 + Math.random() * d.clearOffset, t.scale = .1 + .3 * Math.random(), t.speed = Math.random(), \"random\" === d.color ? t.color = \"rgba(\" + Math.floor(255 * Math.random()) + \", \" + Math.floor(0 * Math.random()) + \", \" + Math.floor(0 * Math.random()) + \", \" + Math.random().toPrecision(2) + \")\" : t.color = d.color } t.pos = {}, e(), this.draw = function() { t.alpha"},{"title":"ç•™è¨€æ¿","date":"2022-01-27T08:31:13.242Z","updated":"2022-01-27T08:31:13.242Z","comments":true,"path":"message/index.html","permalink":"https://zhangyong3214.github.io/message/index.html","excerpt":"","text":"æœ¬é¡µé¢è¿˜åœ¨å¼€å‘ä¸­â€¦â€¦"},{"title":"æ ‡ç­¾","date":"2022-01-27T08:31:13.242Z","updated":"2022-01-27T08:31:13.242Z","comments":true,"path":"tags/index.html","permalink":"https://zhangyong3214.github.io/tags/index.html","excerpt":"","text":""},{"title":"å…³äºæˆ‘","date":"2022-04-05T09:32:31.668Z","updated":"2022-04-05T09:32:31.668Z","comments":true,"path":"å…³äºæˆ‘/index.html","permalink":"https://zhangyong3214.github.io/%E5%85%B3%E4%BA%8E%E6%88%91/index.html","excerpt":"","text":"å…³äºæˆ‘ä¸€ä¸ªè®°æ€§ä¸å¥½çš„äººï¼Œé€šè¿‡ç»“æ„åŒ–çš„æ–‡æ¡£è®°å½•è‡ªå·±çš„å‰è¿›ä¹‹è·¯ã€‚ å¶é‡è‰¯å‹ï¼Œä¸€èµ·å‰è¡Œâ€¦.."},{"title":"å…³äºæˆ‘","date":"2022-04-05T09:32:31.669Z","updated":"2022-04-05T09:32:31.669Z","comments":true,"path":"å…³äºæˆ‘/index_bak.html","permalink":"https://zhangyong3214.github.io/%E5%85%B3%E4%BA%8E%E6%88%91/index_bak.html","excerpt":"","text":"å…³äºæˆ‘åå¹´ç”Ÿæ­»ä¸¤èŒ«èŒ«,å†™ç¨‹åºï¼Œåˆ°å¤©äº®ã€‚åƒè¡Œä»£ç ï¼ŒBugä½•å¤„è—ã€‚çºµä½¿ä¸Šçº¿åˆæ€æ ·ï¼Œæœä»¤æ”¹ï¼Œå¤•æ–­è‚ ã€‚é¢†å¯¼æ¯å¤©æ–°æƒ³æ³•ï¼Œå¤©å¤©æ”¹ï¼Œæ—¥æ—¥å¿™ã€‚ ç›¸é¡¾æ— è¨€ï¼ŒæƒŸæœ‰æ³ªåƒè¡Œã€‚æ¯æ™šç¯ç«é˜‘çŠå¤„ï¼Œç¨‹åºå‘˜ï¼ŒåˆåŠ ç­ï¼Œå·¥ä½œç‹‚~ æ¥ä¸€å¼ æ¥¼ä¸»æ— ç¾é¢œç”Ÿæ´»ç…§ï¼Œè§ç¬‘äº†ï¼ğŸ¤£ğŸ¤£ğŸ¤£ åŸºæœ¬ä¿¡æ¯ ç±»åˆ« ä¿¡æ¯ å‡ºç”Ÿå¹´æœˆ 1990å¹´2æœˆ ç°å±…åœ° åŒ—äº¬å¸‚æœé˜³åŒº ç±è´¯ è¾½å®çœé”¦å·å¸‚ é‚®ç®± &#56;&#51;&#52;&#x36;&#x31;&#x33;&#50;&#64;&#113;&#x71;&#46;&#99;&#111;&#109; æ•™è‚²ç»å† æ—¶é—´ å­¦æ ¡ ä¸“ä¸š å¤‡æ³¨ 2009.09~2013.07 æ²ˆé˜³åŒ–å·¥å¤§å­¦ ç”µå­ç§‘å­¦ä¸æŠ€æœ¯ ç»Ÿæ‹›æœ¬ç§‘ 2006.09~2009.07 è¾½å®çœåŒ—é•‡å¸‚é«˜çº§ä¸­å­¦ é«˜çº§åŸºç¡€æ•™è‚² å¸‚é‡ç‚¹ å·¥ä½œç»å† æ—¶é—´ å…¬å¸ èŒä½ 2021.04~è‡³ä»Š é¾™æ¹–é›†å›¢ Java å¼€å‘å·¥ç¨‹å¸ˆ 2017.05~2021.04 åŒ…å¤´å¸‚åŒ…é“¶æ¶ˆè´¹é‡‘èè‚¡ä»½æœ‰é™å…¬å¸ Java å¼€å‘å·¥ç¨‹å¸ˆ 2016.09~2017.04 å¤§è¿çµåŠ¨ç§‘æŠ€å‘å±•æœ‰é™å…¬å¸ Java å¼€å‘å·¥ç¨‹å¸ˆ 2013.07~2016.08 å¤§è¿å®‰å‰å°¼å°”ç§‘æŠ€æœ‰é™å…¬å¸ Java å¼€å‘å·¥ç¨‹å¸ˆ ä¸“ä¸šæŠ€èƒ½ Java åŸºç¡€æ‰å®ã€æŒæ¡ JVM åŸç†ã€å¤šçº¿ç¨‹ã€ç½‘ç»œåŸç†ã€è®¾è®¡æ¨¡å¼ã€å¸¸ç”¨çš„æ•°æ®ç»“æ„å’Œç®—æ³• ç†Ÿæ‚‰ Windowsã€Macã€Linux æ“ä½œç³»ç»Ÿï¼Œç†Ÿç»ƒä½¿ç”¨ linux å¸¸ç”¨æ“ä½œæŒ‡ä»¤ ç†Ÿç»ƒä½¿ç”¨ IntelliJ IDEA å¼€å‘å·¥å…·(åŠå„ç§æ’ä»¶)ã€ç†Ÿç»ƒä½¿ç”¨ Git ç‰ˆæœ¬åŒæ­¥å·¥å…· é˜…è¯»è¿‡ Springã€SpringMVCã€ç­‰å¼€æºæ¡†æ¶æºç ï¼Œç†è§£å…¶è®¾è®¡åŸç†åŠåº•å±‚æ¶æ„ï¼Œå…·å¤‡æ¡†æ¶å®šåˆ¶å¼€å‘èƒ½åŠ› ç†è§£ Redis çº¿ç¨‹æ¨¡å‹ï¼ŒNetty çº¿ç¨‹æ¨¡å‹ï¼ŒæŒæ¡åŸºäºå“åº”å¼çš„å¼‚æ­¥éé˜»å¡æ¨¡å‹çš„åŸºæœ¬åŸç†ï¼Œäº†è§£ Webflux ç†Ÿç»ƒæŒæ¡åˆ†å¸ƒå¼ç¼“å­˜ Redisã€Elaticsearchï¼Œå¯¹åˆ†å¸ƒå¼é”ï¼Œå¹‚ç­‰ç­‰å¸¸è§é—®é¢˜æœ‰æ·±å…¥ç ”ç©¶åŠå¤šå¹´å®æˆ˜ç»éªŒ ç†Ÿæ‚‰å¸¸è§æ¶ˆæ¯ä¸­é—´ä»¶çš„ä½¿ç”¨ï¼Œæœ‰å¤šå¹´ RabbitMQ çš„å®æˆ˜å¼€å‘ç»éªŒï¼Œå¯¹é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—æœ‰æ·±å…¥ç†è§£ ç†Ÿç»ƒæŒæ¡ Mysql äº‹åŠ¡ï¼Œç´¢å¼•ï¼Œé”ï¼ŒSQL ä¼˜åŒ–ç›¸å…³çŸ¥è¯†ï¼Œå¯æ ¹æ®ä¸šåŠ¡åœºæ™¯ç»™å‡ºè¯¦ç»†åŠé«˜æ€§èƒ½è®¾è®¡æ–¹æ¡ˆ ç†Ÿç»ƒä½¿ç”¨æ•°æ®åº“æ“ä½œæ¡†æ¶ Mybatisã€Mybatsi-plus è¿›è¡Œé«˜æ•ˆä¸šåŠ¡åŠŸèƒ½å¼€å‘ æŒæ¡ springCloud ç›¸å…³æ¡†æ¶ï¼Œå¯¹ SpringBootã€SpringCloud åŸç†æœ‰ä¸€å®šäº†è§£ï¼Œæœ‰æˆç†Ÿé¡¹ç›®ç»éªŒ ç†Ÿæ‚‰å®šæ—¶ä»»åŠ¡åŠå»¶è¿Ÿä»»åŠ¡ç­‰ä¸šåŠ¡ç›¸å…³è®¾è®¡ï¼Œå¦‚ xxl-jobï¼Œå»¶è¿Ÿæ¶ˆæ¯ç­‰ç›¸å…³æŠ€æœ¯æœ‰å¤šå¹´å¼€å‘ç»éªŒ ç†Ÿæ‚‰å¾®æœåŠ¡æ€æƒ³ï¼ŒMVC åˆ†å±‚ï¼ŒDDD ç†è®ºï¼ŒæœåŠ¡æ‹†åˆ†ï¼Œæ²»ç†ï¼Œç›‘æ§ï¼ŒæœåŠ¡ç†”æ–­ï¼Œé™çº§ç­‰ç›¸å…³èƒ½åŠ› ç†Ÿæ‚‰ jvm åŸç†ï¼Œç†Ÿæ‚‰åƒåœ¾å›æ”¶ä»¥ jvm æ€§èƒ½è°ƒä¼˜æŠ€æœ¯ï¼Œæœ‰è¿‡çº¿ä¸ŠæœåŠ¡å™¨æ€§èƒ½ç›‘æµ‹åŠè°ƒä¼˜ç»éªŒ ç†Ÿæ‚‰å¤šçº¿ç¨‹åŠçº¿ç¨‹æ± ä½¿ç”¨ï¼Œæœ‰å¤šå¹´å¤šçº¿ç¨‹ä¸šåŠ¡å¤„ç†ç»éªŒï¼Œå°è£…è¿‡å¤šçº¿ç¨‹æ‰¹å¤„ç†å·¥å…·ç±»ç­‰å…¬ç”¨ç»„å»º äº†è§£ Mysql åˆ†åº“åˆ†è¡¨ç›¸å…³åŸç†ï¼Œå¦‚ Sardingsphereã€Mycat ç­‰æ¡†æ¶æœ‰ç›¸å…³ä½¿ç”¨ç»éªŒ äº†è§£æ“ä½œç³»ç»Ÿåº•å±‚åŸç†ä»¥åŠ Cã€C++ç¨‹åºå¼€å‘ï¼Œå¯¹è®¡ç®—æœºåº•å±‚åŸç†æœ‰åˆæ­¥äº†è§£ äº†è§£å‰ç«¯å¼€å‘ï¼Œäº†è§£ htmlï¼Œcssï¼Œjsï¼Œvue ç­‰å‰ç«¯æŠ€æœ¯ï¼Œå¯¹å‰ç«¯å¼€å‘æœ‰ä¸€å®šçš„äº†è§£ ç ”ç©¶è¿‡å•ç‰‡æœºç­‰ç¡¬ä»¶å¼€å‘ï¼Œå–œæ¬¢ç§‘æŠ€äº§å“ï¼Œå–œæ¬¢è½¯ä»¶ï¼Œå–œæ¬¢æŠ˜è…¾å„ç§ç”µå­äº§å“ä»¥åŠè½¯ä»¶ é¡¹ç›®ç»éªŒâ€‹ é¡¹ç›®ç»éªŒåªå†™äº†åœ¨åŒ—äº¬ä¹‹åå‚ä¸è¿‡çš„ç›¸å…³é¡¹ç›®ï¼Œåœ¨å¤§è¿åšçš„é¡¹ç›®åå‘äºä¼ ç»Ÿï¼Œé¡¹ç›®ä¹Ÿéƒ½æ˜¯å•ç‚¹éƒ¨ç½²ï¼Œä¸»è¦ç”¨çš„æ¡†æ¶éƒ½æ˜¯springã€mybatisã€Hibernateã€springMVCç­‰ç›¸äº’ç»“åˆä½¿ç”¨ï¼Œå³ï¼šSSMï¼ŒSSHï¼Œç›¸æ¯”äºspringBootæ¥è¯´ä¸å€¼ä¸€æï¼Œç°åœ¨åº”è¯¥æ²¡æœ‰å‡ ä¸ªå…¬å¸è¿˜æ²¡ç”¨springBootäº†å§(#^.^#)ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œåˆšæ¯•ä¸šé‚£ä¼šï¼Œåšäº†åŠå¹´çš„Cè¯­è¨€åµŒå…¥å¼å¼€å‘ï¼Œå¤–åŒ…åˆ°å¤§è¿ä¸œè½¯åšå¯¹æ—¥çš„ä½³èƒ½ç›¸æœºç³»ç»Ÿï¼Œè™½ç„¶ç›®å‰æˆ‘å·²ç»åšäº†å¤šå¹´çš„javaå¼€å‘ï¼Œä½†æ˜¯é‚£æ¯•ç«Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡å‚åŠ å¼€å‘é¡¹ç›®ï¼Œäººéƒ½æ˜¯æœ‰åˆæ‹æƒ…èŠ‚çš„å˜›ï¼Œå¯¹è‡ªå·±çš„ç¬¬ä¸€æ¬¡å¿µå¿µä¸å¿˜(æˆ‘æŒ‡å¾—æ˜¯å·¥ä½œğŸ¤­)ï¼Œé‚£åŠå¹´è®©æˆ‘å¯¹ç¡¬ä»¶åº•å±‚æœ‰äº†ä¸€äº›ç†è§£ï¼Œä¹Ÿç®—æ˜¯æœ€å¤§çš„æ”¶è·äº†å§ã€‚ â€”â€” åŒ…é“¶æ¶ˆè´¹é‡‘è(ç°åï¼šè’™å•†æ¶ˆè´¹) â€”â€”â€‹ åŒ…å¤´å¸‚åŒ…é“¶æ¶ˆè´¹é‡‘èè‚¡ä»½æœ‰é™å…¬å¸æ˜¯ç»ä¸­å›½é“¶ç›‘ä¼šæ‰¹å‡†æˆç«‹çš„æŒç‰Œæ¶ˆè´¹é‡‘èå…¬å¸ï¼Œç”±åŒ…å•†é“¶è¡Œå‘èµ·è®¾ç«‹ï¼ŒåŒ…é“¶æ¶ˆè´¹é‡‘èä¸ºä¸ªäººæ¶ˆè´¹è€…æä¾›æ¶ˆè´¹ä¿¡è´·æœåŠ¡ã€‚å…¶ä¸»è¦åˆä½œæ¸ é“æœ‰ï¼šè¯å¤§è´¢å¯Œï¼Œäº¬ä¸œé‡‘æ¡ï¼Œå¾®ç²’è´·ï¼Œå»å“ªå„¿ï¼Œäº¬ä¸œå€Ÿè´·å¹³å°ï¼Œåˆ†æœŸä¹ï¼Œå°ç±³ç­‰å¤šå®¶æ”¾æ¬¾æ¸ é“ã€‚ç›®å‰ï¼Œå·²ç´¯è®¡å®Œæˆ 1200 å¤šä¸‡å®¢æˆ·æ³¨å†Œå’Œ 320 å¤šäº¿æ”¾æ¬¾è§„æ¨¡ã€‚ acsï¼šæ ¸å¿ƒäº¤æ˜“ç³»ç»Ÿä¸»è¦åŒ…å«ä¿¡è´·æ ¸ç®—ä¸šåŠ¡å’Œè™šæ‹Ÿè´¦æˆ·ä¸šåŠ¡ï¼Œä¿¡è´·æ ¸ç®—ä¸»è¦è´Ÿè´£å€Ÿè¿˜æ¬¾ã€æ ¸é”€å‡å…äº¤æ˜“ã€åˆ©æ¯ã€ç½šæ¯è®¡æã€å„ç§è´¹ç”¨ç­‰ä¸šåŠ¡çš„è®¡ç®—å’Œè½åœ°ï¼Œæ—¥ç»ˆç”Ÿæˆäº¤æ˜“æµæ°´æ–‡ä»¶ä¾›ä¼šè®¡æ ¸ç®—ç³»ç»Ÿç”Ÿæˆä¼šè®¡åˆ†å½•ï¼›è™šæ‹Ÿè´¦æˆ·éƒ¨åˆ†ä¸»è¦ä¸ºæ¸…ç»“ç®—äººå‘˜æä¾›äº¤æ˜“äº§ç”Ÿçš„ä¸åŒèµ„é‡‘è´¦æˆ·é‡‘é¢çš„å˜åŒ–åŠèµ„é‡‘æµå‘ï¼Œä¸ºæ¸…ç»“ç®—äººå‘˜å¯¹è´¦æä¾›æ•°æ®æ”¯æŒï¼›ç³»ç»Ÿå¯ä»¥å¤„ç†æ¯åˆ†é’Ÿå³°å€¼ 640 å¤šç¬”æˆä¿¡ç”³è¯·ï¼Œæ¯å°æ—¶å³°å€¼ 2 ä¸‡ç¬”æˆä¿¡ç”³è¯·ï¼Œè´·åæ”¯æŒæ¯å°æ—¶ 17 ä¸‡å®¢æˆ·æ•°æ®ã€‚æ ¸å¿ƒæ—¥ç»ˆå¤„ç†é‡è¾¾ 152 ä¸‡ç¬”(å€Ÿæ®æ•°é‡)ã€‚ glsï¼šè´¢åŠ¡æ ¸ç®—ç³»ç»Ÿå¯¹æ ¸å¿ƒäº¤æ˜“ç³»ç»Ÿæ—¥ç»ˆç”Ÿæˆçš„äº¤æ˜“æµæ°´è§£æä¹‹åæŒ‰ç…§åˆ†å½•å€Ÿè´·è§„åˆ™ç”Ÿæˆè´¢åŠ¡åˆ†å½•æ–‡ä»¶äº¤ç»™é‡‘è¶ç³»ç»Ÿï¼Œ17 å¹´è´¢åŠ¡æ ¸ç®—ç³»ç»Ÿæ˜¯ä¹°æ¥çš„ç³»ç»Ÿï¼Œ19 å¹´ç”±æˆ‘é‡æ–°å¼€å‘å‡ºå±äºå…¬å¸è‡ªå·±çš„è´¢åŠ¡æ ¸ç®—ç³»ç»Ÿï¼Œå¹¶å¢åŠ äº†è´¢åŠ¡å¯¹è´¦åŠŸèƒ½(æ ¸å¿ƒäº¤æ˜“ç³»ç»Ÿå’Œè´¢åŠ¡åˆ†å½•å¯¹è´¦)ï¼Œä¸ä½†åŠæ—¶å‘ç°çº¿ä¸Šäº¤æ˜“çš„é”™è¯¯æ•°æ®ï¼ŒåŠæ—¶è§£å†³é—®é¢˜ï¼Œæ›´æå‡äº†æœˆç»ˆå¯¹è´¦ï¼Œå¹´ç»“çš„æ•ˆç‡ï¼Œå®ç°äº†è´¢åŠ¡å¯¹è´¦è‡ªåŠ¨åŒ–ï¼Œè§£å†³äº†å¹´ç»“äººå·¥å¯¹è´¦çš„ç—›ç‚¹ã€‚ ecifï¼šæ¸ é“ç³»ç»Ÿè¦è´Ÿè´£å¯¹æ¥ç¬¬ä¸‰æ–¹å¼•æµæ¸ é“ï¼Œå®¢æˆ·é€šè¿‡ç¬¬ä¸‰æ–¹æ¸ é“æˆä¿¡ã€å€Ÿæ¬¾ï¼Œæ¸ é“å¼•æµåˆ°åŒ…é“¶ï¼Œç”±äºä¸åŒæ¸ é“çš„æˆä¿¡ã€æ”¾æ¬¾ä¸šåŠ¡é€»è¾‘ä¸åŒï¼Œé’ˆå¯¹ä¸åŒæ¸ é“æä¾›ä¸åŒçš„åŠŸèƒ½å¼€å‘ã€‚å…¶ä¸­éƒ¨åˆ†æ¸ é“ç§¯ç´¯ä¸€å¤©å®¢æˆ·æˆä¿¡è¯·æ±‚æŒ‡å®šæ—¶é—´ç»Ÿä¸€å‘é€æˆä¿¡ç”³è¯·åˆ°åŒ…é“¶ï¼Œç³»ç»Ÿå¯å¤„ç†æ¯åˆ†é’Ÿ 800 ç¬”æˆä¿¡è¯·æ±‚ã€‚ cssï¼šæ¸…ç»“ç®—ç³»ç»Ÿæ­¤ç³»ç»Ÿæ˜¯å…¬å¸å†…éƒ¨æ¸…ç»“ç®—äººå‘˜ä½¿ç”¨çš„å†…éƒ¨ä¸šåŠ¡ç³»ç»Ÿï¼Œä¸»è¦åŠŸèƒ½æœ‰ä¸ªäººæº¢ç¼´æ¬¾è´¦æˆ·ç®¡ç†ã€å¯¹å…¬ä»˜æ¬¾ã€å¯¹ç§ä»˜æ¬¾ã€é€€æ¬¾ä»¥åŠæ¸…ç»“ç®—åŒäº‹è½¬è´¦ä¸šåŠ¡çš„å‘èµ·å’Œå®¡æ ¸åŠŸèƒ½ è”åˆè´·æ¬¾ç³»ç»Ÿä¸»è¦åŠŸèƒ½æœ‰è”åˆè´·æ¬¾åè®®ï¼Œè·¯ç”±é…ç½®ï¼Œè·¯ç”±è§„åˆ™ï¼Œå€Ÿæ®è¿˜æ¬¾è®¡åˆ’æ‹†åˆ†ï¼Œèµ„æ–¹æˆä¿¡ï¼Œå€Ÿæ®ã€äº¤æ˜“æµæ°´æ–‡ä»¶ï¼Œè”åˆè´·æ¬¾æˆä¿¡å½±éŸ³èµ„æ–™æ¨é€ ç›‘ç®¡æŠ¥é€ç³»ç»ŸæŒ‰ç…§ç›‘ç®¡æŠ¥é€éœ€æ±‚ï¼Œå¯¹å€Ÿæ®(æ¯æœˆæŠ¥é€å…¨é‡æ•°æ®)ï¼Œè¿˜æ¬¾è®¡åˆ’ï¼Œè¿˜æ¬¾æµæ°´ï¼Œå®¢æˆ·ï¼Œäº§å“ï¼Œæ ¸é”€ï¼Œå€Ÿæ¬¾ç”³è¯·ï¼Œèµ„äº§è¯åˆ¸åŒ–ï¼Œäº”çº§åˆ†ç±»ç­‰ä¿¡æ¯è¿›è¡ŒåŠ å·¥ä¹‹åæ¨é€ç»™ç›‘ç®¡æŠ¥é€ç³»ç»Ÿ è‡ªæˆ‘è¯„ä»·ä¸šç²¾äºå‹¤ï¼Œè’äºå¬‰ ã€è¡Œæˆäºæ€ï¼Œæ¯äºéšã€‚ æ€§æ ¼ä¹è§‚å¼€æœ—ï¼Œè¯ç—¨ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œå–œæ¬¢æ‹è§†é¢‘è®°å½•ç”Ÿæ´»ï¼Œå–œæ¬¢åˆ†äº«çŸ¥è¯†ï¼Œåˆ†äº«æŠ€æœ¯ï¼Œåˆ†äº«ç”Ÿæ´»ä¸­çš„ç‚¹ç‚¹æ»´æ»´ï¼Œè„¾æ°”å¥½ï¼Œæ€•è€å©† ä¸ªäººçˆ±å¥½ ç”µå­ç§‘æŠ€äº§å“ è½¯ä»¶ â€”â€” å–œæ¬¢winã€Macã€Android å¥½ç”¨æ— å¹¿å‘Šè½¯ä»¶ç ”ç©¶åŠåˆ†äº« è¶³çƒ â€”â€” å–œæ¬¢ä½†æ˜¯æ²¡æœºä¼šç©ï¼Œæ€€å¿µé«˜ä¸­æ—¶ä»£å‘€â€¦. ä¸‰å›½æ€ â€”â€” åŸºæœ¬å·²ç»è¢«å‡‰ä¼é€¼åˆ°é€€æ¸¸äº†â€¦.è€Œä¸”ç”Ÿæ´»ä¸­ä¹Ÿå¾ˆéš¾æ‰¾åˆ°ä¸€èµ·ç©è¿™ä¸ªæ¸¸æˆçš„æœ‹å‹äº†ğŸ¤£ é€›Bç«™ â€”â€” ç”Ÿæ´»åŒºå’Œç§‘æŠ€åŒºä¸€ä¸ªä¸çŸ¥åé˜¿å©†ä¸»ğŸ˜‚ï¼Œä½›ç³»æ›´æ–°è§†é¢‘ ğŸ‘‰ ç‚¹å‡»æ‰“å¼€æˆ‘çš„Bç«™ä¸ªäººç©ºé—´ è®°å¾—ä¸‰è¿ ğŸ‘ğŸ‘ğŸ‘ çœ‹ç”µå½± â€”â€” å–œæ¬¢ç§‘å¹»ã€æ¼«å¨ç²‰ã€è¿½æ–—ç½—å¤§é™†â€¦.."},{"title":"æŠ€æœ¯ç¬”è®°","date":"2022-01-27T08:31:13.243Z","updated":"2022-01-27T08:31:13.243Z","comments":true,"path":"æŠ€æœ¯ç¬”è®°/index.html","permalink":"https://zhangyong3214.github.io/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/index.html","excerpt":"","text":"æˆ‘æ˜¯æŠ€æœ¯ç¬”è®°"}],"posts":[{"title":"","slug":"å­¦ä¹ ç¬”è®°/ç½‘ç»œç¼–ç¨‹","date":"2022-04-13T11:17:46.547Z","updated":"2022-04-14T12:36:54.875Z","comments":true,"path":"2022/04/13/å­¦ä¹ ç¬”è®°/ç½‘ç»œç¼–ç¨‹/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/13/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/","excerpt":"","text":"1ã€æ·±å…¥ç†è§£ç½‘ç»œé€šè®¯1.1 è®¡ç®—æœºç½‘ç»œå‘å±•å†å² è®¡ç®—æœºç½‘ç»œçš„æ ‡å‡†å®šä¹‰æ˜¯:åˆ©ç”¨é€šä¿¡çº¿è·¯å°†åœ°ç†ä¸Šåˆ†æ•£çš„ã€å…·æœ‰ç‹¬ç«‹åŠŸèƒ½çš„è®¡ç®—æœºç³»ç»Ÿ å’Œé€šä¿¡è®¾å¤‡æŒ‰ä¸åŒçš„å½¢å¼è¿æ¥èµ·æ¥ï¼Œä»¥åŠŸèƒ½å®Œå–„çš„ç½‘ç»œè½¯ä»¶åŠåè®®å®ç°èµ„æºå…±äº«å’Œä¿¡æ¯ä¼ é€’ çš„ç³»ç»Ÿã€‚ 1.2 ç½‘ç»œåˆ†ç±» å±€åŸŸç½‘ åŸåŸŸç½‘ å¹¿åŸŸç½‘ 1.3 ç½‘ç»œå‘å±•å†å² ç¾å›½å›½é˜²éƒ¨ï¼Œè®¾è®¡ä¸€ç§ç¦»æ•£çš„ï¼Œå»ä¸­å¿ƒè¯çš„ç½‘ç»œæ‹“æ‰‘ã€‚ äº’è”ç½‘äº§å“å¼€å§‹å‘å±•ã€‚ OSIï¼šä¸ƒå±‚æ¨¡å‹ï¼Œç†è®ºæ¨¡å‹ã€‚OSIå‚è€ƒæ¨¡å‹ã€‚ IEEEï¼šäº”å±‚æ¨¡å‹ã€‚å®è·µåŒ–æ¨¡å‹ã€‚TCP/IPæ¨¡å‹ã€‚ 1.4 OSIä¸ƒå±‚æ¨¡å‹ åº”ç”¨å±‚ï¼šä¸ºåº”ç”¨å±‚æä¾›æœåŠ¡ è¡¨ç¤ºå±‚ï¼šæ•°æ®æ ¼å¼è½¬åŒ–ã€æ•°æ®åŠ å¯† ä¼šè¯å±‚ï¼šå»ºç«‹ã€ç®¡ç†å’Œç»´æŠ¤ä¼šè¯ ä¼ è¾“å±‚ï¼šå»ºç«‹ã€ç®¡ç†å’Œç»´æŠ¤ç«¯åˆ°ç«¯çš„é“¾æ¥ ç½‘ç»œå±‚ï¼šIPåœ°å€ä»¥åŠè·¯ç”±é€‰æ‹© æ•°æ®é“¾è·¯å±‚ï¼šæä¾›ä»‹è´¨è®¿é—®å’Œé“¾è·¯ç®¡ç† ç‰©ç†å±‚ï¼šç‰©ç†å±‚ 1.5 TCP/IPäº”å±‚æ¨¡å‹ åº”ç”¨å±‚ï¼šhttp,httpsçš„åè®®å±‚ã€‚ ä¼ è¾“å±‚ï¼štcpåè®®ã€‚æ“ä½œç³»ç»Ÿå®Œæˆçš„ã€‚ ç½‘ç»œå±‚ï¼šIPåœ°å€ã€‚æ“ä½œç³»ç»Ÿå®Œæˆçš„ã€‚ æ•°æ®é“¾è·¯å±‚ï¼šè¿‘ä¼¼ç½‘å¡é©±åŠ¨ç¨‹åºã€‚macåœ°å€ã€‚ ç‰©ç†å±‚ï¼šå¯¹åº”è®¡ç®—æœºçš„ç½‘å¡å’Œç½‘çº¿ã€‚ 1.6 TCP/IPåè®®ç°‡ æ‰€æœ‰å…¬å¼€çš„ï¼šhttps://www.rfc-editor.org/ DPTKï¼š 1.7 TCP/IPç½‘ç»œæœ¯è¯­ æ•°æ®åŒ…(packet) æŠ¥æ–‡/æ¶ˆæ¯(message)ï¼šåº”ç”¨åè®®çš„æ•°æ®å•ä½ã€‚ æŠ¥æ–‡æ®µ(segment)ï¼šTCPæ•°æ®æµä¿¡æ¯ æ•°æ®æŠ¥(datagram):IPä¸­çš„æ•°æ®å•ä½ã€‚ å¸§(frame):ç”¨äºæ•°æ®é“¾è·¯å±‚çš„åŒ…å•ä½ 1.8 IPåœ°å€å’ŒMACåœ°å€ IPåœ°å€ DHCHåˆ†é…ã€‚æ‰‹åŠ¨é…ç½®ã€‚ IPV4ï¼š4ä¸ªå­—èŠ‚ã€‚IPv6 ipåœ°å€ä½œç”¨åœ¨ç½‘ç»œå±‚ã€‚ ä¸åŒå­ç½‘å¯»å€æ–¹å¼ã€‚ MACåœ°å€/ç‰©ç†åœ°å€ ç”¨ç½‘å¡åˆ¶é€ å•†ï¼Œå†™åœ¨ç¡¬ä»¶ä¸Šçš„ã€‚æ€»å…±6ä½16è¿›åˆ¶ã€‚macåœ°å€ä¸»è¦åœ¨æ•°æ®é“¾è·¯å±‚ã€‚ åŒä¸€ä¸ªå­ç½‘å†…é€šè¿‡macåœ°å€å¯»å€ã€‚ 1.9 TCPç‰¹æ€§ é¢å‘è¿æ¥çš„åè®® TCPæä¾›çš„æ˜¯ä¸€ç§å¯é çš„æ•°æ®æµæœåŠ¡ï¼Œæ•°æ®æœ‰å¯èƒ½å‘—å·®è´¹ å…·ä½“è¿‡ç¨‹ å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ 1ã€å®¢æˆ·ç«¯å‘èµ·æŠ¥æ–‡ç»™æœåŠ¡ç«¯ï¼Œè¿›è¡Œè¿æ¥è¯·æ±‚ã€‚SYN=1;seq=éšæœºå€¼xã€‚å®¢æˆ·ç«¯è¿›å…¥syn_send 2ã€æœåŠ¡ç«¯åŸºäºè¿æ¥è¿›è¡Œå“åº”ã€‚SYN=1;ACK=1;ack_no = x+1;seq_no=éšæœºæ•°y;æœåŠ¡ç«¯è¿›å…¥syn_revd 3ã€å®¢æˆ·ç«¯å†æ¬¡å“åº”æœåŠ¡ç«¯ã€‚ACK=1;ack_no = y+1.å®¢æˆ·ç«¯è¿›å…¥ESTABleSHED,æœåŠ¡ç«¯ä¹Ÿè¿›å…¥ESTABleSHEDï¼› 2ã€BIOã€NIOç¼–ç¨‹ä¸ç›´æ¥å†…å­˜ã€é›¶æ‹·è´æ·±å…¥è¾¨æ WireShark:https://www.wireshark.org/.æŠ“åŒ…å·¥å…·ã€‚ 2.0 NIOä¸‰å¤§ç»„ä»¶ Slector Channel Buffer 2.1 Reactoræ¨¡å¼ç±»å‹ å•çº¿ç¨‹Reactoræ¨¡å¼ å•çº¿ç¨‹Reactorï¼Œå·¥ä½œçº¿ç¨‹æ± æ¨¡å¼ å¤šçº¿ç¨‹ä¸»ä»Reactor mainReactorä¸»çº¿ç¨‹åªå¤„ç†ç½‘ç»œé“¾æ¥ subReactorå¤„ç†è¯»å†™æ•°æ®ã€‚ ThreadPoolå¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚ 3ã€æ·±å…¥Linuxå†…æ ¸ç†è§£epoll4ã€Nettyä½¿ç”¨å¸¸ç”¨ç»„ä»¶è§£æ4.1","categories":[],"tags":[]},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•","slug":"é¢è¯•åŸºåœ°/ç®—æ³•åˆ·é¢˜è®°å½•","date":"2022-04-11T16:00:00.000Z","updated":"2022-04-30T13:14:30.806Z","comments":true,"path":"2022/04/12/é¢è¯•åŸºåœ°/ç®—æ³•åˆ·é¢˜è®°å½•/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/12/%E9%9D%A2%E8%AF%95%E5%9F%BA%E5%9C%B0/%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98%E8%AE%B0%E5%BD%95/","excerpt":"","text":"å¸¸è§ç®—æ³•æŠ€å·§å·§ç”¨ä½è¿ç®—1ã€å¦‚æœå’Œcharå­—ç¬¦ä¸²å˜ä¸ºä¸€ä¸ªintæ•´å½¢ ,ä¸èƒ½å¼ºè½¬,é€šè¿‡å‡å»â€™0â€™ 123char c = &#x27;0&#x27;;int i = (int)c;//å®é™…å€¼ä¸º48ï¼ŒASCIIçš„å€¼ï¼Œè¯¦ç»†è¯·æŸ¥çœ‹:https://easeapi.com/tool/asciiint j = c -&#x27;0&#x27;;// ç»“æœä¸º0 2ã€å·§ç”¨ä¸æˆ–è¿ç®—ã€‚intæ•°æˆ–0x00000000,intæ•°ä¸0xffffffff 123int a = 100;int b = a | 0x00000000;//ç»“æœæ˜¯100ï¼Œint c = a &amp; 0xffffffff;//ç»“æœæ˜¯100 3ã€å·§ç”¨ä½è¿ç®—ã€‚å¥‡å¶æ•°åˆ¤æ–­ï¼Œç”¨a&amp;1 12int num = 31;int num1 = num &amp; 1;//æƒ³æƒ³ä¸‹äºŒè¿›åˆ¶çš„8421,åªè¦ä¸ºçš„æœ€åä¸€ä½ä¸º1ï¼Œé‚£å®ƒä¸€å®šæ˜¯åŸºæ•°ï¼Œå¦åˆ™å°±æ˜¯å¶æ•° 4ã€å·§ç”¨å¼‚æˆ– a^a = 0,a^0=a;å¼‚æˆ–è¿›è¡Œæ•°æ®äº¤æ¢ 12345int x = 1;int y = 2;x = x^y;//è®°ä½åŸæœ¬xyçš„å±æ€§ï¼Œç›¸å½“äºtempy = x^y;//(x^y)^y=x^(y^y)=x^0=x,å®Œæˆy=xçš„äº¤æ¢x = x^y;//x^y^x=(x^x)^y=0^y=y,å®Œæˆx=yçš„äº¤æ¢ 5ã€é«˜æ•ˆæ‰¾ä¸­é—´å€¼ 1234int a = 1;// 0int b = 2;//length-1int middle = (a+b)/2;//è¶Šç•Œint middle = b-(b-a)&lt;&lt;1; å¸¸è§æŠ€å·§åŠ¨æ€è§„åˆ’ä»€ä¹ˆæ˜¯åŠ¨æ€è§„åˆ’ åŠ¨æ€è§„åˆ’ï¼Œdynamic programming,ç®€ç§°ä¸ºdpã€‚ åŠ¨æ€è§„åˆ’æ˜¯ä¸€ç§å¤šé˜¶æ®µå†³ç­–æœ€ä¼˜æ¨¡å‹ï¼Œä¸€èˆ¬ç”¨æ¥æ±‚å–æœ€å€¼é—®é¢˜ï¼Œå¤šæ•°æƒ…å†µä¸‹å®ƒå¯ä»¥é‡‡ç”¨è‡ªä¸Šè€Œä¸‹çš„é€’å½’å…¬å¼æ¥å¾—å‡ºæ¯æ¬¡å­é—®é¢˜çš„æœ€ä¼˜è§£(æœ€ä¼˜å­ç»“æ„)ï¼Œè¿›è€Œè‡ªç„¶è€Œç„¶åœ°å¾—å‡ºä¾èµ–å­é—®é¢˜çš„åŸé—®é¢˜çš„æœ€ä¼˜è§£ã€‚ å¤šé˜¶æ®µå†³ç­–ï¼Œæ„å‘³ç€é—®é¢˜å¯ä»¥åˆ†ä¸ºå­é—®é¢˜ï¼Œå­å­é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´é—®é¢˜å¯ä»¥æ‹†åˆ†ä¸ºå¤šä¸ªå­é—®é¢˜è¿›è¡Œæ±‚è§£ æœ€ä¼˜å­ç»“æ„ï¼Œåœ¨è‡ªä¸‹è€Œæ˜¯ç»™ä½ çš„é€’æ¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ±‚å¾—çš„æ¯ä¸ªå­é—®é¢˜ä¸€å®šæ˜¯å…¨å±€æœ€ä¼˜è§£ï¼Œæ—¢ç„¶å®ƒåˆ†è§£çš„å­é—®é¢˜æ˜¯å…¨å±€æœ€ä¼˜è§£ï¼Œé‚£ä¹ˆä¾èµ–äºä»–ä»¬è§£çš„åŸé—®é¢˜è‡ªç„¶è€Œç„¶ä¹Ÿæ˜¯å…¨å±€æœ€ä¼˜è§£ã€‚ è‡ªä¸Šè€Œä¸‹ï¼Œæ€æ ·æ‰èƒ½è‡ªä¸‹è€Œä¸Šæ±‚å‡ºæ¯ä¸ªå­é—®é¢˜çš„æœ€ä¼˜è§£å‘¢ï¼Œå¯ä»¥è‚¯å®šå­é—®é¢˜ä¹‹é—´æ˜¯æœ‰ä¸€å®šè”ç³»çš„ï¼Œå³åœ°æ¨å…¬å¼ï¼Œä¹Ÿå«åšçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œè¦å®šä¹‰å¥½è¿™ä¸ªçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œå­é—®é¢˜ä¹‹é—´å¯èƒ½å­˜åœ¨å¤§é‡çš„é‡å ï¼Œå¤§é‡åœ°é‡å å­é—®é¢˜æ„å‘³ç€å¤§é‡åœ°é‡å¤è®¡ç®—ï¼Œè¿™æ ·æ—¶é—´å¤æ‚åº¦å¾ˆå¯èƒ½å‘ˆæŒ‡æ•°ä¸Šå‡ï¼Œæ‰€ä»¥è‡ªä¸‹è€Œä¸Šçš„æ±‚è§£æ–¹å¼å¯ä»¥æ¶ˆé™¤é‡å å­é—®é¢˜ã€‚ æœ€ä¼˜å­ç»“æ„ï¼ŒçŠ¶æ€è½¬ç§»æ–¹å¼ï¼Œé‡å å­é—®é¢˜æ˜¯åŠ¨æ€è§„åˆ’çš„ä¸‰è¦ç´  ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰ ç¡®å®šé€’æ¨å…¬å¼ dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ– ç¡®å®šéå†é¡ºåº ä¸¾ä¾‹æ¨å¯¼dpæ•°ç»„ 7ã€åŒæŒ‡é’ˆè§£æ³• 8ã€æ»‘åŠ¨çª—å£è§£æ³• 9ã€æ ‘çš„æ·±åº¦éå†å’Œå¹¿åº¦éå†è§£æ³• 10ã€è´ªå¿ƒç®—æ³• 11ã€åŠ¨æ€è§„åˆ’ 12ã€é€’å½’è§£æ³• ç¡®å®šé€’å½’å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ ç¡®å®šç»ˆæ­¢æ¡ä»¶ ç¡®å®šå•å±‚é€’å½’é€»è¾‘ å¸¸è§ç®—æ³•äºŒåˆ†æŸ¥æ‰¾ç®—æ³• æœ‰åºé›†åˆï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(logN) 12345678910111213141516171819public static int binaryQuery(int[] arr, int target) &#123; if (arr == null || arr.length == 0) &#123; return -1; &#125; int left = 0; int right = arr.length - 1; while (left &lt;= right) &#123; // å…¶ä¸­ä¸­é—´å€¼å¯ä»¥ ä¼˜åŒ–ä¸º int mid = right - ((right-left)&gt;&gt;1); int mid = (left + right) / 2; if (arr[mid] == target) &#123; return mid; &#125; else if (arr[mid] &gt; target) &#123; right = mid - 1; &#125; else &#123; left = mid + 1; &#125; &#125; return -1; &#125; å¸¸è§ç®—æ³•é¢˜å•é“¾è¡¨åè½¬ éå†æ–¹å¼åè½¬ é€šè¿‡éå†å½¢å¼åè½¬ï¼Œéœ€è¦è®°å½•ä¿å­˜å…¨å±€å½“å‰èŠ‚ç‚¹å’Œå‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¾ªç¯å†…ä¸ºäº†é˜²æ­¢æ–­é“¾ï¼Œé€šè¿‡å±€åŸŸå˜é‡ä¿å­˜ä¸‹ä¸€ä¸ªã€‚ 1234567891011121314151617public static ListNode revertList(ListNode head) &#123; // ç»™ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä½¿ç”¨ ListNode pre = null; ListNode current = head; while (current != null) &#123; // ä¿å­˜ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé˜²æ­¢æ–­é“¾ ListNode next = current.next; // å½“å‰èŠ‚ç‚¹æŒ‡å‘ä¸Šä¸€ä¸ªèŠ‚ç‚¹ current.next = pre; // æŠŠæ–°çš„å½“å‰èŠ‚ç‚¹è®°å½•ä¸‹æ¥ï¼Œç»™ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä½¿ç”¨ pre = current; // ç§»åŠ¨å¤„ç† current = next; &#125; return pre; &#125; é€’å½’å½¢å¼åè½¬ é€’å½’å½¢å¼åè½¬éœ€è¦æ³¨æ„é€’å½’çš„ä¸‰æ¡åŸåˆ™ã€‚1.å¤§é—®é¢˜å¯ä»¥æ‹†ä¸ºå°é—®é¢˜ã€‚2.å°é—®é¢˜çš„æ±‚è§£æ–¹å¼å’Œå¤§é—®é¢˜ä¸€æ ·ã€‚3.å°é—®é¢˜å­˜åœ¨è§£ã€‚å‚è€ƒæ–æ³¢æ‹‰åˆ‡æ•°çš„è§£å†³æ–¹æ¡ˆã€‚ 1234567891011public static ListNode revertList2(ListNode head) &#123; if (head == null || head.next == null) &#123; return head; &#125; // é€’ï¼Œä¸€ç›´æ‹†åˆ†ï¼ŒçŸ¥é“å‰©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚å‡è®¾æˆ‘ä»¬çš„åªå‰©ä¸‹ä¸¤ä¸ªèŠ‚ç‚¹headå’Œhead.next ListNode revert = revertList2(head.next); // å½’å¹¶ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªèŠ‚ç‚¹ head.next.next = head;//æŠŠä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘è‡ªå·±ï¼Œè¿™ä¸ªæ—¶å€™æ˜¯ä¸ªåŒé“¾è¡¨ head.next = x,x.next=head; head.next = null;//æ–­å¼€æœ¬èº«çš„é“¾æ¥ return revert; &#125; å¼‚ä½å­—ç¬¦ä¸² https://leetcode-cn.com/problems/valid-anagram/ é”™è¯¯æ€è·¯ï¼Œé€šè¿‡æ¯ä¸ªå­—ç¬¦è¿›è¡Œå¼‚æˆ–ä¸è¡Œï¼Œå› ä¸ºå¯èƒ½å‡ºç°aaå’Œbbè¿™ç§æƒ…å†µï¼Œæ‰€ä»¥å¿…é¡»è¦çŸ¥é“æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ã€‚ é€šè¿‡hashè¡¨è¿›è¡Œè¿›è¡Œæ˜ å°„ï¼Œhashè¡¨çš„å·§å¦™ä½¿ç”¨æ–¹å¼ 12345678910111213141516171819202122232425public static boolean solution3(String param1, String param2) &#123; if (s == null || t == null) &#123; return false; &#125; if (s.length() != t.length()) &#123; return false; &#125; // å­—ç¬¦-&#x27;a&#x27;ä»£è¡¨æ˜¯ç›¸å¯¹çš„ä½ç½®ï¼ŒASCII int[] record = new int[26]; for (int i = 0; i &lt; s.length(); i++) &#123; // è¯¥å­—ç¬¦å‡ºç°æ¬¡æ•° record[s.charAt(i) - &#x27;a&#x27;]++; &#125; for (int i = 0; i &lt; t.length(); i++) &#123; // å‡ä¸€ record[s.charAt(i) - &#x27;a&#x27;]--; &#125; for (int i = 0; i &lt; record.length; i++) &#123; // å¦‚æœå­˜åœ¨ä¸ä¸º0çš„ä½ç½®ï¼Œè¯¥å­—ç¬¦æ²¡å‡ºç°ï¼Œ if (record[i] != 0) &#123; return false; &#125; &#125; return true;&#125; ä¸¤æ•°ä¹‹å’Œ https://leetcode-cn.com/problems/two-sum/submissions/ easy ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º å’Œä¸ºç›®æ ‡å€¼ target çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚ ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚ é€šè¿‡HashMapè¿›è¡Œæ•°æ®çš„å­˜å‚¨ï¼Œæ³¨æ„ç¼“å­˜ä¸­æ•°æ®åº”è¯¥åœ¨0ä½ç½® 123456789101112131415161718public int[] twoNumSum(int[] nums, int target) &#123; int[] result = new int[2]; if (nums == null || nums.length &lt; 2) &#123; return result; &#125; HashMap&lt;Integer, Integer&gt; cache = new HashMap(); for (int i = 0; i &lt; nums.length; i++) &#123; Integer second = nums[i]; Integer first = target - second; if (cache.containsKey(first)) &#123; result[1] = i; result[0] = cache.get(first); return result; &#125; cache.put(second, i); &#125; return result; &#125; å¤§æ•°ç›¸åŠ  https://leetcode-cn.com/problems/add-strings/ ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²å½¢å¼çš„éè´Ÿæ•´æ•° num1 å’Œnum2 ï¼Œè®¡ç®—å®ƒä»¬çš„å’Œå¹¶åŒæ ·ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›ã€‚ ä½ ä¸èƒ½ä½¿ç”¨ä»»ä½•å…§å»ºçš„ç”¨äºå¤„ç†å¤§æ•´æ•°çš„åº“ï¼ˆæ¯”å¦‚ BigIntegerï¼‰ï¼Œ ä¹Ÿä¸èƒ½ç›´æ¥å°†è¾“å…¥çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°å½¢å¼ã€‚ æŠŠä¸¤ä¸ªå€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœé•¿åº¦ä¸ä¸€è‡´æ”¹æˆå‰é¢è¡¥0ï¼Œåç»­è¿›è¡ŒæŒ‰ä½æƒ³åŠ ï¼Œæœ‰è¿›ä½æ³¨æ„è€ƒè™‘ æ³¨æ„int num = char-â€˜0â€™ è§£æ³•äºŒï¼šåŒæŒ‡æŒ‡é’ˆï¼Œä»åå¾€å‰é€’å½’ã€‚æ³¨æ„ç‚¹ 1.carryç”¨å®Œè¦ç½®0.2ã€æœ€åè¦è¡¥0,3ã€å­—ç¬¦ä¸²è¦åè½¬ 1234567891011121314151617181920212223242526272829303132333435363738public String addStrings(String num1, String num2) &#123; int carry = 0; boolean firstBigger = num1.length()&gt;=num2.length(); int length = firstBigger?num1.length():num2.length(); if(firstBigger)&#123; // å‰é¢è¡¥0ï¼Œè®©ä¸¤ä¸ªé•¿åº¦ä¸€è‡´ int differ = length-num2.length(); StringBuffer sb = new StringBuffer(); for(int i=0;i&lt;differ;i++)&#123; sb.append(&quot;0&quot;); &#125; sb.append(num2); num2 = sb.toString(); &#125;else&#123; int differ = length-num1.length(); StringBuffer sb = new StringBuffer(); for(int i=0;i&lt;differ;i++)&#123; sb.append(&quot;0&quot;); &#125; sb.append(num1); num1 = sb.toString(); &#125; StringBuffer sb = new StringBuffer(); for(int i = length-1;i&gt;=0;i--)&#123; int sum = num1.charAt(i)-&#x27;0&#x27;+num2.charAt(i)-&#x27;0&#x27;+carry; if(sum&gt;=10)&#123; carry = 1; sum -= 10; &#125;else&#123; carry = 0; &#125; sb.append(sum); &#125; if(carry == 1)&#123; sb.append(&#x27;1&#x27;); &#125; return sb.reverse().toString(); &#125; 123456789101112131415161718192021222324252627282930313233343536373839404142/** * é€šè¿‡åŒæŒ‡é’ˆå¤„ç† * æ³¨æ„ç”¨å®Œcarryçš„ç½®0æ“ä½œ * @param num1 * @param num2 * @return */ public static String bigNumberAdd3(String num1, String num2) &#123; if (num1 == null &amp;&amp; num2 == null) &#123; return null; &#125; if(num1 == null )&#123; return num2; &#125; if(num2 == null)&#123; return num1; &#125; int carry = 0; // ç¬¬ä¸€ä¸ªæ•°çš„å¼€å§‹ä½ç½® int i = num1.length()-1; // ç¬¬äºŒä¸ªæ•°çš„å¼€å§‹ä½ç½® int j = num2.length()-1; StringBuffer sb = new StringBuffer(); while(i &gt;=0 || j&gt;=0)&#123; int fNum = i&lt;0?0:num1.charAt(i)-&#x27;0&#x27;; int sNum = j&lt;0?0:num2.charAt(j)-&#x27;0&#x27;; int sum = fNum + sNum + carry; if(sum&gt;=10)&#123; carry = 1; sum -= 10; &#125;else&#123;// æ³¨æ„ä¸€å®šè¦ç½®0 carry = 0; &#125; sb.append(sum); i--; j--; &#125; if(carry&gt;0)&#123; sb.append(&#x27;1&#x27;); &#125; return sb.reverse().toString(); &#125; æœ€é•¿å›æ–‡å­ä¸² https://leetcode-cn.com/problems/longest-palindromic-substring/ ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæ‰¾åˆ° s ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚ æ€è·¯ä¸€ï¼šç¬¬ä¸€æ­¥æ‰¾åˆ°æ‰€æœ‰å›æ–‡çš„å­—ç¬¦ä¸²ï¼Œç¬¬äºŒæ­¥ï¼Œæ‰¾æœ€é•¿çš„å­ä¸² æ€è·¯äºŒï¼šåŠ¨æ€è§„åˆ’ æ€è·¯ä¸‰ï¼šåŒæŒ‡é’ˆ 1234567891011121314151617181920212223public String longestPalindrome(String s) &#123; String s1 = &quot;&quot;; String s2 = &quot;&quot;; String res = &quot;&quot;; for (int i = 0; i &lt; s.length(); i++) &#123; // åˆ†ä¸¤ç§æƒ…å†µï¼šå³ä¸€ä¸ªå…ƒç´ ä½œä¸ºä¸­å¿ƒç‚¹ï¼Œä¸¤ä¸ªå…ƒç´ ä½œä¸ºä¸­å¿ƒç‚¹ s1 = extend(s, i, i); // æƒ…å†µ1 res = s1.length() &gt; res.length() ? s1 : res; s2 = extend(s, i, i + 1); // æƒ…å†µ2 res = s2.length() &gt; res.length() ? s2 : res; &#125; return res; // è¿”å›æœ€é•¿çš„ &#125; public String extend(String s, int start, int end)&#123; String tmp = &quot;&quot;; while (start &gt;= 0 &amp;&amp; end &lt; s.length() &amp;&amp; s.charAt(start) == s.charAt(end))&#123; tmp = s.substring(start, end + 1); // Javaä¸­substringæ˜¯å·¦é—­å³å¼€çš„ï¼Œæ‰€ä»¥è¦+1 // å‘ä¸¤è¾¹æ‰©æ•£ start--; end++; &#125; return tmp; &#125; æ‰¾å°äºç»™å®šæ•°çš„æœ€å¤§æ•° ç»™å®šä¸€ä¸ªæ•°nï¼Œå¦‚23121;ç»™å®šä¸€ç»„æ•°å­—Aå¦‚{2,4,9}ï¼Œæ±‚ç”±Aä¸­å…ƒç´ ç»„æˆçš„ã€å°äºnçš„æœ€å¤§æ•°ã€‚å¦‚å°äº23121çš„æœ€å¤§æ•°ä¸º22999ã€‚ æ€è·¯ä¸€ã€åˆ†æè§£æ³•ã€‚ç¡®å®šç¬¬ä¸€ æ±‚ä¸€æ£µæ ‘çš„æœ€å°æ·±åº¦ æ³¨æ„æœ€å°æ·±åº¦æ˜¯æŒ‡é€šè¿‡rootåˆ°å„ä¸ªå¶å­èŠ‚ç‚¹æœ€çŸ­çš„è·ç¦» è§£æ³•ä¸€ï¼šæ ‘çš„æ·±åº¦ä¼˜å…ˆã€‚é€’å½’ï¼Œé€šè¿‡å­èŠ‚ç‚¹å¼€å§‹è®¡ç®—ã€‚é€’å½’å¤„ç†ã€‚ è§£æ³•äºŒï¼šæ ‘çš„å¹¿åº¦ä¼˜å…ˆã€‚æ‰¾åˆ°å­èŠ‚ç‚¹ç»“æŸã€‚å±‚çº§éå†ã€‚ è§£æ³•ä¸€ 123456789101112131415public static int treeDeep(TreeNode root) &#123; //1ã€åˆ¤æ–­è¾¹ç•Œå€¼ if (root == null) &#123; return 0; &#125; int leftMinDeep = treeDeep(root.left); int rightMinDeep = treeDeep(root.right); if (root.left == null &amp;&amp; root.right != null) &#123; return 1 + rightMinDeep; &#125; if (root.right == null &amp;&amp; root.left != null) &#123; return 1 + leftMinDeep; &#125; return Math.min(leftMinDeep + 1, rightMinDeep + 1); &#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/** * é€šè¿‡å¹¿åº¦ä¼˜å…ˆéå† * * @param root * @return */ public static int treeDeep1(TreeNode root) &#123; // 1ã€è¾¹ç•Œå€¼åˆ¤æ–­ if (root == null) &#123; return 0; &#125; if (root.left == null &amp;&amp; root.right == null) &#123; return 1; &#125; // 2ã€é€šè¿‡å®¹å™¨ä¿å­˜è¿›è¡Œå±‚çº§éå† Queue&lt;TreeNode&gt; queue = new LinkedList&lt;&gt;(); root.deep = 1; queue.offer(root); // 3ã€éå†å®¹å™¨ while (!queue.isEmpty()) &#123; TreeNode node = queue.poll(); // 4ã€é€€å‡ºæ¡ä»¶åˆ¤æ–­ if (node.left == null &amp;&amp; node.right == null) &#123; return node.deep; &#125; // 5ã€è¡¥å……å®¹å™¨ if (node.left != null) &#123; node.left.deep = node.deep + 1; queue.offer(node.left); &#125; if (node.right != null) &#123; node.right.deep = node.deep + 1; queue.offer(node.right); &#125; &#125; return 0; &#125; static class TreeNode &#123; int value; TreeNode left; TreeNode right; /** * å¢åŠ æ·±åº¦å­—æ®µ */ int deep; public TreeNode(int value, TreeNode left, TreeNode right) &#123; this.value = value; this.left = left; this.right = right; &#125; &#125; è·¯å¾„ä¹‹å’Œ https://leetcode-cn.com/problems/path-sum/ ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root å’Œä¸€ä¸ªè¡¨ç¤ºç›®æ ‡å’Œçš„æ•´æ•° targetSum ã€‚åˆ¤æ–­è¯¥æ ‘ä¸­æ˜¯å¦å­˜åœ¨ æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ çš„è·¯å¾„ï¼Œè¿™æ¡è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹å€¼ç›¸åŠ ç­‰äºç›®æ ‡å’Œ targetSum ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚ è§£æ³•1ï¼šé€’å½’è§£æ³•ã€‚1ã€é€’å½’æ–¹æ³•ã€‚f(x)=hasPathSum(TreeNode,int),2ã€ç»ˆæ­¢æ¡ä»¶ï¼ŒèŠ‚ç‚¹ä¸ºnullæˆ–è€…æ‰¾åˆ°targetèŠ‚ç‚¹ï¼Œä½†æ˜¯è¯¥èŠ‚ç‚¹ä¸ºå¶å­èŠ‚ç‚¹ã€‚3ã€ç¡®å®šå•å±‚é€»è¾‘ã€‚å·¦å³èŠ‚ç‚¹æ‰¾target-root.valå–å¹¶é›†; è§£æ³•2: 123456789public boolean hasPathSum(TreeNode root, int targetSum) &#123; if(root==null)&#123; return false; &#125; if(root.val == targetSum&amp;&amp;root.left==null&amp;&amp;root.right == null)&#123; return true; &#125; return hasPathSum(root.left,targetSum-root.val)||hasPathSum(root.right,targetSum-root.val);&#125; äºŒå‰æ ‘çš„éå† äºŒå‰æ ‘çš„å‰åºéå†ï¼šæ ¹å·¦å³ äºŒå‰æ ‘çš„ä¸­åºéå†ï¼šå·¦æ ¹å³ äºŒå‰æ ‘çš„åç»­éå†ï¼šå·¦å³æ ¹ äºŒå‰æ ‘çš„å±‚çº§éå†ï¼šæŒ‰ç…§æ ‘çš„æ·±åº¦è¿›è¡Œéå† ä¸‰ç§éå†æ–¹å¼ï¼šé€’å½’éå†ã€‚è¿­ä»£éå†ã€‚ 123456789101112131415161718class Solution &#123; public List&lt;Integer&gt; inorderTraversal(TreeNode root) &#123; // é€šè¿‡é€’å½’å½¢å¼æ‰“å° List&lt;Integer&gt; result = new LinkedList(); inOrder(root,result); return result; &#125; private void inOrder(TreeNode root,List&lt;Integer&gt; result)&#123; if(root == null)&#123; return ; &#125; inOrder(root.left,result); // æ”¾å…¥æ•°ç»„çš„æ—¶æœºä»£è¡¨ä»€ä¹ˆéå†é¡ºåºã€‚è¿™æ˜¯ä¸­åº result.add(root.val); inOrder(root.right,result); &#125;&#125; å±‚çº§éå† 1234567891011121314151617181920212223public static List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root) &#123; List&lt;List&lt;Integer&gt;&gt; list = new ArrayList&lt;&gt;(); if (root == null) &#123; return list; &#125; levelOrder(root, 1, list); return list; &#125; private static void levelOrder(TreeNode root, int index, List&lt;List&lt;Integer&gt;&gt; list) &#123; List&lt;Integer&gt; cList = new LinkedList&lt;&gt;(); // åˆå§‹åŒ–ä¸€ä¸‹æ•°ç»„é˜²æ­¢ç©ºæŒ‡é’ˆ if (list.size() &lt; index) &#123; list.add(new ArrayList&lt;&gt;()); &#125; list.get(index - 1).add(root.val); if (root.left != null) &#123; levelOrder(root.left, index + 1, list); &#125; if (root.right != null) &#123; levelOrder(root.right, index + 1, list); &#125; &#125; é€’å½’è§£æ³•-å…ˆåºéå† 123456789101112131415161718// å…ˆåºéå†çš„å±‚çº§éå† æ ¹å·¦å³ public static void preOrder1(TreeNode root) &#123; if (root == null) &#123; return; &#125; Stack&lt;TreeNode&gt; stack = new Stack(); stack.push(root); while (!stack.isEmpty()) &#123; TreeNode treeNode = stack.pop(); System.out.println(treeNode.val); if (treeNode.right != null) &#123; stack.push(treeNode.right); &#125; if (treeNode.left != null) &#123; stack.push(treeNode.left); &#125; &#125; &#125; åˆ¤æ–­ä¸€ä¸ªæ ‘æ˜¯å¦å¦ä¸€ä¸ªæ ‘çš„å­æ ‘ ç»™å®šä¸¤ä¸ªéç©ºäºŒå‰æ ‘ s å’Œ tï¼Œæ£€éªŒ s ä¸­æ˜¯å¦åŒ…å«å’Œ t å…·æœ‰ç›¸åŒç»“æ„å’ŒèŠ‚ç‚¹å€¼çš„å­æ ‘ã€‚s çš„ä¸€ä¸ªå­æ ‘åŒ…æ‹¬ s çš„ä¸€ä¸ªèŠ‚ç‚¹å’Œè¿™ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰å­å­™ã€‚s ä¹Ÿå¯ä»¥çœ‹åšå®ƒè‡ªèº«çš„ä¸€æ£µå­æ ‘ã€‚ ä¸¤ä¸ªæ ‘éƒ½æ˜¯ç©ºæ ‘ï¼Œè¿”å›true å¦‚æœä¸¤ä¸ªæ ‘ä¸€ä¸ªæ˜¯ç©ºï¼Œä¸€ä¸ªä¸æ˜¯ç©ºï¼Œä¸åŒ…å« ä¸¤ä¸ªæ ‘éƒ½æ˜¯éç©ºaï¼‰æ¯”è¾ƒæ ¹èŠ‚ç‚¹çš„å€¼æ˜¯ä¸æ˜¯ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰çš„è¯ï¼Œæ¯”è¾ƒä¸€ä¸‹så’Œtæ˜¯ä¸æ˜¯ç›¸åŒçš„æ ‘bï¼‰é€’å½’çš„åˆ¤å®šä¸€ä¸‹ï¼Œtæ˜¯å¦è¢«sçš„å·¦å­æ ‘åŒ…å«cï¼‰é€’å½’çš„åˆ¤å®šä¸€ä¸‹ï¼Œtæ˜¯å¦è¢«sçš„å³å­æ ‘åŒ…å«ã€‚ https://leetcode-cn.com/problems/subtree-of-another-tree/ 12345678910111213141516171819202122public static boolean isSubTree(TreeNode father, TreeNode child) &#123; if (father == null &amp;&amp; child == null) &#123; return true; &#125; if (father == null || child == null) &#123; return false; &#125; return isSameTree(father.left, child) || isSameTree(father.right, child) || isSameTree(father, child); &#125; private static boolean isSameTree(TreeNode left, TreeNode child) &#123; if (left == null &amp;&amp; left == null) &#123; return true; &#125; if (left == null || child == null) &#123; return false; &#125; if (left.val != child.val) &#123; return false; &#125; return isSameTree(left.left, left.left) &amp;&amp; isSameTree(left.right, child.right); &#125; æ±‚ç»™æ•°ç»„ä¸­ç»„åˆçš„å°äºç›®å‰æ•°çš„æœ€å¤§æ•° ç»™å®šä¸€ä¸ªæ•° nï¼Œå¦‚ 23121ï¼›ç»™å®šä¸€ç»„æ•°å­— A å¦‚ {2,4,9}ï¼Œæ±‚ç”± A ä¸­å…ƒç´ ç»„æˆçš„ã€å°äº n çš„æœ€å¤§æ•°ï¼Œå¦‚å°äº 23121 çš„æœ€å¤§æ•°ä¸º 22999ã€‚ äºŒå‰æ ‘çš„æœ€å¤§è·¯å¾„å’Œ https://leetcode-cn.com/problems/binary-tree-maximum-path-sum/ é€’å½’æ€è·¯ï¼š 1ã€æŸä¸€ä¸ªèŠ‚ç‚¹+å·¦èŠ‚ç‚¹+å³èŠ‚ç‚¹ä¸€å®šæ˜¯ä¸€æ¡è·¯å¾„ã€‚ 2ã€é€’å½’æ‰¾è·¯å¾„ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ‰¾ä¸€éï¼Œç¡®å®šçš„æœ€å¤§å€¼å°±æ˜¯æœ€å¤§å€¼ã€‚ åŠ¨æ€è§„åˆ’æ€è·¯12345678910111213141516171819202122232425262728293031class Solution &#123; int maxPathNum = Integer.MIN_VALUE; public int maxPathSum(TreeNode root) &#123; if(root == null)&#123; return 0; &#125; if(root.left == null &amp;&amp; root.right == null)&#123; return root.val; &#125; // æŠŠæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„æœ€å¤§è·¯å¾„éƒ½æ‰¾ä¸€ä¸‹ getNodeMax(root); return maxPathNum; &#125; /** * æ‰¾åˆ°rootèŠ‚ç‚¹çš„æœ€å¤§è·¯å¾„ */ private int getNodeMax(TreeNode root)&#123; // é€’å½’çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ä¸ºnull if(root == null)&#123; return 0; &#125; // å½“å‰èŠ‚ç‚¹åŠ ä¸Šå·¦èŠ‚ç‚¹å’Œå³èŠ‚ç‚¹å€¼çš„æœ€å¤§å€¼ä»£è¡¨å½“å‰å€¼èŠ‚ç‚¹çš„å€¼.ä¸ºè´Ÿå€¼å–0 int childLeftMaxPath = Math.max(0,getNodeMax(root.left)); int childRightMaxPath = Math.max(0,getNodeMax(root.right)); maxPathNum = Math.max(maxPathNum,root.val+childLeftMaxPath+childRightMaxPath); // å½“å‰èŠ‚ç‚¹çš„å•è¾¹æœ€å¤§å€¼ return root.val+Math.max(childLeftMaxPath,childRightMaxPath); &#125;&#125; æ–æ³¢æ‹‰å¥‘æ•°åˆ—é€’å½’è§£æ³• éšç€æ•°æ®çš„å˜å¤§ï¼Œæ•ˆç‡æŒ‡æ•°çº§ä¸Šå‡ 123456789public int fibonacci(int n)&#123; if(n== 1)&#123; return 1; &#125; if(n==2)&#123; return 1; &#125; return fibonacci(n-1)+febonacci(n-2);&#125; ç¼“å­˜è§£æ³• é€šè¿‡Map&lt;Integer,Interger&gt;è®°å½•nå’Œf(n)çš„å€¼ã€‚ 1 ä¸‰è§’å½¢çš„æœ€å°è·¯å¾„å’Œ å¦‚å›¾ç¤ºï¼Œä»¥ä¸Šä¸‰è§’å½¢ç”±ä¸€è¿ä¸²çš„æ•°å­—æ„æˆï¼Œè¦æ±‚ä»é¡¶ç‚¹ 2 å¼€å§‹èµ°åˆ°æœ€åº•ä¸‹è¾¹çš„æœ€çŸ­è·¯å¾„ï¼Œæ¯æ¬¡åªèƒ½å‘å½“å‰èŠ‚ç‚¹ä¸‹é¢çš„ä¸¤ä¸ªèŠ‚ç‚¹èµ°ï¼Œå¦‚ 3 å¯ä»¥å‘ 6 æˆ– 5 èµ°ï¼Œä¸èƒ½ç›´æ¥èµ°åˆ° 7ã€‚ é€’å½’è§£æ³•1234567891011121314public static int minPathCount(int x, int y) &#123; int maxCount = 4; if (x &gt;= maxCount) &#123; return 0; &#125; if (x == maxCount - 1) &#123; return intArr[x][y]; &#125; // å¾€å·¦è¾¹èµ° int left = minPathCount(x + 1, y); // å¾€å³è¾¹èµ° int right = minPathCount(x + 1, y + 1); return Math.min(intArr[x][y] + left, intArr[x][y] + right); &#125; åŠ¨æ€è§„åˆ’è§£æ³•123456789101112public static int minPathCount1(int x, int y) &#123; int[][] dp = new int[intArr.length][intArr[0].length]; for (int i = 0; i &lt; intArr[intArr.length - 1].length; i++) &#123; dp[intArr.length - 1][i] = intArr[intArr.length - 1][i]; &#125; for (int i = intArr.length - 2; i &gt; 0; i--) &#123; for (int j = 0; j &lt; intArr[i].length - 1; j++) &#123; dp[i][j] = Math.min(dp[i + 1][j]+intArr[i][j], dp[i + 1][j + 1]+intArr[i][j]); &#125; &#125; return dp[x][y];&#125; çœä»½é—®é¢˜ æœ‹å‹åœˆé—®é¢˜ï¼Œäº²æˆšé—®é¢˜ æœ‰nä¸ªåŸå¸‚ï¼Œå…¶ä¸­ä¸€äº›åŸå¸‚å½¼æ­¤ç›¸è¿ï¼Œå¦ä¸€äº›æ²¡æœ‰ç›¸è¿ã€‚å¦‚æœåŸå¸‚aä¸åŸå¸‚bç›´æ¥ç›¸è¿ï¼Œä¸”åŸå¸‚bä¸åŸå¸‚cç›´æ¥ç›¸è¿ï¼Œé‚£ä¹ˆåŸå¸‚aä¸åŸå¸‚cé—´æ¥ç›¸è¿ã€‚çœä»½åä¸€ç»„ç›´æ¥æˆ–è€…é—´æ¥ç›¸è¿çš„åŸå¸‚ï¼Œç»„å†…ä¸å«å…¶ä»–æ²¡æœ‰ç›¸è¿çš„åŸå¸‚ï¼Œç»™ä½ ä¸€ä¸ªnxnçš„çŸ©é˜µisCOnnnectedï¼Œå…¶ä¸­isCOnnnectedã€iã€‘ã€jã€‘=1è¡¨ç¤ºiä¸ªåŸå¸‚å’Œç¬¬jä¸ªåŸå¸‚ç›´æ¥æƒ³æ¥ä½ ï¼ŒisCOnnnectedã€iã€‘ã€jã€‘=0è¡¨ç¤ºäºŒè€…ä¸ç›´æ¥ç›¸è¿ã€‚è¿”å›çŸ©é˜µä¸­èº«ä»½çš„æ•°é‡ã€‚ è¿™æ˜¯ä¸€ä¸ªåˆ†ç»„é—®é¢˜ DFSï¼šæ·±åº¦ä¼˜å…ˆ","categories":[{"name":"ç®—æ³•åˆ·é¢˜","slug":"ç®—æ³•åˆ·é¢˜","permalink":"https://zhangyong3214.github.io/categories/%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98/"}],"tags":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"https://zhangyong3214.github.io/tags/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"","slug":"å­¦ä¹ ç¬”è®°/Dubbo","date":"2022-04-07T12:28:22.613Z","updated":"2022-04-07T14:03:37.720Z","comments":true,"path":"2022/04/07/å­¦ä¹ ç¬”è®°/Dubbo/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/07/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Dubbo/","excerpt":"","text":"Apache Dubbo æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ã€è½»é‡çº§çš„å¼€æºæœåŠ¡æ¡†æ¶ Dubbo å…¥é—¨åˆ†å¸ƒå¼RPCçš„é€šç”¨æ–¹æ¡ˆ","categories":[],"tags":[]},{"title":"åè¡€æ•´ç†IDEAå¿…å¤‡æ’ä»¶(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§ï¼Œè®©æ’¸ç æ•ˆç‡æå‡1000%","slug":"è½¯ä»¶å·¥å…·/åè¡€æ•´ç†IDEAå¿…å¤‡æ’ä»¶","date":"2022-04-05T09:32:31.592Z","updated":"2022-04-05T09:32:31.592Z","comments":true,"path":"2022/04/05/è½¯ä»¶å·¥å…·/åè¡€æ•´ç†IDEAå¿…å¤‡æ’ä»¶/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/05/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/%E5%90%90%E8%A1%80%E6%95%B4%E7%90%86IDEA%E5%BF%85%E5%A4%87%E6%8F%92%E4%BB%B6/","excerpt":"","text":"ä¿—è¯è¯´ï¼šâ€œå·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨â€ï¼Œå¥½çš„å¼€å‘å·¥å…·èƒ½è®©æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ç¿»å€ï¼Œè€Œå¥½çš„å¼€å‘å·¥å…·åŠ ä¸Šä¼˜ç§€çš„æ’ä»¶ï¼Œèƒ½è®©æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡æå‡åå€ï¼ˆ(@^_^@)æˆ‘è¦æ‰“åä¸ªï¼‰ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬åŒºåˆ«äºå…¶ä»–ç¨‹åºçŒ¿çš„å¿…å¤‡å·¥å…·ï¼Œä¸‹é¢å°±æ˜¯æˆ‘ä»åä½™å¹´å·¥ä½œä¸­æ€»ç»“å‡ºæ¥çš„å¥½ç”¨çš„ideaæ’ä»¶ï¼ˆå¥½åƒå·¥ä½œçš„å‰äº”å¹´æˆ‘ç”¨çš„éƒ½æ˜¯eclipseï¼Œå“ˆå“ˆ(â•¯&gt;Ğ´&lt;)â•¯â½Ë™Â³Ë™â¾ï¼Œè¿™ä¸é‡è¦ï¼ï¼‰ã€‚æ’ä»¶ä¸»è¦åˆ†ä¸ºï¼šä»£ç ç”Ÿæˆç±»ï¼Œæ—¥å¸¸å¼€å‘ç±»ï¼Œä¸»é¢˜ç¾åŒ–ç±»ï¼Œä»¥ä¸‹æ’ä»¶å¤§éƒ½å¯ä»¥é€šè¿‡ IDEA è‡ªå¸¦çš„æ’ä»¶ç®¡ç†ä¸­å¿ƒå®‰è£…ï¼Œå¦‚æœæœä¸åˆ°å¯ä»¥å» IDEA æ’ä»¶å®˜ç½‘ä¸‹è½½æœ¬åœ°å¯¼å…¥ã€‚æ˜Ÿå·ä»£è¡¨æˆ‘ä¸ªäººçš„æ¨èæŒ‡æ•° ã€‚ ä»£ç ç”ŸæˆLombok æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜… è‡ªåŠ¨ç”Ÿæˆgetã€setæ–¹æ³• EasyCode æ¨èæŒ‡æ•°ï¼šâ˜…â˜… æ•°æ®åº“é€†å‘å·¥ç¨‹ GsonFormat æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜… é€šè¿‡jsonç”Ÿæˆå®ä½“ç±» Codota æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜… ä»£ç æç¤º è¯¥æ’ä»¶çš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼š æ”¯æŒæ™ºèƒ½ä»£ç è‡ªåŠ¨æç¤ºï¼Œè¯¥åŠŸèƒ½å¯ä»¥å¢å¼º IDEA çš„ä»£ç æç¤ºåŠŸèƒ½ï¼› æ”¯æŒ JDK å’ŒçŸ¥åç¬¬ä¸‰æ–¹åº“çš„å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•æœç´¢ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä»–çŸ¥åå¼€æºé¡¹ç›®å¯¹è¯¥å‡½æ•°çš„ç”¨æ³•ã€‚ å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡ä½¿ç”¨æŸä¸ªç±»ï¼Œå¯¹æŸä¸ªå‡½æ•°ä¸å¤Ÿç†Ÿæ‚‰æ—¶ï¼Œå¯ä»¥é€šè¿‡è¯¥æ’ä»¶æœç´¢ç›¸å…³ç”¨æ³•ï¼Œå¿«é€Ÿæ¨¡ä»¿å­¦ä¹ ï¼Œä½¿ç”¨æ–¹æ³•ï¼šå³é”®è¦æœç´¢çš„ç±»ï¼Œé€‰æ‹© Get relevant exanples GenerateAllSetter æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜… å˜é‡è‡ªåŠ¨ç”Ÿæˆsetæ–¹æ³• æ’ä»¶å®˜ç½‘åœ°å€ ã€‚æˆ‘ä»¬å®šä¹‰å¥½ä» A ç±»è½¬æ¢åˆ° B ç±»çš„å‡½æ•°è½¬æ¢å‡½æ•°åï¼Œä½¿ç”¨è¿™ä¸¤ä¸ªæ’ä»¶å¯ä»¥è‡ªåŠ¨è°ƒç”¨ Getter å’Œ Setter å‡½æ•°å®è¡Œè‡ªåŠ¨è½¬æ¢ã€‚å®é™…å¼€å‘ä¸­è¿˜æœ‰ä¸€ä¸ªéå¸¸å¸¸è§çš„åœºæ™¯ï¼šæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯¹è±¡åï¼Œæƒ³ä¾æ¬¡è°ƒç”¨ Setter å‡½æ•°å¯¹å±æ€§èµ‹å€¼ï¼Œå¦‚æœå±æ€§è¾ƒå¤šå¾ˆå®¹æ˜“é—æ¼æˆ–è€…é‡å¤ã€‚å¯ä»¥ä½¿ç”¨GenerateAllSetter æä¾›çš„åŠŸèƒ½ï¼Œè‡ªåŠ¨è°ƒç”¨æ‰€æœ‰ Setter å‡½æ•°ï¼ˆå¯å¡«å……é»˜è®¤å€¼ï¼‰ï¼Œç„¶åè‡ªå·±å†è·Ÿè¿›å®é™…éœ€æ±‚è®¾ç½®å±æ€§å€¼ã€‚ .ignore æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜… gitæäº¤æ—¶è¿‡æ»¤æ‰ä¸éœ€è¦æäº¤çš„æ–‡ä»¶ï¼Œå¾ˆæ–¹ä¾¿ï¼Œæœ‰äº›æœ¬åœ°æ–‡ä»¶æ˜¯ä¸éœ€è¦æäº¤åˆ°Gitä¸Šçš„ï¼Œæ’ä»¶ï¼šProjectViewæ¶µç›–äº†æ­¤åŠŸèƒ½ CamelCase æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜… å°†ä¸æ˜¯é©¼å³°æ ¼å¼çš„åç§°ï¼Œå¿«é€Ÿè½¬æˆé©¼å³°æ ¼å¼ï¼Œå®‰è£…å¥½åï¼Œé€‰ä¸­è¦ä¿®æ”¹çš„åç§°ï¼ŒæŒ‰å¿«æ·é”®shift+alt+uã€‚ ä»£ç è§„èŒƒAlibaba Java Coding Guidelines æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜… æ’ä»¶åŠŸèƒ½ï¼šä»£ç è§„èŒƒæ’ä»¶ jclasslib bytecode viewer æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜… æ’ä»¶åŠŸèƒ½ï¼šå¯è§†åŒ–çš„å­—èŠ‚ç æŸ¥çœ‹æ’ä»¶ ä½¿ç”¨æ–¹æ³•ï¼š åœ¨ IDEA æ‰“å¼€æƒ³ç ”ç©¶çš„ç±»ï¼› ç¼–è¯‘è¯¥ç±»æˆ–è€…ç›´æ¥ç¼–è¯‘æ•´ä¸ªé¡¹ç›®ï¼ˆ å¦‚æœæƒ³ç ”ç©¶çš„ç±»åœ¨ jar åŒ…ä¸­ï¼Œæ­¤æ­¥å¯ç•¥è¿‡ï¼‰ï¼› æ‰“å¼€â€œviewâ€ èœå•ï¼Œé€‰æ‹©â€œShow Bytecode With jclasslibâ€ é€‰é¡¹ï¼› é€‰æ‹©ä¸Šè¿°èœå•é¡¹å IDEA ä¸­ä¼šå¼¹å‡º jclasslib å·¥å…·çª—å£ã€‚ é‚£ä¹ˆæœ‰è‡ªå¸¦çš„å¼ºå¤§çš„åæ±‡ç¼–å·¥å…· javap è¿˜æœ‰å¿…è¦ç”¨è¿™ä¸ªæ’ä»¶å—ï¼Ÿ è¿™ä¸ªæ’ä»¶çš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼š ä¸éœ€è¦æ•²å‘½ä»¤ï¼Œç®€å•ç›´æ¥ï¼Œåœ¨å³ä¾§æ–¹ä¾¿å’Œæºä»£ç è¿›è¡Œå¯¹æ¯”å­¦ä¹ ï¼› å­—èŠ‚ç å‘½ä»¤æ”¯æŒè¶…é“¾æ¥ï¼Œç‚¹å‡»å…¶ä¸­çš„è™šæ‹ŸæœºæŒ‡ä»¤å³å¯è·³è½¬åˆ° jvms ç›¸å…³ç« èŠ‚ï¼Œè¶…çº§æ–¹ä¾¿ã€‚ è¯¥æ’ä»¶å¯¹æˆ‘ä»¬å­¦ä¹ è™šæ‹ŸæœºæŒ‡ä»¤æœ‰æå¤§çš„å¸®åŠ©ã€‚ FindBugs æ¨èæŒ‡æ•°ï¼šâ˜…â˜… æ’ä»¶åŠŸèƒ½ï¼šæŸ¥æ‰¾ä»£ç bug ç¨‹åºå‘˜æ€»æ˜¯æƒ³å°½å¯èƒ½åœ°é¿å…å†™ BUGï¼Œ FindBugs ä½œä¸ºé™æ€ä»£ç æ£€æŸ¥æ’ä»¶ï¼Œå¯ä»¥æ£€æŸ¥ä½ ä»£ç ä¸­çš„éšæ‚£ï¼Œå¹¶ç»™å‡ºåŸå› ã€‚ SonarLine æ¨èæŒ‡æ•°ï¼šâ˜…â˜… æ’ä»¶åŠŸèƒ½ï¼šä»£ç è´¨é‡ç®¡ç†å·¥å…· æ—¥å¸¸å¼€å‘Translation æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜… æ’ä»¶åŠŸèƒ½ï¼šç¿»è¯‘ Jrebel æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜… æ’ä»¶åŠŸèƒ½ï¼šçƒ­éƒ¨ç½² Key Promoter X æ¨èæŒ‡æ•°ï¼šâ˜…â˜… æ’ä»¶åŠŸèƒ½ï¼šå¿«æ·é”®æç¤º MyBatis Log Plugin æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜… æ’ä»¶åŠŸèƒ½ï¼šæ‰“å°sql MyBatisX æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜… æ’ä»¶åŠŸèƒ½ï¼šMapperè·³è½¬Dao Maven Search æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜… æ’ä»¶åŠŸèƒ½ï¼šæŸ¥è¯¢maven Maven Helper æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜… æ’ä»¶åŠŸèƒ½ï¼šä¾èµ–å…³ç³»å›¾ å®‰è£…å IDEA ä¸­æ‰“å¼€ pom.xml æ–‡ä»¶æ—¶ï¼Œå°±ä¼šå¤šå‡ºä¸€ä¸ª â€œDependency Analyzerâ€ é€‰é¡¹å¡ã€‚ SequenceDiagram æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜… æ’ä»¶åŠŸèƒ½ï¼šæ—¶åºå›¾ SequenceDiagram å¯ä»¥æ ¹æ®ä»£ç è°ƒç”¨é“¾è·¯è‡ªåŠ¨ç”Ÿæˆæ—¶åºå›¾ï¼Œè¶…çº§èµï¼Œè¶…çº§æ¨èï¼è¿™å¯¹ç ”ç©¶æºç ï¼Œæ¢³ç†å·¥ä½œä¸­çš„ä¸šåŠ¡ä»£ç æœ‰æå¤§çš„å¸®åŠ©ï¼Œå ªç§°ç¥å™¨ã€‚å®‰è£…å®Œæˆåï¼Œåœ¨æŸä¸ªç±»çš„æŸä¸ªå‡½æ•°ä¸­ï¼Œå³é”® â€“&gt; Sequence Diagaram å³å¯è°ƒå‡ºã€‚ ä¸»é¢˜ç¾åŒ–Active power mode æ¨èæŒ‡æ•°ï¼šâ˜…â˜… æ’ä»¶åŠŸèƒ½ï¼šæ‰“å­—ç‰¹æ•ˆ Rainbow Branckets æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜… æ’ä»¶åŠŸèƒ½ï¼šå½©è™¹æ‰©å· æ’ä»¶githubåœ°å€ ã€‚ç”±äºå¾ˆå¤šäººæ²¡æœ‰å…»æˆå¥½çš„ç¼–ç é£æ ¼ï¼Œæ²¡æœ‰éšæ‰‹ format ä»£ç çš„ä¹ æƒ¯ï¼Œç”šè‡³æœ‰äº›åŒäº‹ä¼šå†™ä»£ç è¶…è¿‡å‡ ç™¾è¡Œï¼Œé˜…è¯»èµ·æ¥å°†éå¸¸ç—›è‹¦ã€‚ç—›è‹¦çš„åŸå› ä¹‹ä¸€å°±æ˜¯æ‰¾åˆ°ä¸Šä¸‹æ–‡ï¼Œç”±äºæ‹¬å·å¤ªå¤šï¼Œä¸ç¡®å®šå½“å‰ä»£ç è¡Œæ˜¯å¦å±äºæŸä¸ªä»£ç å—ï¼Œæ­¤æ—¶è¿™ä¸ªæ’ä»¶å°±ä¼šå¸®ä¸Šå¤§å¿™ã€‚åŒå‡»é¡¶éƒ¨çš„ç±»åå¯ä»¥è·³è½¬åˆ°å¯¹åº”ç±»çš„æºç ä¸­ï¼ŒåŒå‡»è°ƒç”¨çš„å‡½æ•°åå¯ä»¥ç›´æ¥è°ƒå…¥æŸä¸ªå‡½æ•°çš„æºç ï¼Œæ€»ä¹‹éå¸¸å¼ºå¤§ã€‚ CodeGlance æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜… æ’ä»¶åŠŸèƒ½ï¼šä»£ç è¿·ä½ å°åœ°å›¾ ç±»ä¼¼äºsublimeçš„å³ä¾§ä»£ç å°åœ°å›¾ï¼ŒCodeGlance2ä¸ºåŸç‰ˆåŠ å¼º Xcode Drak theme æ¨èæŒ‡æ•°ï¼šâ˜… æ’ä»¶åŠŸèƒ½ï¼šä¸»é¢˜ Material Theme UI æ¨èæŒ‡æ•°ï¼šâ˜… æ’ä»¶åŠŸèƒ½ï¼šå¤šç§ä¸»é¢˜ å¯¹äºå¾ˆå¤šäººè€Œè¨€ï¼Œå†™ä»£ç æ—¶ç•¥æ˜¾æ¯ç‡¥çš„ï¼Œå¦‚æœèƒ½å¤Ÿå®‰è£…è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜å°†ä¸ºå¼€å‘å·¥ä½œå¸¦æ¥äº›è®¸ä¹è¶£ã€‚IDEA æ”¯æŒå„ç§ä¸»é¢˜æ’ä»¶ï¼Œå…¶ä¸­æœ€å‡ºåçš„å½“å± Material Theme UIã€‚å®‰è£…åï¼Œå¯ä»¥ä»è¯¥æ’ä»¶å†…ç½®çš„å„ç§é£æ ¼ä¸ªé€‰æ‹©è‡ªå·±æœ€å–œæ¬¢çš„ä¸€ç§ã€‚","categories":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://zhangyong3214.github.io/categories/%E6%95%99%E7%A8%8B/"}],"tags":[{"name":"è½¯ä»¶å·¥å…·","slug":"è½¯ä»¶å·¥å…·","permalink":"https://zhangyong3214.github.io/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/"}]},{"title":"å†›äº‹çº§åˆ«å®‰å…¨å¼ºåº¦ï¼Œå…è´¹å¯†ç ç®¡ç†å·¥å…·KeePassï¼Œæ°¸è¿œæ»´ç¥","slug":"è½¯ä»¶å·¥å…·/å…è´¹å¯†ç ç®¡ç†å·¥å…·KeePassæ°¸è¿œçš„ç¥","date":"2022-04-05T09:32:31.592Z","updated":"2022-04-05T09:32:31.592Z","comments":true,"path":"2022/04/05/è½¯ä»¶å·¥å…·/å…è´¹å¯†ç ç®¡ç†å·¥å…·KeePassæ°¸è¿œçš„ç¥/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/05/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/%E5%85%8D%E8%B4%B9%E5%AF%86%E7%A0%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7KeePass%E6%B0%B8%E8%BF%9C%E7%9A%84%E7%A5%9E/","excerpt":"","text":"å‰è¨€â€‹ æ¬¢è¿å¤§å®¶æ”¶çœ‹æœ¬ç¯‡æ–‡ç« å¯¹åº”Bç«™è§†é¢‘è§£è¯´ï¼šğŸ‘‰ ç‚¹æ­¤è·³è½¬Bç«™è§†é¢‘è§£è¯´æ•™ç¨‹ ğŸ‘ˆ â€‹ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å–œæ¬¢ç§‘æŠ€ï¼Œå–œæ¬¢åˆ†äº«ï¼Œå–œæ¬¢è½¯ä»¶ï¼Œå–œæ¬¢æŠ˜è…¾ï¼Œæœ‰æ´ç™–åˆæœ‰å¼ºè¿«ç—‡çš„ç§‘æŠ€å†œåå·¥â€”æè‹Ÿè›‹ï¼Œä»Šå¤©æˆ‘æ¥ç»™å¤§å®¶åˆ†äº«ä¸€æ¬¾å¯†ç ç®¡ç†è½¯ä»¶ï¼šKeePassã€‚ä½ æ˜¯å¦æœ‰è¿‡è¿™ç§ç»å†ï¼šå¹³å‡æ¯åŠä¸ªæœˆæˆ–è€…ä¸€ä¸ªæœˆï¼Œæˆ‘ä»¬å†ç™»å½•æŸäº›ç½‘ç«™æˆ–è€…ç™»å½•æŸäº›è´¦å·çš„æ—¶å€™ï¼Œå‘ç°æˆ‘ä»¬çš„å¯†ç è®°ä¸ä½äº†ï¼Œç”¨å¸¸ç”¨çš„å¯†ç è¯•è¿‡å‡ æ¬¡ä¹‹åï¼Œå‘ç°è¿˜æ˜¯ä¸å¯¹ï¼Œå¹²è„†ç›´æ¥ç‚¹å‡»å¿˜è®°å¯†ç ï¼Œç”¨æ‰‹æœºéªŒè¯ç æˆ–è€…é‚®ç®±éªŒè¯ç æ‰¾å›å¯†ç æ›´æ”¹æˆä¸ºæˆ‘ä»¬å¸¸ç”¨çš„å¯†ç ï¼Œå¦‚æœè¿™ä¸ªç½‘ç«™æˆ–è€…è¿™ä¸ªè´¦å·æˆ‘ä»¬å¥½ä¹…æ²¡ç™»å½•è¿‡ï¼Œç»‘å®šçš„æ‰‹æœºå·è¿˜æ˜¯æˆ‘ä¹‹å‰ç”¨è¿‡çš„æ‰‹æœºå·ï¼Œå¯èƒ½å°±å¾—é€šè¿‡ç”³è¯‰æä¾›å„ç§èµ„æ–™æ‰¾å›å¯†ç ï¼Œé‚£ç­‰å¾…ä½ çš„å°†æ˜¯å™©æ¢¦çº§åˆ«çš„æ“ä½œï¼Œå¦‚æœè¿™ä¸ªè´¦å·ä¸å¤ªé‡è¦ï¼Œæˆ‘ä¸è¦äº†ä¹Ÿå°±ç®—äº†ï¼Œå¦‚æœè¿™ä¸ªè´¦å·å¾ˆé‡è¦ï¼Œé‚£æ­¤æ—¶æ­¤åˆ»ä½ çš„å†…å¿ƒåº”è¯¥å·²ç»ä¸‡é©¬(ç¾Šé©¼)å´©è…¾äº†ã€‚æœ‰äº›äººå¯èƒ½å–œæ¬¢æŠŠå¯†ç è®°å½•åœ¨ä¸€ä¸ªç‰¹å®šçš„ç¬”è®°æœ¬ä¸Šé¢ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªç¬”è®°æœ¬ä¸¢äº†â€¦.ä¸¢åœ¨å®¶é‡Œæ‰¾ä¸åˆ°è¿˜å¥½è¯´ï¼Œä¸‡ä¸€ä¸¢åœ¨å¤–é¢ï¼Œé‚£ä½ æ‹…å¿ƒçš„åº”è¯¥ä¸æ˜¯ä½ æœ‰å¾ˆå¤šç½‘ç«™ç™»å½•ä¸ä¸Šäº†ï¼Œè€Œæ˜¯ä½ çš„å¯†ç å¾ˆå¯èƒ½è¢«åˆ«äººçŸ¥é“äº†ï¼›è¿˜æœ‰äººå–œæ¬¢æŠŠå¯†ç è®°å½•åœ¨ç”µè„‘çš„æœ¬åœ°è®°äº‹æœ¬ï¼Œæˆ–è€…æ‰‹æœºçš„è®°äº‹æœ¬é‡Œé¢ï¼Œä½†æ˜¯è¿™åªå­˜åœ¨äºä½ ç”µè„‘æœ¬åœ°æˆ–è€…æ‰‹æœºæœ¬åœ°ï¼Œä¸‡ä¸€ç”µè„‘é‡è£…ç³»ç»Ÿï¼Œæˆ–è€…æ¢æ‰‹æœºâ€¦â€¦åˆæ˜¯ä¸ªéš¾é¢˜ï¼Œæ­¤æ—¶æ­¤åˆ»èªæ˜çš„ä½ å¯èƒ½ä¼šæƒ³ï¼Œé‚£æˆ‘æŠŠå¯†ç æ”¾åœ¨äº‘ç¬”è®°é‡Œé¢ï¼Œæˆ‘æŠŠè¿™ä¸ªç¬”è®°åœ¨åŠ ä¸ªæ‰“å¼€å¯†ç ï¼Œé‚£ä¸å°±å¥½äº†å—ï¼Ÿæ²¡é”™ï¼Œæˆ‘åœ¨è®¤è¯†KeePassä¹‹å‰ï¼Œæˆ‘å°±æ˜¯è¿™ä¹ˆåšçš„ï¼Œä½†æ˜¯ä½ æ”¾åœ¨äº‘ç¬”è®°é‡Œé¢ï¼Œåœ¨åŠ ä¸ªç¬”è®°çš„å¼€å¯å¯†ç ï¼Œè¿™ç§æƒ…å†µï¼Œä½ çš„å¯†ç å°±ä¾èµ–äº†äº‘ç¬”è®°æœåŠ¡å•†çš„æœåŠ¡å™¨ï¼Œè€Œä¸”ä½ æŠŠå¯†ç éƒ½æ”¾åˆ°äººå®¶çš„æœåŠ¡å™¨ä¸Šï¼Œä½ è§‰å¾—è¿™æ˜¯å®‰å…¨çš„å—ï¼Ÿéš¾é“ä½ çœŸçš„è®¤ä¸ºä½ åŠ äº†ä¸€ä¸ªå¼€å¯å¯†ç ï¼Œå°±æ²¡æœ‰äººèƒ½çœ‹åˆ°äº†å—ï¼Ÿä½ çš„å¼€å¯å¯†ç çš„åŠ å¯†ç®—æ³•å¯éƒ½æ˜¯äººå®¶äº‘ç¬”è®°è¿è¥å•†ç»™ä½ æä¾›çš„â€¦.. â€‹ ç°åœ¨æˆ‘å°±æ¥ç»™å¤§å®¶éš†é‡ä»‹ç»ä¸€ä¸‹ä»Šå¤©çš„ä¸»è§’ï¼ŒKeePassï¼Œå¹¶è¯¦ç»†è¯´æ˜å®ƒæ˜¯å¦‚ä½•è§£å†³æˆ‘ä»¬ä¸Šè¿°çš„è¿™äº›é—®é¢˜çš„ã€‚ç›®å‰ä¸»æµçš„å¯†ç ç®¡ç†å·¥å…·ä¸»è¦æœ‰ï¼šKeePassï¼ˆå…è´¹ å¼€æº å…¼å®¹æ€§å¼ºï¼‰ï¼ŒLastPassï¼ˆæœ€å¤§çš„ä¼˜åŠ¿æ˜¯è·¨æµè§ˆå™¨å¹³å°ï¼Œæ”¶è´¹ï¼‰ï¼Œ1Passwordï¼ˆè·¨å¹³å°ç®¡ç† ç”¨æˆ·è®¤å¯åº¦é«˜ï¼‰ï¼ŒEnpassï¼ˆæ”¯æŒå¹³å°å¤š 20æ¡å¯†ç å…è´¹ï¼‰ã€‚å¯ä»¥çœ‹å‡ºï¼Œé™¤äº†KeePassï¼Œå…¶ä»–éƒ½æ˜¯æ”¶è´¹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¯«æ— æ‚¬å¿µçš„é€‰æ‹©äº†å®ƒï¼ŒKeePassä»2003å¹´è‡³ä»Šå…·æœ‰è¿‘20å¹´çš„æ—¶é—´ï¼Œè€Œä¸”å¼€æºå…è´¹ï¼Œå¼€æºçš„å¥½å¤„å°±æ˜¯æ°‘é—´å¤§ç¥éƒ½å¯ä»¥çœ‹ä»–çš„æºä»£ç ï¼Œåªè¦å‘ç°å®‰å…¨æ¼æ´å°±å¯ä»¥å»æäº¤è¯„è®ºåšä¿®å¤ï¼Œæ‰€ä»¥å®‰å…¨çº§åˆ«æ˜¯å¯ä»¥æ”¾å¿ƒçš„ï¼Œå¦‚æœä½ æ‹…å¿ƒæœ‰å®‰å…¨é—®é¢˜æƒ³é˜…è¯»æºç ä¹Ÿå¯ä»¥å»å®˜æ–¹æŸ¥çœ‹ã€‚ æ¥ä¸‹æ¥å°±è®©æˆ‘ä»‹ç»ä¸€ä¸‹å¦‚ä½•ç”¨KeePassæ­å»ºä¸€ä¸ªå¯ä»¥å®ç°äº‘åŒæ­¥çš„å¯†ç ç®¡ç†å·¥å…·å§ã€‚ KeePassä¸‹è½½åŠä½¿ç”¨Keepaä»‹ç»â€‹ KeePassä¸ä¼šä¸Šä¼ ä½ çš„è´¦å·å¯†ç ï¼Œä½ çš„è´¦å·å¯†ç ä¿å­˜åœ¨ä½ æœ¬åœ°(æ•°æ®åº“)ï¼Œä½ åªéœ€è¦åˆ›å»ºä¸€ä¸ªå¼€å¯è¿™ä¸ªæ•°æ®åº“çš„é’¥åŒ™ï¼Œè¿™ä¸ªé’¥åŒ™éå¸¸é‡è¦ï¼Œå®ƒæ˜¯ä½ èƒ½å¦æ‰“å¼€è½¯ä»¶çš„å…³é”®ï¼Œè¿™ä¸ªé’¥åŒ™å¯ä»¥æ˜¯ä¸€ä¸²å¯†ç ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶å¯ä»¥æ˜¯ä»»ä½•æ–‡ä»¶ï¼Œä¸€éƒ¨ç”µå½±ï¼Œä¸€ä¸ªwordæ–‡æ¡£ï¼Œä¸€ä¸ªtxtæ–‡æœ¬ï¼Œä¸€é¦–æ­Œç­‰ï¼Œéƒ½å¯ä»¥å½“åšå¼€å¯æ•°æ®åº“çš„å¯†é’¥æ–‡ä»¶ï¼Œæˆ–è€…æ˜¯å¯†ç åŠ æ–‡ä»¶çš„ç»„åˆçš„æ–¹å¼æ¥è®¾ç½®ä½ çš„å¼€å¯é’¥åŒ™ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå®ä½“å¯†é’¥(ç±»ä¼¼äºUç›¾)ï¼Œæœ¬äººæ¨èä½¿ç”¨å¯†ç åŠ æ–‡ä»¶çš„æ–¹å¼ä½œä¸ºæ•°æ®åº“çš„å¼€å¯é’¥åŒ™ï¼Œè¿™æ ·ï¼Œå¼€å¯å¯†ç æˆ‘ä»¬å°±ä¸ç”¨è®¾ç½®çš„å¤ªå¤æ‚ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒå¼€å¯å¯†ç æ³„éœ²å¯¼è‡´æˆ‘ä»¬çš„æ•°æ®åº“æ–‡ä»¶è¢«åˆ«äººæ‹¿åˆ°ä¹‹åè¢«åˆ«äººæ‰“å¼€ï¼Œåˆ«äººèƒ½åŒæ—¶æ‹¿åˆ°å¯†ç å’Œæ–‡ä»¶ç®€ç›´å¤ªéš¾äº†ã€‚ PCç«¯å®¢æˆ·ç«¯KeePassXCâ€‹ KeePasså®˜ç½‘ï¼Œæä¾›äº†KeePassè½¯ä»¶çš„ä¸‹è½½ï¼Œå®˜æ–¹åªæä¾›äº†PCç«¯ä¸‹è½½ï¼Œä¸è¿‡è¿˜å¥½ï¼Œå¾ˆå¤šæ°‘é—´å¤§ç¥ä¹Ÿåšäº†å¾ˆå¤šæ”¯æŒKeePassçš„å®¢æˆ·ç«¯ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œå®˜æ–¹ä¹Ÿæœ‰æ¨èåˆ—è¡¨ã€‚ç”µè„‘ç«¯ï¼ˆwindowså’ŒMacå¹³å°ï¼‰ï¼Œæˆ‘æ¨èä½¿ç”¨KeePassXCï¼Œè¿™ä¹Ÿæ˜¯æ”¯æŒKeePassçš„ç”±éå®˜æ–¹å¼€å‘çš„ä¸€æ¬¾è½¯ä»¶ï¼ŒKeePasså®˜æ–¹æ¨èåˆ—è¡¨é‡Œé¢æœ‰ï¼Œä¹‹æ‰€ä»¥æ¨èå®ƒï¼Œæ˜¯å› ä¸ºä»–ç•Œé¢ç¾è§‚ï¼Œè¿˜æœ‰å¯¹åº”çš„æµè§ˆå™¨æ’ä»¶ï¼Œå¯ä»¥å®ç°å¯†ç è‡ªåŠ¨å¡«å……ã€‚å®‰å“ç«¯æˆ‘æ¨èä½¿ç”¨KeePass2Androidï¼Œè¿™æ¬¾è½¯ä»¶ä¸‹è½½éœ€è¦ä¸Šè°·æ­Œå•†åº—ï¼Œå¯èƒ½å¾—éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼Œè¿™é‡Œæˆ‘ç»™å¤§å®¶æä¾›äº†è“å¥äº‘ä¸‹è½½ï¼Œæ–¹ä¾¿å¤§å®¶ä¸‹è½½å®‰è£…ï¼Œç”±äºæœ¬äººæ²¡æœ‰è‹¹æœæ‰‹æœºï¼Œæ‰€ä»¥IPhoneç”¨æˆ·å°±éœ€è¦å°ä¼™ä¼´è‡ªå·±å»å®˜æ–¹æ¨èçš„è½¯ä»¶é‡Œé¢å¯»æ‰¾é€‚åˆè‹¹æœæ‰‹æœºçš„å®¢æˆ·ç«¯äº†(#^.^#)~ KeePassXCä½¿ç”¨ä»‹ç»ä¸‹å›¾ä¸ºæˆ‘çš„KeePassçš„å®¢æˆ·ç«¯å®‰è£…é…ç½®ä¹‹åçš„æ•ˆæœï¼Œæ€ä¹ˆæ ·ï¼Œè¿˜ä¸é”™å§~ ä¸‹è½½å®‰è£…KeePassä¹‹åï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸‹æˆ‘ä»¬æ•°æ®åº“å­˜æ”¾çš„æœ¬åœ°ä½ç½®ï¼Œç„¶åè®¾ç½®æ•°æ®åº“å¼€å¯å¯†ç ï¼Œå¼€å¯å¯†é’¥æ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘æ¨èæ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåç¼€åéšæ„ï¼Œç„¶åç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œåœ¨é‡Œé¢è¾“å…¥ä¸€äº›æ–‡ç« ï¼Œä¾‹å¦‚ä½ å–œæ¬¢çš„è¯—è¯ä¹‹ç±»çš„ï¼Œå­—ä¹¦ä¸è¦å¤ªå¤šï¼Œå°½é‡æ§åˆ¶åœ¨1åƒå­—ä»¥å†…å°±è¡Œï¼Œé¿å…æ–‡ä»¶è¿‡å¤§ï¼Œç„¶åå§è¿™ä¸ªå¯†é’¥æ–‡ä»¶å¥½å¥½ä¿å­˜èµ·æ¥ï¼Œæˆ‘å»ºè®®ç”¨ä½ å¸¸ç”¨çš„é‚®ç®±ç»™è‡ªå·±å‘ä¸ªé‚®ä»¶ç„¶åä»¥é™„ä»¶çš„æ–¹å¼ä¿å­˜åœ¨ä½ çš„é‚®ä»¶é‡Œé¢ï¼Œè¿™æ ·ä»–å°±æ°¸è¿œä¸ä¼šä¸¢äº†ï¼Œæˆ–è€…æ”¾åˆ°ä½ çš„äº‘ç›˜ï¼ŒNASä¸Šé¢ï¼Œä¸è¦æŠŠå®ƒå’Œæ•°æ®åº“æ”¾åœ¨ä¸€èµ·ï¼ï¼ï¼å¦‚æœæ˜¯Macæœ¬æ”¯æŒæŒ‡çº¹è¯†åˆ«ï¼Œè¾“å…¥ä¸€æ¬¡å¯†ç å’Œå¯†é’¥æ–‡ä»¶ä¹‹åï¼Œä¸‹æ¬¡å°±å¯ä»¥é€šè¿‡æŒ‡çº¹æ‰“å¼€ä½ çš„æ•°æ®åº“äº†ï¼Œä½†æ˜¯è¿™ä¸ä»£è¡¨ä½ çš„å¯†ç å’Œå¯†é’¥æ–‡ä»¶å°±æ²¡ç”¨äº†ï¼ŒæŒ‡çº¹æ‰“å¼€æ•°æ®åº“çš„åŸç†å…¶å®å°±æ˜¯é€šè¿‡æŒ‡çº¹æ˜ å°„åˆ°ä½ çš„å¯†ç å’Œå¯†é’¥æ–‡ä»¶ï¼Œæ‰€ä»¥è¯´ï¼Œæ•°æ®åº“å¼€å¯å¯†ç å’Œå¯†é’¥æ–‡ä»¶å¾ˆé‡è¦ï¼Œè¿™ä¸ªä¸€å®šä¸èƒ½ä¸¢~ è¿›å…¥ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ·»åŠ åˆ†ç±»ï¼Œç„¶åæ·»åŠ è´¦å·å¯†ç ç­‰ç­‰ï¼Œå…·ä½“çš„ä½¿ç”¨æ–¹æ³•æˆ‘ä¼šå‡ºè§†é¢‘è®²è§£ï¼Œæ¬¢è¿æœ‹å‹æ¥Bç«™å…³æ³¨æˆ‘ã€‚ æµè§ˆå™¨æ’ä»¶ä½¿ç”¨(è°·æ­Œä¸ºä¾‹)æœ¬åœ°è½¯ä»¶å¼€å¯ç›¸åº”åŠŸèƒ½â€‹ åœ¨KeePassXCæ‰“å¼€è®¾ç½®-æµè§ˆå™¨é›†æˆ-å¯ç”¨æµè§ˆå™¨é›†æˆ-ç„¶åä¸ºä½ ç”¨çš„æµè§ˆå™¨å¼€å¯é›†æˆï¼ˆè§ä¸‹å›¾ï¼‰ï¼Œè¿™é‡Œå¢™è£‚å»ºè®®ä½¿ç”¨è°·æ­Œæµè§ˆå™¨ï¼Œè¿™æ˜¯æµè§ˆå™¨ä¸­çš„ç¥ã€‚å½“ç„¶ï¼Œæƒ³æˆä¸ºç¥ï¼Œéœ€è¦ç§‘å­¦ä¸Šç½‘å®‰è£…å¿…è¦çš„æ’ä»¶æ‰èƒ½å¤Ÿç»™è°·æ­Œæµè§ˆå™¨æ³¨å…¥ç¥ä¹‹çµé­‚ï¼Œä¸è¦ä¸‹è½½ä¸‹æ¥ä¹‹åè¿ä¸ªæ’ä»¶éƒ½æ²¡è£…å°±è¯´æµè§ˆå™¨ä¸è¡Œï¼Œè¡Œä¸è¡Œå¾—çœ‹ç”¨çš„äººä¼šä¸ä¼šç”¨ã€‚æ€»ä¹‹ï¼Œç§‘æŠ€å†œæ°‘å·¥é‡Œé¢åº”è¯¥æ²¡æœ‰å‡ ä¸ªäººä¸ç”¨è°·æ­Œå§~ æµè§ˆå™¨æ’ä»¶ä¸‹è½½ä½¿ç”¨â€‹ æ‰“å¼€è°·æ­Œåº”ç”¨å•†åº—ï¼ˆæ³¨ï¼šè¿™é‡Œå¯èƒ½éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼‰ï¼Œæ‰¾åˆ°KeePassXCè¿™ä¸ªæ’ä»¶ï¼Œå®‰è£…ä¹‹â€¦. å®‰è£…ä¹‹åç”¨æµè§ˆå™¨æ’ä»¶é“¾æ¥æœ¬åœ°KeePassXCè½¯ä»¶ï¼Œé“¾æ¥ä¹‹åï¼Œå°±å¯ä»¥å®ç°ç½‘ç«™è´¦å·å¯†ç è‡ªåŠ¨å¡«å……äº†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè‡ªåŠ¨å¡«å……çš„æ—¶å€™ï¼Œä¸€å®šè¦æ˜¯ä½ æœ¬åœ°æ•°æ®åº“æ‰“å¼€çš„æƒ…å†µä¸‹ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å§æµè§ˆå™¨çš„è®°ä½å¯†ç åŠŸèƒ½å…³é—­äº†ï¼Œä¸è¿‡è¿™ä¸ªè‡ªåŠ¨å¡«å……åŠŸèƒ½å¹¶ä¸ä¸€å®šæ‰€æœ‰ç½‘ç«™éƒ½å¯ä»¥ï¼Œå¤§æ¦‚ç™¾åˆ†ä¹‹80çš„ç½‘ç«™éƒ½æ²¡é—®é¢˜ï¼Œè¿˜æœ‰å°±æ˜¯æƒ³è¦èƒ½å…³è”åˆ°å¡«å……é¡¹ç›®ï¼Œéœ€è¦ä½ åœ¨ä½ æ·»åŠ å¯†ç çš„æ—¶å€™ï¼ŒæŠŠå¯¹åº”çš„URLå¡«å†™æˆä¸ºç½‘ç«™çš„ç™»å½•åœ°å€æˆ–è€…ç½‘ç«™çš„å®˜ç½‘ã€‚ å®ç°æ•°æ®åº“äº‘åŒæ­¥æˆ‘ä»¬çš„æ•°æ®åº“åªå­˜åœ¨äºæˆ‘ä»¬æœ¬åœ°è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œè¿™è·Ÿæˆ‘ç›´æ¥åœ¨æœ¬åœ°æä¸€ä¸ªè®°äº‹æœ¬ä¿å­˜å¯†ç ä¹Ÿå·®ä¸äº†å¤šå°‘ï¼Œé‡è£…ç³»ç»Ÿä¹‹åï¼Œæ•°æ®åº“ä¸¢äº†ï¼Œå°±ç›´æ¥å›åˆ°è§£æ”¾å‰äº†ï¼Œè¿™é‡Œæˆ‘å»ºè®®ä½¿ç”¨ä¸¤ç§å·¥å…·å®ç°æ•°æ®åº“äº‘åŒæ­¥åŠŸèƒ½ï¼Œç¬¬ä¸€æ¬¾æ˜¯å¾®è½¯å‡ºå“çš„OneDriveï¼Œè¿™æ¬¾äº‘ç›˜å¯ä»¥å®ç°äº‘ç›˜æ˜ å°„åˆ°æœ¬åœ°æŒ‡å®šè·¯å¾„ï¼Œè·¯å¾„ä¸­çš„æ–‡ä»¶å‘ç”Ÿæ”¹å˜ï¼Œä¼šè‡ªåŠ¨åŒæ­¥åˆ°äº‘ç«¯ï¼Œè¿™æ ·æˆ‘ä»¬æ·»åŠ æˆ–è€…ä¿®æ”¹äº†è´¦å·å¯†ç ä¹‹åï¼Œæ•°æ®åº“éƒ½ä¼šè‡ªåŠ¨åŒæ­¥åˆ°å¾®è½¯çš„OneDriveäº‘ç›˜ï¼Œè¿™æ ·æˆ‘ä»¬å°±å®ç°äº†ç”µè„‘ç«¯çš„æ•°æ®åº“äº‘åŒæ­¥ï¼Œæ‰‹æœºç«¯Keepass2Androidï¼Œä¹Ÿæ˜¯æ”¯æŒè¯»å–OneDriveäº‘ç›˜æ–‡ä»¶çš„åŠŸèƒ½çš„ï¼›ç¬¬äºŒæ¬¾åŒæ­¥å·¥å…·æ˜¯åšæœäº‘ï¼ŒåŸç†å’ŒOneDriveä¸€æ ·ï¼Œä¸è¿‡åšæœäº‘è¦å®ç°æ‰‹æœºåŒæ­¥ï¼Œéœ€è¦é€šè¿‡WebDavåŠŸèƒ½å®ç°ï¼Œåšæœäº‘æ˜¯æ”¯æŒäº‘æ–‡ä»¶è®¾ç½®æˆä¸ºWebDavæœåŠ¡çš„ï¼Œè€Œä¸”åšæœäº‘å·ç§°æ˜¯å›½å†…æœ€å®‰å…¨çš„äº‘ç›˜ï¼Œå†›å·¥çº§çš„åŠ å¯†æ–¹æ¡ˆï¼Œä½ çš„æ•°æ®åº“æ”¾åœ¨åšæœäº‘æ˜¯å®‰å…¨çš„ï¼Œå°±ç®—æœ‰äººèƒ½æ‹¿åˆ°ä½ çš„æ•°æ®åº“ï¼Œæ²¡æœ‰å¯†ç å’Œå¯†é’¥æ–‡ä»¶ï¼Œä¹Ÿæ˜¯æ‰“ä¸å¼€çš„â€¦ å°¾å£°â€‹ æ— è®ºä½¿ç”¨å“ªç§åŒæ­¥æ–¹æ¡ˆï¼Œè¿™ç§åŒæ­¥çš„æ€è·¯æ˜ç™½äº†ï¼Œä¹Ÿå¯ä»¥è¯•è¯•å…¶ä»–çš„KeePass çš„å®¢æˆ·ç«¯è½¯ä»¶ï¼Œæ–‡ç« ä¸­ä»‹ç»çš„éƒ½æ˜¯æœ¬äººè®¤ä¸ºæœ€å¥½çš„æ–¹æ¡ˆï¼Œä¹Ÿæ˜¯çˆ±æŠ˜è…¾çš„æˆ‘åœ¨å·¥ä½œä¹‹ä½™è‚äº†å¥½å‡ ä¸ªæ™šä¸Šå®šä¸‹çš„æœ€ç»ˆæ–¹æ¡ˆï¼Œä¹Ÿè¯·å¤§å®¶å¤šå¤šå…³æ³¨æˆ‘çš„ä¸ªäººåšå®¢å’ŒBç«™ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥åŠ æˆ‘QQæˆ–è€…Bç«™ç•™è¨€ç§ä¿¡ç»™æˆ‘â€¦è°¢è°¢å¤§å®¶ï¼","categories":[{"name":"è½¯ä»¶åˆ†äº«","slug":"è½¯ä»¶åˆ†äº«","permalink":"https://zhangyong3214.github.io/categories/%E8%BD%AF%E4%BB%B6%E5%88%86%E4%BA%AB/"}],"tags":[{"name":"è½¯ä»¶å·¥å…·","slug":"è½¯ä»¶å·¥å…·","permalink":"https://zhangyong3214.github.io/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/"}]},{"title":"IDEAå¸¸ç”¨å¿«æ·é”®(Macç‰ˆ)","slug":"è½¯ä»¶å·¥å…·/IDEAå¸¸ç”¨å¿«æ·é”®","date":"2022-04-05T09:32:31.591Z","updated":"2022-04-05T09:32:31.591Z","comments":true,"path":"2022/04/05/è½¯ä»¶å·¥å…·/IDEAå¸¸ç”¨å¿«æ·é”®/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/05/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/IDEA%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/","excerpt":"","text":"Macé”®ç›˜ç¬¦å·å’Œä¿®é¥°é”®è¯´æ˜ âŒ˜ Command â‡§ Shift âŒ¥ Option âŒƒ Control â†©ï¸ Return/Enter âŒ« Delete âŒ¦ å‘å‰åˆ é™¤é”®ï¼ˆFn+Deleteï¼‰ â†‘ ä¸Šç®­å¤´ â†“ ä¸‹ç®­å¤´ â† å·¦ç®­å¤´ â†’ å³ç®­å¤´ â‡ Page Upï¼ˆFn+â†‘ï¼‰ â‡Ÿ Page Downï¼ˆFn+â†“ï¼‰ Home Fn + â† End Fn + â†’ â‡¥ å³åˆ¶è¡¨ç¬¦ï¼ˆTabé”®ï¼‰ â‡¤ å·¦åˆ¶è¡¨ç¬¦ï¼ˆShift+Tabï¼‰ â‹ Escape (Esc) Editingï¼ˆç¼–è¾‘ï¼‰ âŒƒSpace åŸºæœ¬çš„ä»£ç è¡¥å…¨ï¼ˆè¡¥å…¨ä»»ä½•ç±»ã€æ–¹æ³•ã€å˜é‡ï¼‰ âŒƒâ‡§Space æ™ºèƒ½ä»£ç è¡¥å…¨ï¼ˆè¿‡æ»¤å™¨æ–¹æ³•åˆ—è¡¨å’Œå˜é‡çš„é¢„æœŸç±»å‹ï¼‰ âŒ˜â‡§â†© è‡ªåŠ¨ç»“æŸä»£ç ï¼Œè¡Œæœ«è‡ªåŠ¨æ·»åŠ åˆ†å· âŒ˜P æ˜¾ç¤ºæ–¹æ³•çš„å‚æ•°ä¿¡æ¯ âŒƒJ, Mid. button click å¿«é€ŸæŸ¥çœ‹æ–‡æ¡£ â‡§F1 æŸ¥çœ‹å¤–éƒ¨æ–‡æ¡£ï¼ˆåœ¨æŸäº›ä»£ç ä¸Šä¼šè§¦å‘æ‰“å¼€æµè§ˆå™¨æ˜¾ç¤ºç›¸å…³æ–‡æ¡£ï¼‰ âŒ˜+é¼ æ ‡æ”¾åœ¨ä»£ç ä¸Š æ˜¾ç¤ºä»£ç ç®€è¦ä¿¡æ¯ âŒ˜F1 åœ¨é”™è¯¯æˆ–è­¦å‘Šå¤„æ˜¾ç¤ºå…·ä½“æè¿°ä¿¡æ¯ âŒ˜N, âŒƒâ†©, âŒƒN ç”Ÿæˆä»£ç ï¼ˆgetterã€setterã€æ„é€ å‡½æ•°ã€hashCode/equals,toStringï¼‰ âŒƒO è¦†ç›–æ–¹æ³•ï¼ˆé‡å†™çˆ¶ç±»æ–¹æ³•ï¼‰ âŒƒI å®ç°æ–¹æ³•ï¼ˆå®ç°æ¥å£ä¸­çš„æ–¹æ³•ï¼‰ âŒ˜âŒ¥T åŒ…å›´ä»£ç ï¼ˆä½¿ç”¨if..else, try..catch, for, synchronizedç­‰åŒ…å›´ é€‰ä¸­çš„ä»£ç ï¼‰ âŒ˜/ æ³¨é‡Š/å–æ¶ˆæ³¨é‡Šä¸è¡Œæ³¨é‡Š âŒ˜âŒ¥/ æ³¨é‡Š/å–æ¶ˆæ³¨é‡Šä¸å—æ³¨é‡Š âŒ¥â†‘ è¿ç»­é€‰ä¸­ä»£ç å—fa âŒ¥â†“ å‡å°‘å½“å‰é€‰ä¸­çš„ä»£ç å— âŒƒâ‡§Q æ˜¾ç¤ºä¸Šä¸‹æ–‡ä¿¡æ¯ âŒ¥â†© æ˜¾ç¤ºæ„å‘åŠ¨ä½œå’Œå¿«é€Ÿä¿®å¤ä»£ç  âŒ˜âŒ¥L æ ¼å¼åŒ–ä»£ç  âŒƒâŒ¥O ä¼˜åŒ–import âŒƒâŒ¥I è‡ªåŠ¨ç¼©è¿›çº¿ â‡¥ / â‡§â‡¥ ç¼©è¿›ä»£ç  / åç¼©è¿›ä»£ç  âŒ˜X å‰ªåˆ‡å½“å‰è¡Œæˆ–é€‰å®šçš„å—åˆ°å‰ªè´´æ¿ âŒ˜C å¤åˆ¶å½“å‰è¡Œæˆ–é€‰å®šçš„å—åˆ°å‰ªè´´æ¿ âŒ˜V ä»å‰ªè´´æ¿ç²˜è´´ âŒ˜â‡§V ä»æœ€è¿‘çš„ç¼“å†²åŒºç²˜è´´ âŒ˜D å¤åˆ¶å½“å‰è¡Œæˆ–é€‰å®šçš„å— âŒ˜âŒ« åˆ é™¤å½“å‰è¡Œæˆ–é€‰å®šçš„å—çš„è¡Œ âŒƒâ‡§J æ™ºèƒ½çš„å°†ä»£ç æ‹¼æ¥æˆä¸€è¡Œ âŒ˜â†© æ™ºèƒ½çš„æ‹†åˆ†æ‹¼æ¥çš„è¡Œ â‡§â†© å¼€å§‹æ–°çš„ä¸€è¡Œ âŒ˜â‡§U å¤§å°å†™åˆ‡æ¢ âŒ˜â‡§] / âŒ˜â‡§[ é€‰æ‹©ç›´åˆ°ä»£ç å—ç»“æŸ/å¼€å§‹ âŒ¥âŒ¦ åˆ é™¤åˆ°å•è¯çš„æœ«å°¾ï¼ˆâŒ¦é”®ä¸ºFn+Deleteï¼‰ âŒ¥âŒ« åˆ é™¤åˆ°å•è¯çš„å¼€å¤´ âŒ˜+ / âŒ˜- å±•å¼€ / æŠ˜å ä»£ç å— âŒ˜â‡§+ å±•å¼€æ‰€ä»¥ä»£ç å— âŒ˜â‡§- æŠ˜å æ‰€æœ‰ä»£ç å— âŒ˜W å…³é—­æ´»åŠ¨çš„ç¼–è¾‘å™¨é€‰é¡¹å¡ Search/Replaceï¼ˆæŸ¥è¯¢/æ›¿æ¢ï¼‰ Double â‡§ æŸ¥è¯¢ä»»ä½•ä¸œè¥¿ âŒ˜F æ–‡ä»¶å†…æŸ¥æ‰¾ âŒ˜G æŸ¥æ‰¾æ¨¡å¼ä¸‹ï¼Œå‘ä¸‹æŸ¥æ‰¾ âŒ˜â‡§G æŸ¥æ‰¾æ¨¡å¼ä¸‹ï¼Œå‘ä¸ŠæŸ¥æ‰¾ âŒ˜R æ–‡ä»¶å†…æ›¿æ¢ âŒ˜â‡§F å…¨å±€æŸ¥æ‰¾ï¼ˆæ ¹æ®è·¯å¾„ï¼‰ âŒ˜â‡§R å…¨å±€æ›¿æ¢ï¼ˆæ ¹æ®è·¯å¾„ï¼‰ âŒ˜â‡§S æŸ¥è¯¢ç»“æ„ï¼ˆUltimate Edition ç‰ˆä¸“ç”¨ï¼Œéœ€è¦åœ¨Keymapä¸­è®¾ç½®ï¼‰ âŒ˜â‡§M æ›¿æ¢ç»“æ„ï¼ˆUltimate Edition ç‰ˆä¸“ç”¨ï¼Œéœ€è¦åœ¨Keymapä¸­è®¾ç½®ï¼‰ Usage Searchï¼ˆä½¿ç”¨æŸ¥è¯¢ï¼‰ âŒ¥F7 / âŒ˜F7 åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾ç”¨æ³• / åœ¨ç±»ä¸­æŸ¥æ‰¾ç”¨æ³• âŒ˜â‡§F7 åœ¨æ–‡ä»¶ä¸­çªå‡ºæ˜¾ç¤ºçš„ç”¨æ³• âŒ˜âŒ¥F7 æ˜¾ç¤ºç”¨æ³• Compile and Runï¼ˆç¼–è¯‘å’Œè¿è¡Œï¼‰ âŒ˜F9 ç¼–è¯‘Project âŒ˜â‡§F9 ç¼–è¯‘é€‰æ‹©çš„æ–‡ä»¶ã€åŒ…æˆ–æ¨¡å— âŒƒâŒ¥R å¼¹å‡º Run çš„å¯é€‰æ‹©èœå• âŒƒâŒ¥D å¼¹å‡º Debug çš„å¯é€‰æ‹©èœå• âŒƒR è¿è¡Œ âŒƒD è°ƒè¯• âŒƒâ‡§R, âŒƒâ‡§D ä»ç¼–è¾‘å™¨è¿è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒé…ç½® Debuggingï¼ˆè°ƒè¯•ï¼‰ F8 è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œå¦‚æœå½“å‰è¡Œæ–­ç‚¹æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œåˆ™ä¸è¿›å…¥å½“å‰æ–¹æ³•ä½“å†… F7 è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œå¦‚æœå½“å‰è¡Œæ–­ç‚¹æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œåˆ™è¿›å…¥å½“å‰æ–¹æ³•ä½“å†…ï¼Œå¦‚æœè¯¥ æ–¹æ³•ä½“è¿˜æœ‰æ–¹æ³•ï¼Œåˆ™ä¸ä¼šè¿›å…¥è¯¥å†…åµŒçš„æ–¹æ³•ä¸­ â‡§F7 æ™ºèƒ½æ­¥å…¥ï¼Œæ–­ç‚¹æ‰€åœ¨è¡Œä¸Šæœ‰å¤šä¸ªæ–¹æ³•è°ƒç”¨ï¼Œä¼šå¼¹å‡ºè¿›å…¥å“ªä¸ªæ–¹æ³• â‡§F8 è·³å‡º âŒ¥F9 è¿è¡Œåˆ°å…‰æ ‡å¤„ï¼Œå¦‚æœå…‰æ ‡å‰æœ‰å…¶ä»–æ–­ç‚¹ä¼šè¿›å…¥åˆ°è¯¥æ–­ç‚¹ âŒ¥F8 è®¡ç®—è¡¨è¾¾å¼ï¼ˆå¯ä»¥æ›´æ”¹å˜é‡å€¼ä½¿å…¶ç”Ÿæ•ˆï¼‰ âŒ˜âŒ¥R æ¢å¤ç¨‹åºè¿è¡Œï¼Œå¦‚æœè¯¥æ–­ç‚¹ä¸‹é¢ä»£ç è¿˜æœ‰æ–­ç‚¹åˆ™åœåœ¨ä¸‹ä¸€ä¸ªæ–­ç‚¹ä¸Š âŒ˜F8 åˆ‡æ¢æ–­ç‚¹ï¼ˆè‹¥å…‰æ ‡å½“å‰è¡Œæœ‰æ–­ç‚¹åˆ™å–æ¶ˆæ–­ç‚¹ï¼Œæ²¡æœ‰åˆ™åŠ ä¸Šæ–­ç‚¹ï¼‰ âŒ˜â‡§F8 æŸ¥çœ‹æ–­ç‚¹ä¿¡æ¯ Navigationï¼ˆå¯¼èˆªï¼‰ âŒ˜O æŸ¥æ‰¾ç±»æ–‡ä»¶ âŒ˜â‡§O æŸ¥æ‰¾æ‰€æœ‰ç±»å‹æ–‡ä»¶ã€æ‰“å¼€æ–‡ä»¶ã€æ‰“å¼€ç›®å½•ï¼Œæ‰“å¼€ç›®å½•éœ€è¦åœ¨è¾“å…¥çš„å†…å®¹å‰é¢æˆ–åé¢åŠ ä¸€ä¸ªåæ–œæ / âŒ˜âŒ¥O å‰å¾€æŒ‡å®šçš„å˜é‡ / æ–¹æ³• âŒƒâ† / âŒƒâ†’ å·¦å³åˆ‡æ¢æ‰“å¼€çš„ç¼–è¾‘tabé¡µ F12 è¿”å›åˆ°å‰ä¸€ä¸ªå·¥å…·çª—å£ â‹ ä»å·¥å…·çª—å£è¿›å…¥ä»£ç æ–‡ä»¶çª—å£ â‡§â‹ éšè—å½“å‰æˆ–æœ€åä¸€ä¸ªæ´»åŠ¨çš„çª—å£ï¼Œä¸”å…‰æ ‡è¿›å…¥ä»£ç æ–‡ä»¶çª—å£ âŒ˜â‡§F4 å…³é—­æ´»åŠ¨run/messages/find/â€¦ tab âŒ˜L åœ¨å½“å‰æ–‡ä»¶è·³è½¬åˆ°æŸä¸€è¡Œçš„æŒ‡å®šå¤„ âŒ˜E æ˜¾ç¤ºæœ€è¿‘æ‰“å¼€çš„æ–‡ä»¶è®°å½•åˆ—è¡¨ âŒ˜âŒ¥â† / âŒ˜âŒ¥â†’ é€€å› / å‰è¿›åˆ°ä¸Šä¸€ä¸ªæ“ä½œçš„åœ°æ–¹ âŒ˜â‡§âŒ« è·³è½¬åˆ°æœ€åä¸€ä¸ªç¼–è¾‘çš„åœ°æ–¹ âŒ¥F1 æ˜¾ç¤ºå½“å‰æ–‡ä»¶é€‰æ‹©ç›®æ ‡å¼¹å‡ºå±‚ï¼Œå¼¹å‡ºå±‚ä¸­æœ‰å¾ˆå¤šç›®æ ‡å¯ä»¥è¿›è¡Œé€‰æ‹©(å¦‚åœ¨ ä»£ç ç¼–è¾‘çª—å£å¯ä»¥é€‰æ‹©æ˜¾ç¤ºè¯¥æ–‡ä»¶çš„Finder) âŒ˜B / âŒ˜ é¼ æ ‡ç‚¹å‡» è¿›å…¥å…‰æ ‡æ‰€åœ¨çš„æ–¹æ³•/å˜é‡çš„æ¥å£æˆ–æ˜¯å®šä¹‰å¤„ âŒ˜âŒ¥B è·³è½¬åˆ°å®ç°å¤„ï¼Œåœ¨æŸä¸ªè°ƒç”¨çš„æ–¹æ³•åä¸Šä½¿ç”¨ä¼šè·³åˆ°å…·ä½“çš„å®ç°å¤„ï¼Œå¯ä»¥è·³è¿‡æ¥å£ âŒ¥ Space, âŒ˜Y å¿«é€Ÿæ‰“å¼€å…‰æ ‡æ‰€åœ¨æ–¹æ³•ã€ç±»çš„å®šä¹‰ âŒƒâ‡§B è·³è½¬åˆ°ç±»å‹å£°æ˜å¤„ âŒ˜U å‰å¾€å½“å‰å…‰æ ‡æ‰€åœ¨æ–¹æ³•çš„çˆ¶ç±»çš„æ–¹æ³• / æ¥å£å®šä¹‰ âŒƒâ†“ / âŒƒâ†‘ å½“å‰å…‰æ ‡è·³è½¬åˆ°å½“å‰æ–‡ä»¶çš„å‰ä¸€ä¸ª/åä¸€ä¸ªæ–¹æ³•åä½ç½® âŒ˜] / âŒ˜[ ç§»åŠ¨å…‰æ ‡åˆ°å½“å‰æ‰€åœ¨ä»£ç çš„èŠ±æ‹¬å·å¼€å§‹/ç»“æŸä½ç½® âŒ˜F12 å¼¹å‡ºå½“å‰æ–‡ä»¶ç»“æ„å±‚ï¼Œå¯ä»¥åœ¨å¼¹å‡ºçš„å±‚ä¸Šç›´æ¥è¾“å…¥è¿›è¡Œç­›é€‰ï¼ˆå¯ç”¨äºæœç´¢ç±»ä¸­çš„æ–¹æ³•ï¼‰ âŒƒH æ˜¾ç¤ºå½“å‰ç±»çš„å±‚æ¬¡ç»“æ„ âŒ˜â‡§H æ˜¾ç¤ºæ–¹æ³•å±‚æ¬¡ç»“æ„ âŒƒâŒ¥H æ˜¾ç¤ºè°ƒç”¨å±‚æ¬¡ç»“æ„ F2 / â‡§F2 è·³è½¬åˆ°ä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ªçªå‡ºé”™è¯¯æˆ–è­¦å‘Šçš„ä½ç½® F4 / âŒ˜â†“ ç¼–è¾‘/æŸ¥çœ‹ä»£ç æº âŒ¥ Home æ˜¾ç¤ºåˆ°å½“å‰æ–‡ä»¶çš„å¯¼èˆªæ¡ F3é€‰ä¸­æ–‡ä»¶/æ–‡ä»¶å¤¹/ä»£ç è¡Œï¼Œæ·»åŠ /å–æ¶ˆä¹¦ç­¾ âŒ¥F3 é€‰ä¸­æ–‡ä»¶/æ–‡ä»¶å¤¹/ä»£ç è¡Œï¼Œä½¿ç”¨åŠ©è®°ç¬¦æ·»åŠ /å–æ¶ˆä¹¦ç­¾ âŒƒ0â€¦âŒƒ9 å®šä½åˆ°å¯¹åº”æ•°å€¼çš„ä¹¦ç­¾ä½ç½® âŒ˜F3 æ˜¾ç¤ºæ‰€æœ‰ä¹¦ç­¾ Refactoringï¼ˆé‡æ„ï¼‰ F5 å¤åˆ¶æ–‡ä»¶åˆ°æŒ‡å®šç›®å½• F6 ç§»åŠ¨æ–‡ä»¶åˆ°æŒ‡å®šç›®å½• âŒ˜âŒ« åœ¨æ–‡ä»¶ä¸Šä¸ºå®‰å…¨åˆ é™¤æ–‡ä»¶ï¼Œå¼¹å‡ºç¡®è®¤æ¡† â‡§F6 é‡å‘½åæ–‡ä»¶ âŒ˜F6 æ›´æ”¹ç­¾å âŒ˜âŒ¥N ä¸€è‡´æ€§ âŒ˜âŒ¥M å°†é€‰ä¸­çš„ä»£ç æå–ä¸ºæ–¹æ³• âŒ˜âŒ¥V æå–å˜é‡ âŒ˜âŒ¥F æå–å­—æ®µ âŒ˜âŒ¥C æå–å¸¸é‡ âŒ˜âŒ¥P æå–å‚æ•° VCS/Local Historyï¼ˆç‰ˆæœ¬æ§åˆ¶/æœ¬åœ°å†å²è®°å½•ï¼‰ âŒ˜K æäº¤ä»£ç åˆ°ç‰ˆæœ¬æ§åˆ¶å™¨ âŒ˜T ä»ç‰ˆæœ¬æ§åˆ¶å™¨æ›´æ–°ä»£ç  âŒ¥â‡§C æŸ¥çœ‹æœ€è¿‘çš„å˜æ›´è®°å½• âŒƒC å¿«é€Ÿå¼¹å‡ºç‰ˆæœ¬æ§åˆ¶å™¨æ“ä½œé¢æ¿ Live Templatesï¼ˆåŠ¨æ€ä»£ç æ¨¡æ¿ï¼‰ âŒ˜âŒ¥J å¼¹å‡ºæ¨¡æ¿é€‰æ‹©çª—å£ï¼Œå°†é€‰å®šçš„ä»£ç ä½¿ç”¨åŠ¨æ€æ¨¡æ¿åŒ…ä½ âŒ˜J æ’å…¥è‡ªå®šä¹‰åŠ¨æ€ä»£ç æ¨¡æ¿ Generalï¼ˆé€šç”¨ï¼‰ âŒ˜1â€¦âŒ˜9 æ‰“å¼€ç›¸åº”ç¼–å·çš„å·¥å…·çª—å£ âŒ˜S ä¿å­˜æ‰€æœ‰ âŒ˜âŒ¥Y åŒæ­¥ã€åˆ·æ–° âŒƒâŒ˜F åˆ‡æ¢å…¨å±æ¨¡å¼ âŒ˜â‡§F12 åˆ‡æ¢æœ€å¤§åŒ–ç¼–è¾‘å™¨ âŒ¥â‡§F æ·»åŠ åˆ°æ”¶è—å¤¹ âŒ¥â‡§I æ£€æŸ¥å½“å‰æ–‡ä»¶ä¸å½“å‰çš„é…ç½®æ–‡ä»¶ `Â§âŒƒ, âŒƒ``å¿«é€Ÿåˆ‡æ¢å½“å‰çš„schemeï¼ˆåˆ‡æ¢ä¸»é¢˜ã€ä»£ç æ ·å¼ç­‰ï¼‰ âŒ˜, æ‰“å¼€IDEAç³»ç»Ÿè®¾ç½® âŒ˜; æ‰“å¼€é¡¹ç›®ç»“æ„å¯¹è¯æ¡† â‡§âŒ˜A æŸ¥æ‰¾åŠ¨ä½œï¼ˆå¯è®¾ç½®ç›¸å…³é€‰é¡¹ï¼‰ âŒƒâ‡¥ ç¼–è¾‘çª—å£æ ‡ç­¾å’Œå·¥å…·çª—å£ä¹‹é—´åˆ‡æ¢ï¼ˆå¦‚æœåœ¨åˆ‡æ¢çš„è¿‡ç¨‹åŠ æŒ‰ä¸Šdeleteï¼Œåˆ™æ˜¯å…³é—­å¯¹åº”é€‰ä¸­çš„çª—å£ï¼‰ Otherï¼ˆä¸€äº›å®˜æ–¹æ–‡æ¡£ä¸Šæ²¡æœ‰ä½“ç°çš„å¿«æ·é”®ï¼‰ âŒ˜â‡§8 ç«–ç¼–è¾‘æ¨¡å¼ å¯¼èˆª âŒ˜O æŸ¥æ‰¾ç±»æ–‡ä»¶ Ctrl + N âŒ˜âŒ¥O å‰å¾€æŒ‡å®šçš„å˜é‡ / æ–¹æ³• Ctrl + Shift + Alt + N âŒƒâ† / âŒƒâ†’ å·¦å³åˆ‡æ¢æ‰“å¼€çš„ç¼–è¾‘tabé¡µ Altâ† / Altâ†’ â‹ ä»å·¥å…·çª—å£è¿›å…¥ä»£ç æ–‡ä»¶çª—å£ ESC âŒ˜L åœ¨å½“å‰æ–‡ä»¶è·³è½¬åˆ°æŸä¸€è¡Œçš„æŒ‡å®šå¤„ Ctrl + G âŒ˜E æ˜¾ç¤ºæœ€è¿‘æ‰“å¼€çš„æ–‡ä»¶è®°å½•åˆ—è¡¨ Ctrl + E âŒ˜âŒ¥â† / âŒ˜âŒ¥â†’ é€€å› / å‰è¿›åˆ°ä¸Šä¸€ä¸ªæ“ä½œçš„åœ°æ–¹ Ctrl + Alt + â† Ctrl + Alt + â†’ âŒ˜â‡§âŒ« è·³è½¬åˆ°æœ€åä¸€ä¸ªç¼–è¾‘çš„åœ°æ–¹ âŒƒH æ˜¾ç¤ºå½“å‰ç±»çš„å±‚æ¬¡ç»“æ„ Ctrl + H âŒ˜â‡§H æ˜¾ç¤ºæ–¹æ³•å±‚æ¬¡ç»“æ„ âŒƒâŒ¥H æ˜¾ç¤ºè°ƒç”¨å±‚æ¬¡ç»“æ„ F4 / âŒ˜â†“ ç¼–è¾‘/æŸ¥çœ‹ä»£ç æº âŒ˜âŒ¥U æ˜¾ç¤ºç±»UMLå›¾ âŒƒJ æŸ¥çœ‹æ³¨é‡Š ç¼–è¾‘ âŒ¥âŒ¦ åˆ é™¤åˆ°å•è¯çš„æœ«å°¾ï¼ˆâŒ¦é”®ä¸ºFn+Deleteï¼‰ âŒ¥âŒ« åˆ é™¤åˆ°å•è¯çš„å¼€å¤´ âŒ˜+ / âŒ˜- å±•å¼€ / æŠ˜å ä»£ç å— âŒ˜F1 åœ¨é”™è¯¯æˆ–è­¦å‘Šå¤„æ˜¾ç¤ºå…·ä½“æè¿°ä¿¡æ¯ âŒ˜âŒ¥L æ ¼å¼åŒ–ä»£ç  âŒƒâŒ¥O ä¼˜åŒ–import â‡§â†© å¼€å§‹æ–°çš„ä¸€è¡Œ âŒ˜â‡§â†© è‡ªåŠ¨ç»“æŸä»£ç ï¼Œè¡Œæœ«è‡ªåŠ¨æ·»åŠ åˆ†å· âŒƒI å®ç°æ–¹æ³•ï¼ˆå®ç°æ¥å£ä¸­çš„æ–¹æ³•ï¼‰ â‡§F6 é‡å‘½åæ–‡ä»¶æˆ–è€…å˜é‡ âŒ˜N, âŒƒâ†©, âŒƒN ç”Ÿæˆä»£ç ï¼ˆgetterã€setterã€æ„é€ å‡½æ•°ã€hashCode/equals,toStringï¼‰ âŒ˜P æ˜¾ç¤ºæ–¹æ³•çš„å‚æ•°ä¿¡æ¯ æŸ¥æ‰¾ Doubleâ‡§ æŸ¥æ‰¾ä»»ä½•ä¸œè¥¿ âŒ˜â‡§F å…¨å±€æŸ¥æ‰¾ï¼ˆæ ¹æ®è·¯å¾„ï¼‰ âŒ˜F æ–‡ä»¶å†…æŸ¥æ‰¾ âŒ˜G æŸ¥æ‰¾æ¨¡å¼ä¸‹ï¼Œå‘ä¸‹æŸ¥æ‰¾ âŒ˜â‡§G æŸ¥æ‰¾æ¨¡å¼ä¸‹ï¼Œå‘ä¸ŠæŸ¥æ‰¾ âŒ˜âŒ¥B è·³è½¬åˆ°æ¥å£çš„å®ç° âŒ˜U æŸ¥çœ‹æ¥å£å®šä¹‰ âŒ˜âŒ¥â† / âŒ˜âŒ¥â†’ é€€å› / å‰è¿›åˆ°ä¸Šä¸€ä¸ªæ“ä½œçš„åœ°æ–¹ âŒ˜B / âŒ˜ é¼ æ ‡ç‚¹å‡» è¿›å…¥å…‰æ ‡æ‰€åœ¨çš„æ–¹æ³•/å˜é‡çš„æ¥å£æˆ–æ˜¯å®šä¹‰å¤„ âŒƒâ‡§B è·³è½¬åˆ°ç±»å‹å£°æ˜å¤„ âŒ¥ Space, âŒ˜Y å¿«é€Ÿæ‰“å¼€å…‰æ ‡æ‰€åœ¨æ–¹æ³•ã€ç±»çš„å®šä¹‰ âŒ˜O æŸ¥æ‰¾ç±»æ–‡ä»¶ âŒ˜â‡§O æŸ¥æ‰¾æ‰€æœ‰ç±»å‹æ–‡ä»¶ã€æ‰“å¼€æ–‡ä»¶ã€æ‰“å¼€ç›®å½•ï¼Œæ‰“å¼€ç›®å½•éœ€è¦åœ¨è¾“å…¥çš„å†…å®¹å‰é¢æˆ–åé¢åŠ ä¸€ä¸ªåæ–œæ / F12 è¿”å›åˆ°å‰ä¸€ä¸ªå·¥å…·çª—å£ â‹ ä»å·¥å…·çª—å£è¿›å…¥ä»£ç æ–‡ä»¶çª—å£ â‡§â‹ éšè—å½“å‰æˆ–æœ€åä¸€ä¸ªæ´»åŠ¨çš„çª—å£ï¼Œä¸”å…‰æ ‡è¿›å…¥ä»£ç æ–‡ä»¶çª—å£ F3é€‰ä¸­æ–‡ä»¶/æ–‡ä»¶å¤¹/ä»£ç è¡Œï¼Œæ·»åŠ /å–æ¶ˆä¹¦ç­¾ âŒ¥F3 é€‰ä¸­æ–‡ä»¶/æ–‡ä»¶å¤¹/ä»£ç è¡Œï¼Œä½¿ç”¨åŠ©è®°ç¬¦æ·»åŠ /å–æ¶ˆä¹¦ç­¾ âŒƒ0â€¦âŒƒ9 å®šä½åˆ°å¯¹åº”æ•°å€¼çš„ä¹¦ç­¾ä½ç½® âŒ˜F3 æ˜¾ç¤ºæ‰€æœ‰ä¹¦ç­¾ âŒ¥F1 æ˜¾ç¤ºå½“å‰æ–‡ä»¶é€‰æ‹©ç›®æ ‡å¼¹å‡ºå±‚ï¼Œå¼¹å‡ºå±‚ä¸­æœ‰å¾ˆå¤šç›®æ ‡å¯ä»¥è¿›è¡Œé€‰æ‹©(å¦‚åœ¨ä»£ç ç¼–è¾‘çª—å£å¯ä»¥é€‰æ‹©æ˜¾ç¤ºè¯¥æ–‡ä»¶çš„Finder) âŒ˜F12 å¼¹å‡ºå½“å‰æ–‡ä»¶ç»“æ„å±‚ï¼Œå¯ä»¥åœ¨å¼¹å‡ºçš„å±‚ä¸Šç›´æ¥è¾“å…¥è¿›è¡Œç­›é€‰ï¼ˆå¯ç”¨äºæœç´¢ç±»ä¸­çš„æ–¹æ³•ï¼‰ é€šç”¨ âŒƒâŒ˜F åˆ‡æ¢å…¨å±æ¨¡å¼","categories":[{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"https://zhangyong3214.github.io/categories/%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"è½¯ä»¶å·¥å…·","slug":"è½¯ä»¶å·¥å…·","permalink":"https://zhangyong3214.github.io/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/"}]},{"title":"Gitç¬”è®°-å¸¸ç”¨å‘½ä»¤ä»¥åŠæ—¥å¸¸æ“ä½œæŠ€å·§æ±‡æ€»","slug":"è½¯ä»¶å·¥å…·/gitç¬”è®°","date":"2022-04-05T09:32:31.591Z","updated":"2022-04-05T09:32:31.591Z","comments":true,"path":"2022/04/05/è½¯ä»¶å·¥å…·/gitç¬”è®°/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/05/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/git%E7%AC%94%E8%AE%B0/","excerpt":"1ã€ä¸ºGité…ç½®ä»£ç†ï¼ˆè§£å†³å›½å†…è¿æ¥gitæ…¢é—®é¢˜ï¼‰ç›¸å…³æ–‡ç« ï¼šè§£å†³gitæ— æ³•cloneæç¤º443ä»¥åŠé…ç½®gitä»£ç†æ–¹æ³• 12345678# æ·»åŠ å½“å‰ä»“åº“é…ç½®ï¼šgit config --local http.proxy &quot;127.0.0.1:1087&quot; # åˆ é™¤å½“å‰ä»“åº“é…ç½®ï¼šgit config --unset --local http.proxy# æ·»åŠ å…¨å±€é…ç½®ï¼šgit config --global http.proxy &quot;127.0.0.1:1087&quot; # åˆ é™¤å…¨å±€é…ç½®ï¼šgit config --unset --global http.proxy","text":"1ã€ä¸ºGité…ç½®ä»£ç†ï¼ˆè§£å†³å›½å†…è¿æ¥gitæ…¢é—®é¢˜ï¼‰ç›¸å…³æ–‡ç« ï¼šè§£å†³gitæ— æ³•cloneæç¤º443ä»¥åŠé…ç½®gitä»£ç†æ–¹æ³• 12345678# æ·»åŠ å½“å‰ä»“åº“é…ç½®ï¼šgit config --local http.proxy &quot;127.0.0.1:1087&quot; # åˆ é™¤å½“å‰ä»“åº“é…ç½®ï¼šgit config --unset --local http.proxy# æ·»åŠ å…¨å±€é…ç½®ï¼šgit config --global http.proxy &quot;127.0.0.1:1087&quot; # åˆ é™¤å…¨å±€é…ç½®ï¼šgit config --unset --global http.proxy æ³¨ï¼šæ·»åŠ ç›¸å…³é…ç½®ä¹Ÿå¯ä»¥åˆ°æœ¬åœ°ä»“åº“å¯¹åº”çš„ç›®å½•ï¼Œä¿®æ”¹.gitæ–‡ä»¶å¤¹é‡Œé¢çš„configæ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼Œæˆ‘çš„æœ¬åœ°çš„1087ç«¯å£æ˜¯æˆ‘çš„ç§‘å­¦ä¸Šç½‘åœ°å€ config é…ç½®æœ‰systemçº§åˆ« globalï¼ˆç”¨æˆ·çº§åˆ«ï¼‰ å’Œlocalï¼ˆå½“å‰ä»“åº“ï¼‰ä¸‰ä¸ª è®¾ç½®å…ˆä»system-ã€‹global-ã€‹local åº•å±‚é…ç½®ä¼šè¦†ç›–é¡¶å±‚é…ç½® åˆ†åˆ«ä½¿ç”¨â€“system/global/local å¯ä»¥å®šä½åˆ°é…ç½®æ–‡ä»¶ æŸ¥çœ‹ç³»ç»Ÿconfig 1git config --system --list æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆglobalï¼‰é…ç½® 1git config --global --list æŸ¥çœ‹å½“å‰ä»“åº“é…ç½®ä¿¡æ¯ 1git config --local --list","categories":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://zhangyong3214.github.io/categories/%E6%95%99%E7%A8%8B/"}],"tags":[{"name":"è½¯ä»¶å·¥å…·","slug":"è½¯ä»¶å·¥å…·","permalink":"https://zhangyong3214.github.io/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/"}]},{"title":"ä¸ºMacOSæ‰“é€ è‡ªå·±ç‚«é…·ç»ˆç«¯-Iterm2+oh-my-zsh","slug":"è½¯ä»¶å·¥å…·/ä¸ºMacOSæ‰“é€ è‡ªå·±ç‚«é…·ç»ˆç«¯-","date":"2022-04-05T09:32:31.591Z","updated":"2022-04-05T09:32:31.592Z","comments":true,"path":"2022/04/05/è½¯ä»¶å·¥å…·/ä¸ºMacOSæ‰“é€ è‡ªå·±ç‚«é…·ç»ˆç«¯-/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/05/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/%E4%B8%BAMacOS%E6%89%93%E9%80%A0%E8%87%AA%E5%B7%B1%E7%82%AB%E9%85%B7%E7%BB%88%E7%AB%AF-/","excerpt":"1ã€iTerm2 iTerm2 æ˜¯ä¸€æ¬¾å®Œå…¨å…è´¹ï¼Œä¸“ä¸º Mac OS ç”¨æˆ·æ‰“é€ å¤šå‘½ä»¤è¡Œåº”ç”¨ã€‚ å®‰è£…å®Œæˆåï¼Œåœ¨/binç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ªzshçš„æ–‡ä»¶ã€‚ Macç³»ç»Ÿé»˜è®¤ä½¿ç”¨dashä½œä¸ºç»ˆç«¯ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ä¿®æ”¹é»˜è®¤ä½¿ç”¨zshï¼šchsh -s /bin/zsh å¦‚æœæƒ³ä¿®æ”¹å›é»˜è®¤dashï¼ŒåŒæ ·ä½¿ç”¨chshå‘½ä»¤å³å¯ï¼šchsh -s /bin/bash Zsh æ˜¯ä¸€æ¬¾å¼ºå¤§çš„è™šæ‹Ÿç»ˆç«¯ï¼Œæ—¢æ˜¯ä¸€ä¸ªç³»ç»Ÿçš„è™šæ‹Ÿç»ˆç«¯ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªè„šæœ¬è¯­è¨€çš„äº¤äº’è§£æå™¨ã€‚","text":"1ã€iTerm2 iTerm2 æ˜¯ä¸€æ¬¾å®Œå…¨å…è´¹ï¼Œä¸“ä¸º Mac OS ç”¨æˆ·æ‰“é€ å¤šå‘½ä»¤è¡Œåº”ç”¨ã€‚ å®‰è£…å®Œæˆåï¼Œåœ¨/binç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ªzshçš„æ–‡ä»¶ã€‚ Macç³»ç»Ÿé»˜è®¤ä½¿ç”¨dashä½œä¸ºç»ˆç«¯ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ä¿®æ”¹é»˜è®¤ä½¿ç”¨zshï¼šchsh -s /bin/zsh å¦‚æœæƒ³ä¿®æ”¹å›é»˜è®¤dashï¼ŒåŒæ ·ä½¿ç”¨chshå‘½ä»¤å³å¯ï¼šchsh -s /bin/bash Zsh æ˜¯ä¸€æ¬¾å¼ºå¤§çš„è™šæ‹Ÿç»ˆç«¯ï¼Œæ—¢æ˜¯ä¸€ä¸ªç³»ç»Ÿçš„è™šæ‹Ÿç»ˆç«¯ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªè„šæœ¬è¯­è¨€çš„äº¤äº’è§£æå™¨ã€‚ 1.1ã€iterm2 å®‰è£…ä¸‹è½½åœ°å€ 1.2ã€iTermæ“ä½œå¿«æ·é”® command + tï¼šæ–°å»ºçª—å£ command + dï¼šå‚ç›´åˆ†å±ï¼Œ command + shift + dï¼šæ°´å¹³åˆ†å±ã€‚ command + ] å’Œcommand + [ åœ¨æœ€è¿‘ä½¿ç”¨çš„åˆ†å±ç›´æ¥åˆ‡æ¢. command + alt + æ–¹å‘é”®ï¼šåˆ‡æ¢åˆ°æŒ‡å®šä½ç½®çš„åˆ†å±ã€‚ command + æ•°å­—ï¼šåˆ‡æ¢æ ‡ç­¾é¡µã€‚ command + æ–¹å‘é”®ï¼šæŒ‰æ–¹å‘åˆ‡æ¢æ ‡ç­¾é¡µã€‚ shift + command + sï¼šä¿å­˜å½“å‰çª—å£å¿«ç…§ã€‚ command + alt + bï¼šå¿«ç…§å›æ”¾ã€‚å¾ˆæœ‰æ„æ€çš„åŠŸèƒ½ï¼Œä½ å¯ä»¥å¯¹ä½ çš„æ“ä½œæ ¹æ®æ—¶é—´è½´è¿›è¡Œå›æ”¾ã€‚å¯ä»¥æ‹–åŠ¨ä¸‹æ–¹çš„æ—¶é—´è½´ï¼Œä¹Ÿå¯ä»¥æŒ‰å·¦å³æ–¹å‘é”® 1.3ã€åˆ›å»ºä¸€é”®ç™»å½•æœåŠ¡å™¨1.3.1ã€ç¬¬ä¸€æ­¥ï¼šæ–°å»ºé…ç½®æ–‡ä»¶ï¼Œå†…å®¹ï¼š12345678set user ç”¨æˆ·åset host IPåœ°å€set password å¯†ç spawn ssh $user@$hostexpect &quot;*assword:*&quot;send &quot;$password\\r&quot;interactexpect eof 1.3.2ã€ç¬¬äºŒæ­¥ï¼šiTerm2é…ç½®æ·»åŠ 1expect ~/.ssh/SIT02-10.231.143.184 2ã€Oh My ZshOh My Zsh å®˜ç½‘ Oh My Zsh æ˜¯ä¸€æ¬¾ç¤¾åŒºé©±åŠ¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒåŸºäº zsh å‘½ä»¤è¡Œï¼Œæä¾›äº†ä¸»é¢˜é…ç½®ï¼Œæ’ä»¶æœºåˆ¶ï¼Œå·²ç»å†…ç½®çš„ä¾¿æ·æ“ä½œã€‚ç»™æˆ‘ä»¬ä¸€ç§å…¨æ–°çš„æ–¹å¼ä½¿ç”¨å‘½ä»¤è¡Œã€‚ 2.1ã€oh my zsh å®‰è£…2.1.1ã€æ–¹å¼11sh -c &quot;$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot; 2.1.2ã€æ–¹å¼21`sh -c &quot;$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)&quot;` 2.1.3ã€æ–¹å¼3ï¼ˆå›½å†…æ¨èä½¿ç”¨ï¼‰1sh -c &quot;$(curl -fsSL https://gitee.com/pocmon/ohmyzsh/raw/master/tools/install.sh)&quot; 2.2ã€å¸è½½oh my zsh1uninstall_on_my_zsh 2.3ã€æ›´æ¢ä¸»é¢˜12vi ~/.zshrcZSH_THEME=&quot;macovsky-ruby&quot; &quot;steeef&quot; 2.4ã€å®‰è£…è¯­æ³•é«˜äº®æ’ä»¶1234# è¿›å…¥æ–‡ä»¶å¤¹cd ~/.oh-my-zsh/custom/plugins# ä¸‹è½½æ’ä»¶git clone https://github.com/zsh-users/zsh-syntax-highlighting.git 2.5ã€è‡ªåŠ¨è¡¥å…¨æ’ä»¶1git clone https://github.com/zsh-users/zsh-autosuggestions.git 2.5.1ã€å¯ç”¨æ’ä»¶12345vi ~/.zshrcplugins=( git zsh-autosuggestions zsh-syntax-highlighting )source ~/.zshrc","categories":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://zhangyong3214.github.io/categories/%E6%95%99%E7%A8%8B/"}],"tags":[{"name":"è½¯ä»¶å·¥å…·","slug":"è½¯ä»¶å·¥å…·","permalink":"https://zhangyong3214.github.io/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/"}]},{"title":"Dockeræ“ä½œç¬”è®°-ä»å°ç™½åˆ°å…¥é—¨","slug":"è½¯ä»¶å·¥å…·/Dockeræ“ä½œç¬”è®°-ä»å°ç™½åˆ°å…¥é—¨","date":"2022-04-05T09:32:31.590Z","updated":"2022-04-05T09:32:31.591Z","comments":true,"path":"2022/04/05/è½¯ä»¶å·¥å…·/Dockeræ“ä½œç¬”è®°-ä»å°ç™½åˆ°å…¥é—¨/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/05/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/Docker%E6%93%8D%E4%BD%9C%E7%AC%94%E8%AE%B0-%E4%BB%8E%E5%B0%8F%E7%99%BD%E5%88%B0%E5%85%A5%E9%97%A8/","excerpt":"1ã€Dockerå®‰è£…centos ä¸ºä¾‹ï¼šæŸ¥çœ‹ç‰ˆæœ¬ï¼šcat /etc/redhat-release å‚è€ƒç½‘å€ 121.å…ˆå®‰è£…gccï¼šyum -y install gcc 2.æŸ¥çœ‹ç‰ˆæœ¬ï¼šgcc -v å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…","text":"1ã€Dockerå®‰è£…centos ä¸ºä¾‹ï¼šæŸ¥çœ‹ç‰ˆæœ¬ï¼šcat /etc/redhat-release å‚è€ƒç½‘å€ 121.å…ˆå®‰è£…gccï¼šyum -y install gcc 2.æŸ¥çœ‹ç‰ˆæœ¬ï¼šgcc -v å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ… 1yum install -y yum-utils device-mapper-persistent-data lvm2 1.1ã€é˜¿é‡ŒåŠ é€Ÿï¼š1yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo æŸ¥çœ‹é…ç½®ï¼š vi /etc/yum.repos.d/docker-ce.repo æ›´æ–°è½¯ä»¶åŒ…ï¼š yum makecache fast å®‰è£…dockerï¼š yum install docker-ce docker-ce-cli containerd.io é…ç½®æ–‡ä»¶ä½ç½®ï¼š /etc/sysconfig/docker å¯åŠ¨dockerï¼š systemctl start docker è®¾ç½®å¼€æœºå¯åŠ¨ï¼š systemctl enable docker æŸ¥çœ‹dockerå¯åŠ¨è¿›ç¨‹ï¼š ps -ef|grep docker æŸ¥çœ‹dockerç‰ˆæœ¬ï¼š docker version docker info 1.2ã€ä¸‹è½½é•œåƒ1234docker pull mysql:5.7 docker pull rabbitmq:management ï¼ˆå¸¦ç®¡ç†å°çš„MQï¼‰docker pull zookeeper:latest docker pull redis:rc-buster é•œåƒæœç´¢åœ°å€ é•œåƒåŠ é€Ÿåœ°å€ 1.3ã€æƒé™é—®é¢˜è§£å†³dockerå®ˆæŠ¤è¿›ç¨‹å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šé»˜è®¤èµ‹äºˆåå­—ä¸ºdockerçš„ç”¨æˆ·ç»„è¯»å†™Unix socketçš„æƒé™ï¼Œå› æ­¤åªè¦åˆ›å»ºdockerç”¨æˆ·ç»„ï¼Œå¹¶å°†å½“å‰ç”¨æˆ·åŠ å…¥åˆ°dockerç”¨æˆ·ç»„ä¸­ï¼Œé‚£ä¹ˆå½“å‰ç”¨æˆ·å°±æœ‰æƒé™è®¿é—®Unix socketäº†ï¼Œè¿›è€Œä¹Ÿå°±å¯ä»¥æ‰§è¡Œdockerç›¸å…³å‘½ä»¤ æ·»åŠ dockerç”¨æˆ·ç»„ sudo groupadd docker å°†ç™»é™†ç”¨æˆ·åŠ å…¥åˆ°dockerç”¨æˆ·ç»„ä¸­ sudo gpasswd -a $USER docker æ›´æ–°ç”¨æˆ·ç»„ newgrp docker æµ‹è¯•dockerå‘½ä»¤æ˜¯å¦å¯ä»¥ä½¿ç”¨sudoæ­£å¸¸ä½¿ç”¨ docker ps 2ã€é•œåƒæ“ä½œ æŸ¥çœ‹é•œåƒï¼šdocker images å±•ç¤ºæ‰€æœ‰æ‰€æœ‰é•œåƒï¼ˆåŒ…å«ä¸­é—´é•œåƒå±‚ï¼‰ï¼šdocker images -a æŸ¥è¯¢é•œåƒï¼šdocker search é•œåƒåå­— åˆ é™¤é•œåƒï¼šdocker rmi é•œåƒid 3ã€å®¹å™¨æ“ä½œ å¯åŠ¨mysqlï¼š docker run -p 3306:3306 --name mysql01 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7 å¯åŠ¨rabitmqï¼š docker run -d -p 5672:5672 -p 15672:15672 --name myrabitmq é•œåƒid å¯åŠ¨redisï¼š docker run -d -p 6379:6379 --name myredis é•œåƒid å¯åŠ¨zookeeperï¼š docker run --name zk01 -p 2181:2181 --restart always -d é•œåƒid å¯åŠ¨nacosï¼š docker run --name nacos-2.0.1 -e MODE=standalone -p 8849:8848 -d nacos/nacos-server:2.0.1 å¯åŠ¨kibanaï¼š docker run -d --name kibana7.7.1 --net mynet -p 5601:5601 kibana:7.7.1 Kibana åœ¨Dokerä¸­å¯åŠ¨ç›¸å…³é…ç½® 123docker exec -it kibana7.7.1 bashcd config vi kibana.yml æŸ¥çœ‹æ—¥å¿—ï¼š docker logs -f -t â€“tail 100 kibana7.7.1 æ›´æ–°å¯åŠ¨å‚æ•°ï¼š docker update â€“restart=always xxx æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼š docker ps -a æŸ¥çœ‹å¯åŠ¨å®¹å™¨ï¼š docker ps å¯åŠ¨å·²åœæ­¢çš„å®¹å™¨ï¼š docker start å®¹å™¨idæˆ–åå­— å…³é—­å®¹å™¨ ï¼š docker stop å®¹å™¨id å–æ¶ˆå®¹å™¨å¼€æœºå¯åŠ¨ï¼š docker update --restart=no å®¹å™¨ID å¼ºåˆ¶å…³é—­ï¼š docker kill å®¹å™¨id åˆ é™¤å·²åœæ­¢å®¹å™¨ ï¼š docker rm å®¹å™¨id åˆ é™¤æ²¡æœ‰åœæ­¢å®¹å™¨ï¼š docker rm -f å®¹å™¨id è¿›å…¥å®¹å™¨å†…éƒ¨ï¼š docker exec -it ç¨‹åºid /bin/bash exit å…³é—­å®¹å™¨é€€å‡º(è‡ªæµ‹ä¸ä¼šé€€å‡º)ï¼š ctrl+p+q æŸ¥çœ‹æ—¥å¿—ï¼š docker logs -f (è¿½åŠ ) -t (åŠ å…¥æ—¶é—´æˆ³) --tail 3 (æ˜¾ç¤ºæœ€å3è¡Œ) å®¹å™¨id æŸ¥çœ‹å®¹å™¨ç»“æ„ç»†èŠ‚ï¼š docker inspect å®¹å™¨id æ‹·è´å®¹å™¨ä¸­çš„æ–‡ä»¶ï¼š docker cp å®¹å™¨id:æ–‡ä»¶è·¯å¾„ è¦æ‹·è´åˆ°çš„è·¯å¾„ æäº¤è‡ªå·±çš„dockeré•œåƒï¼š docker commit -a=&quot;lgd&quot; -m=&quot;mysql-lgd&quot; 243baa0ea2a7 ligoudan/lgd-mysql:1.0","categories":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://zhangyong3214.github.io/categories/%E6%95%99%E7%A8%8B/"}],"tags":[{"name":"è½¯ä»¶å·¥å…·","slug":"è½¯ä»¶å·¥å…·","permalink":"https://zhangyong3214.github.io/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/"}]},{"title":"","slug":"çŸ¥è¯†æ•´ç†/nettyçŸ¥è¯†ç‚¹","date":"2022-04-05T09:32:31.589Z","updated":"2022-04-05T09:32:31.589Z","comments":true,"path":"2022/04/05/çŸ¥è¯†æ•´ç†/nettyçŸ¥è¯†ç‚¹/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/05/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/netty%E7%9F%A5%E8%AF%86%E7%82%B9/","excerpt":"","text":"nettyIOæ¨¡å‹ IOæ¨¡å‹å°±æ˜¯è¯´ç”¨ä»€ä¹ˆæ ·çš„é€šé“è¿›è¡Œæ•°æ®çš„å‘æ”¾å’Œæ¥æ”¶ t BIO åŒæ­¥é˜»å¡æ¨¡å‹ï¼Œä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥ä¸€ä¸ªçº¿ç¨‹ï¼Œå¦‚æœæœ‰å¤šä¸ªå®¢æˆ·ç«¯ï¼Œéœ€è¦æœ‰å¤šä¸ªçº¿ç¨‹æ¥å¤„ç†ï¼Œå¯èƒ½è¶…è¿‡æœåŠ¡ç«¯çš„èµ„æºé™åˆ¶ã€‚ åœ¨ä½¿ç”¨NIOè¿‡ç¨‹ä¸­ä½¿ç”¨äº†socket.accept()ã€‚æœåŠ¡ç«¯çš„outputStream.write()ã€‚å®¢æˆ·ç«¯çš„inputStream.read();éƒ½æ˜¯é˜»å¡æ–¹æ³•ã€‚ä¸ºäº†æå‡æœåŠ¡ç«¯çš„ååé‡ï¼Œä¸€èˆ¬éƒ½ä¼šæ‰ä¼šå¤šçº¿ç¨‹çš„æ–¹å¼ã€‚ è¿™ä¸ªæ¨¡å‹æœ‰ä»¥ä¸‹å‡ ä¸ªè‡´å‘½é—®é¢˜ çº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯ï¼Œåœ¨Linuxè¿™æ ·çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œçº¿ç¨‹æœ¬è´¨æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚åˆ›å»ºå’Œé”€æ¯éƒ½æ˜¯é‡é‡çº§çš„ç³»ç»Ÿå‡½æ•°ã€‚ çº¿ç¨‹æœ¬èº«å ç”¨è¾ƒå¤§çš„å†…å­˜ï¼Œå†…å­˜ä¸€èˆ¬éƒ½ä¼šæœ‰å†…å­˜çš„åˆ†é…ï¼Œå¦‚æœç³»ç»Ÿçš„çº¿ç¨‹è¿‡å¤šï¼Œé‚£ä¹ˆæ•´ä¸ªJVMå†…å­˜å¯èƒ½ä¼šåƒå®Œã€‚ çº¿ç¨‹çš„åˆ‡æ¢æˆæœ¬ä¹Ÿå¾ˆå¾ˆé«˜ï¼Œæ“ä½œç³»ç»Ÿåœ¨å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢æ—¶å€™éœ€è¦ä¿å­˜çº¿ç¨‹çš„ä¸Šçº¿æ–‡ï¼Œç„¶åæ‰§è¡Œç³»ç»Ÿè°ƒç”¨ã€‚ ç»“è®ºï¼šNIOæ¨¡å‹åœ¨çº¿ç¨‹è¿‡å¤šæ—¶å€™(å®¢æˆ·ç«¯å¹¶å‘åº¦å¾ˆé«˜æ—¶å€™)ï¼Œé‚£ä¹ˆè¿™ç§æ¨¡å‹å¾ˆå ç”¨å¤§é‡çš„æœåŠ¡èµ„æºã€‚ NIO åŒæ­¥éé˜»å¡IOæ¨¡å‹ã€‚ Channelã€Bufferã€é€‰æ‹©å™¨ ServerSocketChannel Selectoræ³¨å†Œã€‚å¤šè·¯å¤ç”¨é€‰æ‹©å™¨ å’ŒBIOç›¸æ¯”ï¼ŒNIOæŠŠåŸæ¥çš„é˜»å¡è¯»å†™(å ç”¨çº¿ç¨‹)ç¼–ç¨‹äº†å•çº¿ç¨‹è½®è®­ï¼Œæ‰¾åˆ°å¯ä»¥è¿›è¡Œè¯»å†™çš„ç½‘ç»œæ–‡ä»¶æè¿°ç¬¦è¿›è¡Œè¯»å†™ã€‚é™¤äº†æ—¶é—´è½®è®­æ˜¯é˜»å¡çš„ï¼Œå‰©ä½™IOæ“ä½œéƒ½æ˜¯å­˜CPUæ“ä½œï¼Œæ²¡å¿…è¦å¼€å¯å¤šçº¿ç¨‹ã€‚ ç”±äºçº¿ç¨‹çš„èŠ‚çº¦ï¼Œè¿æ¥æ•°å¤§çš„æ—¶å€™å› ä¸ºæºç¨‹åˆ‡æ¢å¸¦æ¥çš„é—®é¢˜ä¹Ÿéšä¹‹è§£å†³ï¼Œè¿›è€Œä¸ºå¤„ç†æµ·é‡äº†è§£æä¾›äº†å¯èƒ½ã€‚ åœ¨NIOçš„æ¨¡å‹ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸‰ç±»çº¿ç¨‹ äº‹ä»¶åˆ†å‘å™¨ï¼Œå•çº¿ç¨‹é€‰æ‹©å°±ç»ªäº‹ä»¶ã€‚ I/Oå¤„ç†å™¨ï¼ŒåŒ…æ‹¬connnectã€readã€writeç­‰ï¼Œè¿™ç§å­˜CPUæ“ä½œï¼Œä¸€èˆ¬å¼€å¯CPUæ ¸å¿ƒçº¿ç¨‹æ•°å°±å¯ä»¥ ä¸šåŠ¡çº¿ç¨‹ï¼Œåœ¨å¤„ç†å®ŒI/Oåï¼Œä¸šåŠ¡ä¸€èˆ¬è¿˜ä¼šæœ‰è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œæœ‰æ—¶å€™è¿˜ä¼šæœ‰é˜»å¡I/Oï¼Œå¦‚DBæ“ä½œã€PRCç­‰æ“ä½œ AIO å¼‚æ­¥éé˜»å¡ã€‚AIOåº•å±‚æ˜¯NIOçš„å°è£…ï¼ŒåŒæ­¥è½¬å¼‚æ­¥çš„æ–¹å¼ã€‚ tcpçš„è¿æ¥ï¼Œæ•°æ®è¯»å–å’Œå†™å…¥éƒ½ä¸è¿›è¡Œç­‰å¾…ï¼Œé€šè¿‡å›è°ƒçš„æ–¹å¼è¿›è¡Œè¿æ¥å’Œè¯»å†™ã€‚ nettyæ ¸å¿ƒåŠŸèƒ½nettyçš„æºç è§£ænettyçš„é«˜æ€§èƒ½åœºæ™¯","categories":[],"tags":[]},{"title":"é¢è¯•çŸ¥è¯†ç‚¹æ•´ç†","slug":"çŸ¥è¯†æ•´ç†/çŸ¥è¯†ç‚¹æ¢³ç†-2022","date":"2022-04-05T09:32:31.589Z","updated":"2022-04-05T09:32:31.590Z","comments":true,"path":"2022/04/05/çŸ¥è¯†æ•´ç†/çŸ¥è¯†ç‚¹æ¢³ç†-2022/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/05/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%A2%B3%E7%90%86-2022/","excerpt":"","text":"2022-çŸ¥è¯†ç‚¹æ¢³ç†1ã€redis keysæ‰§è¡Œäº†ä¼šæ€ä¹ˆæ · 1ã€å½“redisé›†ç¾¤ä¸­çš„keyæ•°é‡ä¸å¤šæ—¶å€™æ²¡æœ‰ä»€ä¹ˆå¤§é—®é¢˜ï¼Œä½†æ˜¯éšç€keyæ•°é‡çš„å¢é•¿ï¼Œè¿™æ ·å¯èƒ½å¼•èµ·redisçš„å®¢æˆ·ç«¯è®¿é—®redisé˜»å¡ã€‚ 2ã€å› ä¸ºRedisæ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰§è¡Œä»»ä½•å‘½ä»¤æ—¶å€™å…¶ä»–å‘½ä»¤ä¼šé˜»å¡ï¼Œè€Œä¸”ç”±äºkeyå‘½ä»¤çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼ŒredisæœåŠ¡ç«¯ä¼šåŒ¹é…æŸ¥æ‰¾å®Œæ‰€æœ‰çš„keyæ‰ç»“æŸï¼Œæ¯”è¾ƒè€—æ—¶ï¼Œå¦‚æœåœ¨çº¿ä¸Šæ‰§è¡Œéå¸¸å±é™©ã€‚ 3ã€å¦‚æœå‘½ä»¤æ‰§è¡Œæ—¶é—´è¿‡é•¿å¯èƒ½ä¼šè§¦å‘æœåŠ¡å™¨çš„å®‰å…¨ç­–ç•¥ï¼Œå¯¼è‡´ä¸»ä»åˆ‡æ¢æˆ–è€…é‡æ–°é€‰ä¸» å¯ç”¨scanå‘½ä»¤æ›¿æ¢keyså‘½ä»¤ï¼Œè¾¾åˆ°åŒæ ·æ•ˆæœ Scanå‘½ä»¤åœ¨Redisçš„2.8ç‰ˆæœ¬çˆ±æ˜¯æ”¯æŒï¼Œç›¸å½“äºdbä¸­çš„åˆ†é¡µæŸ¥è¯¢,è™½ç„¶ä¹Ÿæ˜¯O(n)çš„æ—¶é—´å¤æ‚åº¦ï¼Œä½†æ˜¯æ•°é‡è¿›è¡Œåˆ¶å®šï¼ŒæŸ¥è¯¢æ—¶é—´ç¨³å®š Scan 0 match test* count 100 2ã€redisç¼“å­˜å‡»ç©¿ ç©¿é€å‰ææ¡ä»¶ï¼šæˆ‘ä»¬æŠŠdbçš„çƒ­ç‚¹æ•°æ®æ”¾åœ¨äº†redisï¼Œå¹¶è®¾ç½®äº†è¶…æ—¶æ—¶é—´ï¼Œç›®å‰æ˜¯è¾ƒå°‘DBçš„è®¿é—®æ¬¡æ•°æˆ–è€…DBæ”¯æŒä¸äº†è¿™ä¹ˆå¤§å‹åŠ›ã€‚ä½†æ˜¯åœ¨æŸ¥è¯¢æ—¶å€™æœ‰åˆè¿›è¡Œäº†DBå…œåº•çš„æƒ…å†µã€‚ ç¼“å­˜å‡»ç©¿ï¼šå½“ç¼“å­˜è¿‡æœŸçš„ä¸€ç¬é—´ï¼Œå¤§é‡è¯·æ±‚è¾¾åˆ°redisï¼Œå› ä¸ºredisæ²¡æœ‰ï¼Œæ‰€ä»¥ä¸€ç¬é—´çš„æ‰€æœ‰æµé‡éƒ½æ‰“åˆ°äº†DB ç¼“å­˜ç©¿é€:åœ¨ç¼“å­˜ä¸­æŸ¥è¯¢ä¸åˆ°æ•°æ®ï¼Œå»æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®ä¹Ÿæ²¡æŸ¥åˆ°ï¼Œç›¸å½“äºæ— æ•ˆè¯·æ±‚åˆ°äº†BDï¼Œæœ‰å¤§é‡è¿™æ ·è¯·æ±‚éƒ½æ‰“åˆ°äº†DBã€‚ ç¼“å­˜å‡»ç©¿çš„è§£å†³æ–¹æ¡ˆ()ï¼š è®¿é—®DBçš„ä½ç½®åŠ äº’æ–¥é” çƒ­ç‚¹æ•°æ®ç»­æ—¶ å¼‚æ­¥åŒæ­¥ï¼Œä¸ç”¨dbå…œåº• ç¼“å­˜å‡»ç©¿(å‰ç½®æ‹¦æˆª)ï¼š æ¥å£éªŒè¯ã€‚éæ³•è¯·æ±‚é™çº§ç­‰ç­‰ã€‚ ç¼“å­˜ç©ºå€¼å¹¶è¿›è¡Œè¶…æ—¶æ—¶é—´æ§åˆ¶ å¸ƒéš†è¿‡æ»¤å™¨â€“ä¸å­˜åœ¨è¯·æ±‚å…ˆè¿‡æ»¤ 3ã€ zookeeper eurekaåŒºåˆ«ç›¸åŒç‚¹ éƒ½å¯ä»¥ä½œä¸ºæ³¨å†Œä¸­å¿ƒ ä¸åŒç‚¹ Eureka æ˜¯APæ¨¡å‹(å…³æ³¨å¯ç”¨æ€§)ï¼ŒZKæ˜¯CPæ¨¡å‹(å…³æ³¨æ•°æ®ä¸€è‡´æ€§) Eurekaæ”¯æŒè´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ŒZKä¸æ”¯æŒ Eurekaè®¿é—®æ”¯æŒhttpåè®®ï¼ŒZKä¸æ”¯æŒ 4ã€dubbo robinè´Ÿè½½å‡è¡¡Dubboè´Ÿè½½å‡è¡¡ç®—æ³•ï¼š RandomLoadBalance:æƒé‡éšæœºç®—æ³•ï¼Œæ ¹æ®æƒé‡å€¼è¿›è¡Œéšæœºè´Ÿè½½ å‡è®¾æœ‰ä¸€ç»„æœåŠ¡å™¨Aï¼ŒBï¼ŒC,å¯¹åº”çš„æƒé‡ä¸º[1,2,7]æƒé‡æ€»å’Œä¸º10ï¼Œ[0,0]åŒºé—´å±äºæœåŠ¡A,[1,2]å±äºBï¼Œ[3,9]å±äºæœåŠ¡Cã€‚æ¯æ¬¡è´Ÿè½½æ—¶å€™ï¼Œé€šè¿‡éšæœºç”Ÿæˆä¸€ä¸ªèŒƒå›´åœ¨[0,9]ä¹‹é—´çš„éšæœºæ•°ï¼Œè®¡ç®—è¿™ä¸ªéšæœºæ•°åœ¨å“ªä¸ªåŒºé—´ï¼Œæ‰¾åˆ°å±äºè¿™ä¸ªåŒºé—´çš„æœåŠ¡å°±å¯ä»¥ã€‚ LeastActiveLoadBalanceï¼šæœ€å°‘æ´»è·ƒæ•°è°ƒç”¨æ³• æ´»è·ƒåº¦è°ƒç”¨è¶Šå°ï¼Œè¡¨æ˜è¯¥æœåŠ¡æä¾›è€…çš„æ•ˆç‡è¶Šé«˜ï¼Œå•ä½æ—¶é—´å†…å¯ä»¥å¤„ç†æ›´å¤šçš„è¯·æ±‚ã€‚ æ¯ä¸ªæœåŠ¡æä¾›è€…å¯¹åº”ä¸€ä¸ªæ´»è·ƒæ•°çš„activeï¼Œåˆå§‹ä¸º0ï¼Œæ¯æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œæ´»è·ƒåº¦+1ï¼Œå¤„ç†å®Œæˆä¸€ä¸ªè¯·æ±‚æ´»è·ƒåº¦-1ã€‚æ´»è·ƒåº¦å¯ä»¥ä»£è¡¨è¯¥æœåŠ¡è¿˜æœªå¤„ç†å®Œæˆçš„è¯·æ±‚ã€‚è·¯ç”±æŒ‰ç…§æ´»è·ƒåº¦è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ ConsistentHashLoadBalanceï¼šhashä¸€è‡´æ€§ç®—æ³• hashä¸€è‡´æ€§ç®—æ³•ï¼Œç›¸åŒå‚æ•°çš„è¯·æ±‚æ€»æ—¶å‘é€åˆ°åŒä¸€æä¾›è€…ã€‚å½“æŸä¸€å°æŒ‚æ‰æ—¶ï¼Œè¯·æ±‚åˆ†æ‘Šåˆ°å…¶ä»–æä¾›è€…ã€‚ RoundRobiLoadBalance:åŠ æƒè½®è®­ç®—æ³• è½®è®­æ˜¯å°†æ¯ä¸ªè¯·æ±‚è½®æµåˆ†é…åˆ°æ¯å°æœåŠ¡å™¨ã€‚å‡å¦‚è¯´æœ‰ä¸‰å°æœåŠ¡å™¨A,B,Cã€‚è½®è®­ æ˜¯ä¸€ç§çŠ¶æ€è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œå®ç°ç®€å•ï¼Œé€‚ç”¨äºæ¯å°æœåŠ¡å™¨æ€§èƒ½æ¥è¿‘çš„åœºæ™¯ã€‚ä½†æ˜¯å®é™…æƒ…å†µï¼Œæ¯å°æœåŠ¡å™¨æ€§èƒ½å¯èƒ½ä¸ä¸€è‡´ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæµé‡å‡åˆ†ï¼Œé‚£ä¹ˆæ€§èƒ½è¾ƒå·®çš„æœºå™¨ä¼šæœ€å…ˆæˆä¸ºç“¶é¢ˆã€‚ä¸€æ¬¡å¯ä»¥å¯¹è½®è®­è¿›è¡ŒåŠ æƒï¼Œå®ç°è°ƒæ§æ¯å°æœºå™¨çš„è´Ÿè½½ã€‚ç»è¿‡åŠ æƒåï¼Œæ¯å°æœåŠ¡å™¨ä¼šè¿›è¡Œè¯·æ±‚çš„æ¯”ä¾‹åˆ†é…ã€‚æ¯”å¦‚Aã€Bã€Cçš„æƒé‡ä¸º1:2:7,é‚£ä¹ˆ10æ¬¡è¯·æ±‚ä¸­1ç¬”åˆ°A,2ç¬”åˆ°B,7ç¬”åˆ°Cã€‚ 5ã€ springä¸­çš„è®¾è®¡æ¨¡å¼å’Œç”¨æ³•ç¤ºä¾‹å·¥å‚æ¨¡å¼BeanFactoryæ˜¯Springä¸­çš„å®¹å™¨å·¥å‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹æ³•è·å–ä¸åŒçš„å¯¹è±¡ã€‚é€šè¿‡æŠ½è±¡ç±»å…ƒç´ ï¼Œå½¢æˆbeanDefinitionâ€”&gt;é€šè¿‡BeanDefinition å•ä¾‹æ¨¡å¼è·å–beanæ—¶å€™é€šè¿‡ä¸‰çº§ç¼“å­˜å®ç°ã€‚ è£…é¥°å™¨æ¨¡å¼å„ç§Wrapper ä»£ç†æ¨¡å¼AOPåº•å±‚å°±æ˜¯åŠ¨æ€ä»£ç† å…·ä½“å¯ä»¥è®²è®²Springçš„beanå®ä¾‹åŒ–åçš„åŠ¨æ€ä»£ç†è¿‡ç¨‹ã€‚PostProcessor æ¨¡æ¿è®¾è®¡æ¨¡å¼ å…·ä½“å¯ä»¥å‚ç…§ä¸åŒçš„å®¹å™¨å¯åŠ¨è¿‡ç¨‹ ç­–ç•¥è®¾è®¡æ¨¡å¼6ã€ æ•°æ®åº“æŸ¥è¯¢æœ€è¿‘100ä¸‡çš„æ•°æ®7ã€mysql acidæ€ä¹ˆä¿è¯ a(Atomicity):åŸå­æ€§,æ¯ä¸€ä¸ªäº‹åŠ¡æ˜¯ä¸€ä¸ªæœ€å°å•ä½ï¼Œäº‹åŠ¡å†…éƒ¨çš„æ“ä½œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚ c(Consistency):ä¸€è‡´æ€§ï¼Œä¸€è‡´æ€§æ˜¯æŒ‡äº‹åŠ¡æ‰§è¡Œå‰åï¼Œæ•°æ®æ•°æ®å­˜äºä¸€ä¸­åˆæ³•çŠ¶æ€ï¼Œè¿™ç§çŠ¶æ€æ˜¯æŒ‡è¯­ä¹‰ä¸Šè€Œä¸æ˜¯è¯­æ³•ä¸Šã€‚åˆæ³•çŠ¶æ€æ˜¯æŒ‡æ»¡è¶³é¢„å®šçš„çº¦æŸå°±å«åšåˆæ³•çš„çŠ¶æ€ã€‚ i(Isolation):éš”ç¦»æ€§ï¼Œéš”ç¦»æ€§æ˜¯æŒ‡å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œï¼Œå†…éƒ¨çš„æ“ä½œå’Œå…¶ä»–äº‹åŠ¡æ˜¯éš”ç¦»çš„ï¼Œå¹¶å‘æ‰§è¡Œçš„å„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸èƒ½äº’ç›¸å¹²æ‰°ã€‚ d(Durability):æŒä¹…æ€§ï¼ŒæŒä¹…æ€§æ˜¯æŒ‡äº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œä»–æ€¼æ•°æ®åº“çš„æ”¹å˜æ˜¯æ°¸ä¹…æ€§çš„ã€‚æ¥ä¸‹æ¥çš„å…¶ä»–æ“ä½œæˆ–è€…æ•…éšœéƒ½ä¸åº”è¯¥å¯¹è¿™ä¸ªç»“æœæœ‰ä»»ä½•å½±å“ã€‚ åŸå­æ€§é€šè¿‡InnoDBçš„undo logå®ç°ã€‚unlogä¹Ÿå«åšå›å½’æ—¥å¿—ï¼Œæ˜¯å®ç°åŸå­æ€§çš„å…³é”®ï¼Œå½“äº‹åŠ¡å›æ»šæ—¶èƒ½å¤Ÿæ’¤é”€å·²ç»æˆåŠŸæ‰§è¡Œçš„sqlè¯­å¥ï¼Œundo logçš„å®ç°åŸç†æ˜¯è®°å½•ä¸€æ¡ç›¸åæ“ä½œçš„æ“ä½œã€‚insertâ€“&gt; deleteã€‚update(å) â€“&gt; update(å‰) ï¼Œdelete â€“&gt; insert ä¸€è‡´æ€§æ˜¯æ•°æ®åº“éœ€è¦è¾¾åˆ°çš„ç›®çš„ã€‚ä»æ•°æ®åº“å±‚é¢ï¼Œé€šè¿‡åŸå­æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§æ¥ä¿è¯ã€‚ä»åº”ç”¨å±‚é¢ï¼Œé€šè¿‡ä»£ç åˆ¤æ–­æ•°æ®åº“æ˜¯å¦æœ‰æ•ˆï¼Œç„¶åå†³å®šå›æ»šè¿˜æ˜¯æäº¤æ•°æ®ï¼Œä¹Ÿæ˜¯ä¸€è‡´æ€§çš„ æŒä¹…æ€§æ˜¯é€šè¿‡InnoDB çš„redo logå®ç°çš„ã€‚redo logä¹Ÿå€¨å‚²é‡åšæ—¥å¿—ã€‚å½“åšæ•°æ®ä¿®æ”¹æ—¶å€™ï¼Œä¸ä»…éœ€è¦åœ¨å†…å­˜ä¸­æ“ä½œï¼Œè¿˜ä¼šåœ¨redo logä¸­è®°å½•è¿™æ¬¡æ“ä½œã€‚å½“äº‹åŠ¡æäº¤æ—¶å€™ï¼Œä¼šå°†redo log è¿›è¡Œåˆ·ç›˜.å½“æ•°æ®åº“å®•æœºé‡å¯æ—¶å€™ï¼Œä¼šå°†redo logä¸­å†…å­˜æ¢å¤åˆ°æ•°æ®åº“ä¸­ï¼Œå†æ ¹æ®undo logå’Œbinlogå†…å®¹å†³å®šå›å½’æ•°æ®è¿˜æ˜¯æäº¤æ•°æ®ã€‚ éš”ç¦»æ€§é€šè¿‡InnoDBçš„éš”ç¦»ç•Œåˆ«å’ŒMVCCæ¥å®ç°ã€‚ 8ã€mysql b+æ ‘å’Œbæ ‘ avlæ ‘åŒºåˆ«avl:å¹³è¡¡äºŒå‰æ ‘ 9ã€åˆ†å¸ƒå¼é”rediså®•æœºæ€ä¹ˆåŠ é¦–å…ˆç¡®å®šä¸šåŠ¡åœºæ™¯æ˜¯å¦å¼ºä¾èµ–è¿™ä¸ªåˆ†å¸ƒå¼é”ï¼Œå¦‚æœæ˜¯é‚£ä¹ˆä½ çš„ä¸šåŠ¡å°±è¿›è¡Œä¸ä¸‹å»ã€‚ å¦‚æœä¸æ˜¯å°±è¦åˆ†å…·ä½“æƒ…å†µã€‚ 10ã€dubbo zookeeperé›†ç¾¤å®•æœºè¿˜èƒ½å‘ç°å—é—®é¢˜ä¸æ¸…æ™°ã€‚å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªé—®é¢˜æ¥å›ç­” dubboé›†ç¾¤é€šè¿‡zkä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼ŒZKé›†ç¾¤å®•æœºï¼Œdubboå®¢æˆ·ç«¯è¿˜èƒ½è¢«å‘ç°ä¹ˆ è¿™ä¸ªé—®é¢˜æ˜¯æ˜¯é—®ï¼Œdubboå®¢æˆ·ç«¯ç¼“å­˜æœåŠ¡ç«¯èŠ‚ç‚¹çš„é—®é¢˜ dubbo çš„æ³¨å†Œä¸­å¿ƒzké›†ç¾¤å®•æœºåè¿˜èƒ½é‡æ–°å¯åŠ¨ä¹ˆ é—®çš„æ˜¯zkçš„æ•…éšœæ¢å¤ï¼Œå¯ä»¥èŠèŠzkçš„zabåè®®ã€‚ 11ã€springboot properties yamlè¯»å–é¡ºåº12ã€dubbo properties xmlè¯»å–é¡ºåº13ã€Javaç±»åŠ è½½çš„è¿‡ç¨‹ åŠ è½½ï¼šæŠŠ.classç±»åŠ è½½åˆ°JVMè™šæ‹Ÿä¸­ï¼Œå¹¶ç”Ÿæˆè®¿é—®å…¥å£ é€šè¿‡ç±»çš„å…¨é™å®šåè·å–è¯¥ç±»çš„äºŒè¿›åˆ¶æµ å°†æ”¹äºŒè¿›åˆ¶æµä¸­çš„é™æ€å­˜å‚¨ç»“æ„è½¬æ¢ä¸ºæ–¹æ³•åŒºè¿è¡Œæ—¶æ•°æ®ç»“æ„ åœ¨å†…å­˜ä¸­ç”Ÿæˆè¯¥ç±»çš„Classå¯¹è±¡ï¼Œä½œä¸ºè¯¥ç±»çš„æ•°æ®è®¿é—®å…¥å£ éªŒè¯ï¼šç›®çš„æ˜¯ç¡®ä¿åŠ è½½è¿›.classç±»æ˜¯åˆæ³•çš„ï¼Œå¹¶ä¸”æ˜¯ä¸å±å®³åˆ°JVMè™šæ‹Ÿæœºçš„ã€‚éªŒè¯æœ‰å››ç§åˆ†åˆ«å¦‚ä¸‹ æ–‡ä»¶æ ¼å¼éªŒè¯ã€‚æ˜¯å¦ç¬¦åˆClassæ–‡ä»¶çš„è§„èŒƒã€‚CAFEBABE å…ƒæ•°æ®éªŒè¯ï¼šå¯¹å­—èŠ‚ç æè¿°ä¿¡æ¯è¿›è¡Œè¯­ä¹‰åˆ†æï¼Œè¿™ä¸ªç±»æ˜¯å¦æœ‰çˆ¶ç±»ï¼Œæ˜¯å¦ç»§æ‰¿äº†ä¸èƒ½è¢«ç»§æ‰¿çš„ç±»ç­‰ç­‰ å­—èŠ‚ç éªŒè¯ï¼šé€šè¿‡æ•°æ®æµå’Œæ§åˆ¶æµåˆ†æï¼Œç¡®å®šç¨‹åºè¯­ä¹‰æ˜¯å¦æ­£ç¡®ï¼Œä¸»è¦é’ˆå¯¹æ–¹æ³•ä½“éªŒè¯ã€‚å¦‚ï¼šæ–¹æ³•ä¸­çš„ç±»å‹è½¬æ¢æ˜¯å¦æ­£ç¡®ï¼Œè·³è½¬æ‰§è¡Œæ˜¯å¦æ­£ç¡®ã€‚ ç¬¦å·å¼•ç”¨éªŒè¯ï¼šè¿™ä¸ªåŠ¨ä½œåœ¨åé¢çš„è§£æè¿‡ç¨‹ä¸­å‘ç”Ÿï¼Œä¸»è¦æ˜¯ä¸ºäº†ç¡®ä¿è§£æåŠ¨ä½œèƒ½æ­£ç¡®æ‰§è¡Œã€‚ å‡†å¤‡ï¼šå‡†å¤‡é˜¶æ®µæ˜¯ä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜å¹¶å°†å…¶åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ï¼Œè¿™äº›å†…å­˜éƒ½å°†åœ¨æ–¹æ³•åŒºä¸­è¿›è¡Œåˆ†é…ã€‚å‡†å¤‡é˜¶æ®µä¸åˆ†é…å®ä¾‹å˜é‡çš„å†…å­˜ï¼Œå®ä¾‹å˜é‡å°†ä¼šåœ¨å¯¹è±¡å®ä¾‹åŒ–æ˜¯éšç€å¯¹è±¡ä¸€èµ·åˆ†é…åœ¨Javaå †ä¸­ã€‚ è§£æï¼šè¯¥é˜¶æ®µä¸»è¦å®Œæˆç¬¦å·å¼•ç”¨åˆ°ç›´æ¥å¼•ç”¨çš„è½¬æ¢åŠ¨ä½œã€‚è§£æåŠ¨ä½œä¸ä¸€å®šåœ¨åˆå§‹åŒ–ä¹‹å‰å®Œæˆï¼Œä¹Ÿæœ‰å¯èƒ½åœ¨åˆå§‹åŒ–ä¹‹åå®Œæˆã€‚ åˆå§‹åŒ–ï¼šåˆå§‹åŒ–æ˜¯ç±»åŠ è½½çš„æœ€åä¸€æ­¥ï¼Œå‰é¢çš„ç±»åŠ è½½è¿‡ç¨‹ï¼Œé™¤äº†åœ¨åŠ è½½é˜¶æ®µç”¨æˆ·åº”ç”¨ç¨‹åºèƒ½å¤Ÿé€šè¿‡è‡ªå®šä¹‰ç±»åŠ è½½å™¨ä»¥å¤–ï¼Œå…¶ä»–åŠ¨ä½œå®Œå…¨ç”±è™šæ‹Ÿæœºä¸»å¯¼å’Œæ§åˆ¶ã€‚åˆ°äº†åˆå§‹åŒ–é˜¶æ®µï¼Œæ‰å¼€å§‹çœŸæ­£æ‰§è¡Œç±»ä¸­å®šä¹‰çš„javaç¨‹åºä»£ç ã€‚ ä½¿ç”¨ å¸è½½ 14ã€ç±»åŠ è½½å™¨ å¯åŠ¨ç±»åŠ è½½å™¨ï¼šBootstrapClassLoaderã€‚åŠ è½½jre/lib/ä¸‹çš„ç±»ã€‚ æ‰©å±•ç±»åŠ è½½å™¨ï¼šExtensionsClassLoaderï¼šç”¨æ¥åŠ è½½Javaçš„æ‰©å±•åº“ã€‚åŠ è½½jre/ext/lib/ä¸‹çš„ç±» ç³»ç»Ÿç±»åŠ è½½å™¨ï¼šSystemClassLoaderï¼šåŠ è½½ç”¨æˆ·çš„ç±»è·¯å¾„classPathä¸‹çš„class ç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼šé€šè¿‡åŠ æˆjava.lang.ClassLoaderç±»æ–¹å¼åŠ è½½ 15ã€ åŒäº²å§”æ´¾å½“ä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°ç±»åŠ è½½è¯·æ±‚æ—¶å€™ï¼Œä¸ä¼šè‡ªå·±å…ˆå»åŠ è½½è¿™ä¸ªç±»ï¼Œè€Œæ˜¯å§”æ´¾çˆ¶ç±»åŠ è½½ï¼Œä¸€åªåˆ°é¡¶å±‚çš„BootstrapClassLoader,å¦‚æœè¿˜æ²¡æœ‰åŠ è½½åˆ°ï¼Œé‚£ä¹ˆæ‰ç”±å­ç±»åŠ è½½ã€‚ 16ã€æ•°æ®ä¸€è‡´æ€§åè®®åˆ†å¸ƒå¼ç³»ç»Ÿéœ€è¦ç»´æŠ¤å¤šä¸ªå‰¯æœ¬æ¥è¿›è¡Œå®¹é”™ï¼Œæä¾›ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚è¦å®ç°æ¬¡ç›®æ ‡ï¼Œå°±å¿…é¡»è¦è§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿçš„æœ€æ ¸å¿ƒé—®é¢˜ï¼šç»´æŠ¤å¤šä¸ªå‰¯æœ¬çš„ä¸€è‡´æ€§ã€‚ zabåè®®Raftåè®®æ ¸å¿ƒæµç¨‹åˆ†ä¸ºä¸€ä¸‹å‡ æ­¥ é€‰ä¸»(Leader Election) æ¯ä¸€ä¸ªå‰¯æœ¬éƒ½å¯ä»¥åˆ†ä¸ºä¸‰ç§è§’è‰²ã€‚Loaderã€Followerã€Candidate Candidateä»£è¡¨ä¸»èŠ‚ç‚¹æ•…éšœï¼Œæ­£åœ¨é€‰ä¸¾è¿‡ç¨‹ã€‚ æ—¥å¿—å¤åˆ¶(Log Replication) æ—¥å¿—å‹ç¼©(Log compaction) HashMapæ•´ç†ï¼šHashMapæ˜¯ä¸€ä¸ªç”¨äºå­˜å‚¨key-valueé”®å€¼å¯¹çš„é›†åˆï¼Œæ¯ä¸ªé”®å€¼å¯¹æˆ‘ä»¬é€šå¸¸ç§°ä¸ºä¸ºä¸€ä¸ªentryã€‚è¿™äº›é”®å€¼å¯¹åˆ†æ•£å­˜å‚¨åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œè¿™ä¸ªæ•°ç»„å°±æ˜¯HashMapçš„ä¸»å¹²ã€‚ JDK1.8ä¸‹çš„æ•°æ®ç»“æ„ 123456789101112131415public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable &#123; // çœç•¥å…¶ä»–ä»£ç  /* ---------------- Fields -------------- */ transient Node&lt;K,V&gt;[] table; transient Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet; transient int size; transient int modCount; int threshold; final float loadFactor;&#125; 123456789101112131415static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final int hash; final K key; V value; Node&lt;K,V&gt; next; Node(int hash, K key, V value, Node&lt;K,V&gt; next) &#123; this.hash = hash; this.key = key; this.value = value; this.next = next; &#125; // å…¶ä»–ä»£ç ....&#125; HashMapæä¾›äº†ä¸¤ä¸ªæ ¸å¿ƒçš„æ–¹æ³•ï¼Œput(key,value); get(key); put(key,value) é€šè¿‡hash(key)è·å–æ•°ç»„çš„ä½ç½®ã€‚ å¦‚æœä½ç½®ä¸ºç©ºï¼ŒæŠŠkey,valueåŒ…è£…æˆEntryæ”¾å…¥ç›¸åº”çš„ä½ç½® å¦‚æœä½ç½®ä¸ä¸ºç©ºï¼Œé¦–å…ˆåˆ¤æ–­æ•°æ®ç»“æ„æ˜¯æ ‘ï¼Œé‚£ä¹ˆæŠŠèŠ‚ç‚¹æ”¾å…¥æ ‘ç§ çœ‹ä¸‹ç›®å‰çš„é“¾è¡¨æ•°ç›®æ˜¯å¦å·²ç»å†æ”¾ä¸€ä¸ªèŠ‚ç‚¹ä¼šè¿›è¡Œæ ‘åŒ–ï¼Œå¦‚æœæ˜¯å°±æ ‘åŒ– å¦åˆ™ç›´æ¥æ”¾åœ¨è¿™ä¸ªé“¾è¡¨ä¸Š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public V put(K key, V value) &#123; return putVal(hash(key), key, value, false, true); &#125; final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; if ((tab = table) == null || (n = tab.length) == 0) n = (tab = resize()).length; if ((p = tab[i = (n - 1) &amp; hash]) == null) tab[i] = newNode(hash, key, value, null); else &#123; Node&lt;K,V&gt; e; K k; if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) e = p; else if (p instanceof TreeNode) e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value); else &#123; for (int binCount = 0; ; ++binCount) &#123; if ((e = p.next) == null) &#123; p.next = newNode(hash, key, value, null); if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st treeifyBin(tab, hash); break; &#125; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) break; p = e; &#125; &#125; if (e != null) &#123; // existing mapping for key V oldValue = e.value; if (!onlyIfAbsent || oldValue == null) e.value = value; afterNodeAccess(e); return oldValue; &#125; &#125; ++modCount; if (++size &gt; threshold) resize(); afterNodeInsertion(evict); return null; &#125; get1ã€å¯¹keyè¿›è¡Œhash. 2ã€ 123456789101112131415161718192021222324public V get(Object key) &#123; Node&lt;K,V&gt; e; return (e = getNode(hash(key), key)) == null ? null : e.value; &#125; final Node&lt;K,V&gt; getNode(int hash, Object key) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n; K k; if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (first = tab[(n - 1) &amp; hash]) != null) &#123; if (first.hash == hash &amp;&amp; // always check first node ((k = first.key) == key || (key != null &amp;&amp; key.equals(k)))) return first; if ((e = first.next) != null) &#123; if (first instanceof TreeNode) return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key); do &#123; if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) return e; &#125; while ((e = e.next) != null); &#125; &#125; return null; &#125; 17ã€çº¿ç¨‹çš„å‡ ç§çŠ¶æ€åŠå…¶è½¬æ¢æ“ä½œç³»ç»Ÿ æ–°å»º(new) å°±ç»ª(Runnable) è¿è¡Œ(Running) é˜»å¡(Blocked) è¿è¡Œç»“æŸ(Dead)JAVA çº¿ç¨‹çŠ¶æ€ NEW RUNNABLE BLOCKED WAITING TIME_WAITING TERMINAL ä¸ºä»€ä¹ˆJavaçš„çº¿ç¨‹çŠ¶æ€æœ‰å…­ä¸­çŠ¶æ€ JWT JSON WEB TOKEN header reload signature 18ã€ConcurrentHash çº¿ç¨‹å®‰å…¨çš„key-valueé›†åˆç±»ï¼Œç›¸å¯¹äºHashtable ä½¿ç”¨äº†åˆ†æ®µé”çš„è®¾è®¡åŸåˆ™ã€‚ 1ã€JDK1.7123456789101112131415161718public class ConcurrentHashMap&lt;K, V&gt; extends AbstractMap&lt;K, V&gt; implements ConcurrentMap&lt;K, V&gt;, Serializable &#123; // é€šè¿‡åˆ†æ®µå¼é”è¿›è¡Œ final Segment&lt;K,V&gt;[] segments; // Segementå®ç°å¯é‡å…¥é”çš„å®ç° static final class Segment&lt;K,V&gt; extends ReentrantLock implements Serializable &#123; transient volatile HashEntry&lt;K,V&gt;[] table; &#125; static final class HashEntry&lt;K,V&gt; &#123; final int hash; final K key; volatile V value; volatile HashEntry&lt;K,V&gt; next;&#125; 12345678910111213public V put(K key, V value) &#123; Segment&lt;K,V&gt; s; // ConcurrentHashMapä¸æ”¯æŒkeyå’Œvalueä¸ºnull if (value == null) throw new NullPointerException(); int hash = hash(key); int j = (hash &gt;&gt;&gt; segmentShift) &amp; segmentMask; if ((s = (Segment&lt;K,V&gt;)UNSAFE.getObject // nonvolatile; recheck (segments, (j &lt;&lt; SSHIFT) + SBASE)) == null) // in ensureSegment s = ensureSegment(j); // æœ€ç»ˆä½¿ç”¨çš„æ˜¯Segementçš„putæ–¹æ³• return s.put(key, hash, value, false); &#125; Segement ReetrantLock çº¿ç¨‹å®‰å…¨ 2ã€JDK1.81.8 Synchonized+CASä¹è§‚é” CASåœ¨æŸ¥æ‰¾æ›¿æ¢ï¼Œ1.8é”å¤´èŠ‚ç‚¹ 19ã€Mysqlçš„MVCC MVCC(Multi-version concurrency control)åˆå«åšå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ã€‚ä»£æ›¿é”æ¥å®ç°æ•°æ®åº“çš„éš”ç¦»æ€§ã€‚ åœ¨InnoDBçš„èšç°‡ç´¢å¼•ä¸­ï¼Œå±€ä¿ƒç´¢å¼•ä¸­æœ‰ä¸¤ä¸ªå¿…è¦çš„éšè—åˆ— Trx_idï¼šè¿™ä¸ªIDç”¨æ¥å‚¨å­˜æ¯æ¬¡å¯¹è¯¥æ¡ä¸¾æªç´¢å¼•è®°å½•è¿›è¡Œä¿®æ”¹çš„äº‹åŠ¡IDã€‚é€’å¢ã€‚ roll_pointï¼šå­˜å‚¨ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆè¿™æ¡èšç°‡ç´¢å¼•çš„ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„ä½ç½®ï¼Œé€šè¿‡ä»–è·å–ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„è®°å½•ä¿¡æ¯ã€‚ MVCCåªåœ¨æ•°æ®åº“éš”ç¦»ç•Œåˆ«ä¸ºè¯»å·²æäº¤(RC)ï¼Œå¯é‡å¤åº¦è¯»(RR)ä¸¤ç§æ¨¡å¼ä¸‹ç”Ÿæ•ˆã€‚å…¶ä»–æ¨¡å¼ä¸å…¼å®¹ã€‚ Mysqlé€šè¿‡undo logå®ç°äº†æ•°æ®çš„å¤šç‰ˆæœ¬ 20ã€volatileä½œç”¨ valatileä¿®é¥°çš„å˜é‡èƒ½å¤Ÿä¿è¯å¯è§æ€§ï¼Œå¹¶é˜²æ­¢æŒ‡ä»¤é‡æ’åº synchonizedä¿®é¥°çš„ä»£ç å—èƒ½å¤Ÿä¿è¯ä»£ç çš„åŸå­æ€§å’Œå¯è§æ€§ã€‚ valitileèƒ½è§£å†³ ä¿è¯äº†ä¸åŒçº¿ç¨‹å¯¹è¯¥å˜é‡æ“ä½œçš„å†…å­˜å¯è§æ€§ ç¦æ­¢æŒ‡ä»¤é‡æ’åº ä½†æ˜¯ä¸èƒ½ä¿è¯æ“ä½œçš„åŸå­æ€§ Javaè™šæ‹Ÿæœºè§„èŒƒè¯•å›¾å®šä¹‰ä¸€ç§Javaå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰,æ¥å±è”½æ‰å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚ï¼Œè®©Javaç¨‹åºåœ¨å„ç§å¹³å°ä¸Šéƒ½èƒ½è¾¾åˆ°ä¸€è‡´çš„å†…å­˜è®¿é—®æ•ˆæœã€‚ç®€å•æ¥è¯´ï¼Œç”±äºCPUæ‰§è¡ŒæŒ‡ä»¤çš„é€Ÿåº¦æ˜¯å¾ˆå¿«çš„ï¼Œä½†æ˜¯å†…å­˜è®¿é—®çš„é€Ÿåº¦å°±æ…¢äº†å¾ˆå¤šï¼Œç›¸å·®çš„ä¸æ˜¯ä¸€ä¸ªæ•°é‡çº§ï¼Œæ‰€ä»¥æå¤„ç†å™¨çš„é‚£ç¾¤å¤§ä½¬ä»¬åˆåœ¨CPUé‡ŒåŠ äº†å¥½å‡ å±‚é«˜é€Ÿç¼“å­˜ã€‚ vaitileèƒ½è§£å†³å¹¶å‘é—®é¢˜ä¸­çš„æœ‰åºæ€§å’Œå¯è§æ€§ï¼ŒæŒ‰æ—¶ 21ã€Redisçš„rehashå†…éƒ¨å®ç°åœ¨redisä¸­ï¼Œé”®å€¼å¯¹(key-value pair)ï¼Œå­—å…¸åº•å±‚æ˜¯é€šè¿‡å“ˆå¸Œåˆ—æ¥å®ç°çš„ï¼Œé€šè¿‡å“ˆå¸Œè¡¨ä¸­çš„èŠ‚ç‚¹ä¿å­˜å­—æ®µä¸­çš„é”®å€¼å¯¹ã€‚ 1234567/* hashè¡¨ç»“æ„å®šä¹‰ */typedef struct dictht &#123; dictEntry **table; // å“ˆå¸Œè¡¨æ•°ç»„ unsigned long size; // å“ˆå¸Œè¡¨çš„å¤§å° unsigned long sizemask; // å“ˆå¸Œè¡¨å¤§å°æ©ç  unsigned long used; // å“ˆå¸Œè¡¨ç°æœ‰èŠ‚ç‚¹çš„æ•°é‡&#125; dictht; 123456789101112/* å“ˆå¸Œæ¡¶ */typedef struct dictEntry &#123; void *key; // é”®å®šä¹‰ // å€¼å®šä¹‰ union &#123; void *val; // è‡ªå®šä¹‰ç±»å‹ uint64_t u64; // æ— ç¬¦å·æ•´å½¢ int64_t s64; // æœ‰ç¬¦å·æ•´å½¢ double d; // æµ®ç‚¹å‹ &#125; v; struct dictEntry *next; //æŒ‡å‘ä¸‹ä¸€ä¸ªå“ˆå¸Œè¡¨èŠ‚ç‚¹&#125; dictEntry; Redis å“ˆå¸Œè¡¨ä¸­çš„tableæ•°ç»„å­˜æ”¾ç€å“ˆå¸Œæ¡¶ç»“æ„ï¼ˆdictEntryï¼‰ï¼Œé‡Œé¢å°±æ˜¯Redisçš„é”®å€¼å¯¹ï¼›ç±»ä¼¼Javaå®ç°çš„HashMapï¼ŒRedisçš„dictEntryä¹Ÿæ˜¯é€šè¿‡é“¾è¡¨ï¼ˆnextæŒ‡é’ˆï¼‰æ–¹å¼æ¥è§£å†³hashå†²çªï¼š Redis Dict ä¸­å®šä¹‰äº†ä¸¤å¼ å“ˆå¸Œè¡¨ï¼Œæ˜¯ä¸ºäº†åç»­å­—å…¸çš„æ‰©å±•ä½œRehashä¹‹ç”¨ï¼š 123456789/* å­—å…¸ç»“æ„å®šä¹‰ */typedef struct dict &#123; dictType *type; // å­—å…¸ç±»å‹ void *privdata; // ç§æœ‰æ•°æ® dictht ht[2]; // å“ˆå¸Œè¡¨[ä¸¤ä¸ª] long rehashidx; // è®°å½•rehash è¿›åº¦çš„æ ‡å¿—ï¼Œå€¼ä¸º-1è¡¨ç¤ºrehashæœªè¿›è¡Œ int iterators; // å½“å‰æ­£åœ¨è¿­ä»£çš„è¿­ä»£å™¨æ•°&#125; dict; ![image-20220316144721437](/Users/admin/Library/Application Support/typora-user-images/image-20220316144721437.png) æ€»ç»“ä¸€ä¸‹ï¼š åœ¨Clusteræ¨¡å¼ä¸‹ï¼Œä¸€ä¸ªRediså®ä¾‹å¯¹åº”ä¸€ä¸ªRedisDB(db0); ä¸€ä¸ªRedisDBå¯¹åº”ä¸€ä¸ªDict; ä¸€ä¸ªDictå¯¹åº”2ä¸ªDicthtï¼Œæ­£å¸¸æƒ…å†µåªç”¨åˆ°ht[0]ï¼›ht[1] åœ¨Rehashæ—¶ä½¿ç”¨ã€‚ 22ã€AQS AbstractQueueSynconizer,ä¸­æ–‡åä¸ºæŠ½è±¡çš„é˜Ÿåˆ—åŒæ­¥å™¨ï¼Œåœ¨AQSå†…éƒ¨æœ‰ä¸€ä¸ªèµ„æºè®¿é—®çš„çŠ¶æ€statuså’Œä¸€ä¸ªFIFOçš„åŒå‘é˜Ÿåˆ—ï¼Œç”¨æ¥ä¿å­˜ç­‰å¾…å…±äº«èµ„æºçš„å˜é‡çš„ç­‰å¾…çº¿ç¨‹ã€‚åŸºæœ¬ä¸ŠjucåŒ…ä¸‹çš„å¹¶å‘ç±»éƒ½æ˜¯åŸºäºAQSæ¥å®ç°çš„ï¼Œæ¯”å¦‚ReentratLock,Semaphore,CountDownLatch,CyclicBarrierç­‰ 1ã€semaphore ä¿¡å·é‡ï¼ŒjucåŒ…ä¸‹çš„å·¥å…·ç±»ï¼Œç”¨æ¥å…¬èŒåŒäº‹è®¿é—®ç‰¹å®šèµ„æºçš„çº¿ç¨‹æ•°ã€‚ï¼Œå†…éƒ¨å†…ç½®äº†Syné”ï¼ŒåŸºäºAQSå®ç°ã€‚ æ ¸å¿ƒæ–¹æ³•æœ‰acquireå’Œrelease(); 12345678910111213141516171819202122232425262728293031static class Task extends Thread &#123; Semaphore semaphore; public Task(Semaphore semaphore, String tname) &#123; super(tname); this.semaphore = semaphore; //this.setName(tname); &#125; public void run() &#123; try &#123; //semaphore.acquireUninterruptibly(); semaphore.acquire();//è·å–å…¬å…±èµ„æº System.out.println(Thread.currentThread().getName() + &quot;:aquire() at time:&quot; + System.currentTimeMillis()); Thread.sleep(5000); semaphore.release(); /*if(semaphore.tryAcquire(500,TimeUnit.MILLISECONDS))&#123; System.out.println(Thread.currentThread().getName()+&quot;:aquire() at time:&quot;+System.currentTimeMillis()); Thread.sleep(5000); semaphore.release();//é‡Šæ”¾å…¬å…±èµ„æº &#125;else&#123; fallback(); &#125;*/ &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; Acquire()å¯ä»¥ç›¸åº”ä¸­æ–­ï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚ 2ã€CountDownLatch ConntDownLatchæ˜¯JDKæä¾›çš„åŒæ­¥å·¥å…·ï¼Œå¯ä»¥è®©ä¸€ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹ç­‰å¾…ï¼Œä¸€è‡´ç­‰å¾…å…¶ä»–çº¿ç¨‹å®Œæˆä¸€ç»„æ“ä½œã€‚ countDown()ã€‚è®¡æ•°å™¨å‡1.å½“è°ƒç”¨await()æ–¹æ³•æ—¶ï¼Œè®¡æ•°å™¨åŠ 1.å½“è®¡æ•°å™¨å¤§äº0æ—¶å€™çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œä¸€è‡´åˆ°è®¡æ•°å™¨ æ ¸å¿ƒæ–¹æ³•ï¼ŒcountDown(),await(); 3ã€CyclicBarrier ä¸€ä¸ªåŒæ­¥è¾…åŠ©ï¼Œä»–å…è®¸ä¸€ç»„çº¿ç¨‹çš„æ‰€æœ‰ç­‰å¾…åŒæ—¶è¾¾åˆ°å…±åŒå±éšœç‚¹ æ ¸å¿ƒæ–¹æ³•awate()","categories":[{"name":"é¢è¯•çŸ¥è¯†","slug":"é¢è¯•çŸ¥è¯†","permalink":"https://zhangyong3214.github.io/categories/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"åç«¯æŠ€æœ¯","slug":"åç«¯æŠ€æœ¯","permalink":"https://zhangyong3214.github.io/tags/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/"}]},{"title":"","slug":"çŸ¥è¯†æ•´ç†/SpringçŸ¥è¯†æ•´ç†","date":"2022-04-05T09:32:31.588Z","updated":"2022-04-05T09:32:31.589Z","comments":true,"path":"2022/04/05/çŸ¥è¯†æ•´ç†/SpringçŸ¥è¯†æ•´ç†/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/05/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/Spring%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/","excerpt":"","text":"SpringçŸ¥è¯†ç‚¹Spring åº•å±‚æ ¸å¿ƒåŸç†è§£æApplicationContext123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960public interface ApplicationContext extends EnvironmentCapable, ListableBeanFactory, HierarchicalBeanFactory, MessageSource, ApplicationEventPublisher, ResourcePatternResolver &#123; /** * Return the unique id of this application context. * @return the unique id of the context, or &#123;@code null&#125; if none */ @Nullable String getId(); /** * Return a name for the deployed application that this context belongs to. * @return a name for the deployed application, or the empty String by default */ String getApplicationName(); /** * Return a friendly name for this context. * @return a display name for this context (never &#123;@code null&#125;) */ String getDisplayName(); /** * Return the timestamp when this context was first loaded. * @return the timestamp (ms) when this context was first loaded */ long getStartupDate(); /** * Return the parent context, or &#123;@code null&#125; if there is no parent * and this is the root of the context hierarchy. * @return the parent context, or &#123;@code null&#125; if there is no parent */ @Nullable ApplicationContext getParent(); /** * Expose AutowireCapableBeanFactory functionality for this context. * &lt;p&gt;This is not typically used by application code, except for the purpose of * initializing bean instances that live outside of the application context, * applying the Spring bean lifecycle (fully or partly) to them. * &lt;p&gt;Alternatively, the internal BeanFactory exposed by the * &#123;@link ConfigurableApplicationContext&#125; interface offers access to the * &#123;@link AutowireCapableBeanFactory&#125; interface too. The present method mainly * serves as a convenient, specific facility on the ApplicationContext interface. * &lt;p&gt;&lt;b&gt;NOTE: As of 4.2, this method will consistently throw IllegalStateException * after the application context has been closed.&lt;/b&gt; In current Spring Framework * versions, only refreshable application contexts behave that way; as of 4.2, * all application context implementations will be required to comply. * @return the AutowireCapableBeanFactory for this context * @throws IllegalStateException if the context does not support the * &#123;@link AutowireCapableBeanFactory&#125; interface, or does not hold an * autowire-capable bean factory yet (e.g. if &#123;@code refresh()&#125; has * never been called), or if the context has been closed already * @see ConfigurableApplicationContext#refresh() * @see ConfigurableApplicationContext#getBeanFactory() */ AutowireCapableBeanFactory getAutowireCapableBeanFactory() throws IllegalStateException;&#125; ApplicationContextæˆ‘ä»¬é€šå¸¸ç§°ä¹‹ä¸ºSpringçš„ä¸Šä¸‹æ–‡ï¼ŒåŸºæœ¬ä¸ŠSpringçš„æ ¸å¿ƒæ“ä½œéƒ½èƒ½é€šè¿‡è¿™ä¸ªä¸Šçº¿æ–‡è·å–ã€‚ Springçš„beanå‰ææ¡ä»¶ Beançš„åˆ›å»ºçš„ç”Ÿå‘½å‘¨æœŸ xxxService â€“&gt;å®¹å™¨åˆå§‹åŒ–(äº§ç”Ÿä¸€ä¸ªå¯¹è±¡)â€“&gt;ä¾èµ–æ³¨å…¥(å±æ€§èµ‹å€¼)-&gt;åˆå§‹åŒ–å‰-&gt;åˆå§‹åŒ–â€“&gt;åˆå§‹åŒ–å-&gt;Springçš„bean Springä¸Šçº¿æ–‡çš„åˆå§‹åŒ– æ‰«æbean åˆ›å»ºéæ‡’åŠ è½½çš„å•ä¾‹bean BeanDefinition AbstractBeanDefinition AnnotatedBeanDefinition GenericBeanDefinition AnnotatedGenericBeanDefinition ScannerGenericBeanDefinition BeanDefinitionReader AnnotatedBeanDefinitionReaderï¼šè¯»å–æ³¨è§£çš„reader,æŠŠä¸€ä¸ªæ™®é€šç±»è½¬æ¢ä¸ºä¸€ä¸ªSpringå®¹å™¨çš„Beanå®šä¹‰(BeanDefinition) XmlBeanFefinitionReaderï¼šxmlå®šä¹‰çš„è¯»å–å™¨ï¼Œè·å– ClassPathBeanDefinitionScannerï¼šæ‰«æå™¨ï¼Œé€šè¿‡è¾“å…¥çš„è·¯å¾„è¿›è¡Œæ‰«æ BeanFactoryDefautListableBeanFactory ApplicationContextç±»å‹è½¬æ¢Property ConditionConverter SimpleTypeConverter æ¯”è¾ƒå™¨OrderComparator MetadataReaderè¯»å–ä¸€ä¸ªç±»çš„å…ƒæ•°æ®ï¼Œè§£æç±»ã€‚ FactoryBeanConfigirableListableBeanFactoryConfigurable å¯é…ç½® Listable å¯åˆ—ä¸¾ ç±»å‹è½¬æ¢å™¨ 1beanFactory.addPropertyEditorRegistrar(new ResourceEditorRegistrar(this, getEnvironment())); é»˜è®¤beanPostProcesssor 123456beanFactory.addBeanPostProcessor(new ApplicationContextAwareProcessor(this));beanFactory.addBeanPostProcessor(new ApplicationListenerDetector(this));## é€šè¿‡ç¯å¢ƒå˜é‡ å¿½ç•¥æ¥å£ 1234567beanFactory.ignoreDependencyInterface(EnvironmentAware.class);beanFactory.ignoreDependencyInterface(EmbeddedValueResolverAware.class);beanFactory.ignoreDependencyInterface(ResourceLoaderAware.class);beanFactory.ignoreDependencyInterface(ApplicationEventPublisherAware.class);beanFactory.ignoreDependencyInterface(MessageSourceAware.class);beanFactory.ignoreDependencyInterface(ApplicationContextAware.class);beanFactory.ignoreDependencyInterface(ApplicationStartupAware.class); è§£æå®ç° 1234beanFactory.registerResolvableDependency(BeanFactory.class, beanFactory);beanFactory.registerResolvableDependency(ResourceLoader.class, this);beanFactory.registerResolvableDependency(ApplicationEventPublisher.class, this);beanFactory.registerResolvableDependency(ApplicationContext.class, this); HierarchicalMessageSourceSpring beançš„æ‰«æè¿‡ç¨‹Spring beanåˆå§‹åŒ– å®ä¾‹åŒ–å‰: InstantiationAwareBeanPostProcessor.postProcessBeforeInstantiation() ã€‚æœ‰å°±ç›´æ¥è¿”å›ï¼Œç»™ç”¨æˆ·æä¾›äº†è‡ªå·±å®ä¾‹åŒ–beançš„æœºä¼š(å¦‚æœæœ‰çš„è¯) @Resourceé€šè¿‡CommonAnnotationBeanPostProcessor å¾ªç¯ä¾èµ– å®ä¾‹åŒ–AService å¡«å……BServiceå±æ€§ â€“&gt;å»å•ä¾‹æ± æ‰¾BServiceâ€“&gt;æ²¡æœ‰åˆ™åˆ›å»ºBService å®ä¾‹åŒ–BServiceâ€“&gt;å¾—åˆ°äº†å¯¹è±¡ å¡«å……AServiceå±æ€§â€“&gt;å»å•ä¾‹æ± æ‰¾AService-&gt;æ²¡æœ‰åˆ™åˆ›å»ºAServiceã€‚ã€‚ã€‚(ä¹Ÿæ‰¾ä¸åˆ°) å¡«å……å…¶ä»–å±æ€§ â€“&gt; åˆå§‹åŒ–å‰ã€åˆå§‹åŒ– åˆå§‹åŒ–å æ”¾å…¥å•ä¾‹æ±  ä¸‰çº§ç¼“å­˜ singletonObjectsï¼šå•ä¾‹æ± ã€‚å®Œæˆäº†å®Œæ•´ç”Ÿå‘½å‘¨æœŸçš„å•ä¾‹bean. earlySingletonObjectsï¼šåªè¿›è¡Œäº†å®ä¾‹åŒ–ï¼Œè¿˜æ²¡æœ‰è¿›è¡Œæ•°æ®èµ‹å€¼çš„å¯¹è±¡ã€‚è§£å†³å¾ªç¯ä¾èµ–ï¼Œè§£å†³å•ä¾‹çš„æƒ…å†µ singletonFacoriesï¼šå‡ºç°å¾ªç¯ä¿¡èµ–æ—¶å€™ï¼Œåˆ›å»ºbeançš„lambdaè¡¨è¾¾å¼ã€‚ earlyProxyObjectsï¼šå› ä¸ºå¾ªç¯ä¿¡èµ–æå‰è¿›è¡Œäº†AOPçš„å¯¹è±¡æ±  Springå¾ªç¯ä¾èµ–åªèƒ½è§£å†³å•ä¾‹çš„æƒ…å†µï¼Œå¦‚æœæ˜¯åŸå‹çš„æƒ…å†µä¸‹æ˜¯æ”¯æŒä¸äº†çš„ æ„é€ æ–¹æ³•çš„å¾ªç¯ä¾èµ–ï¼Œæƒ…å†µç›´æ¥ç”¨ä¹Ÿæ˜¯ä¸è¡Œçš„ï¼Œéœ€è¦ç”¨@Lazy BeanProcessonå’Œadvise","categories":[],"tags":[]},{"title":"Javaä¸­çš„å„ç§O","slug":"çŸ¥è¯†æ•´ç†/0ã€Javaä¸­çš„å„ç§O","date":"2022-04-05T09:32:31.587Z","updated":"2022-04-05T09:32:31.587Z","comments":true,"path":"2022/04/05/çŸ¥è¯†æ•´ç†/0ã€Javaä¸­çš„å„ç§O/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/05/%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/0%E3%80%81Java%E4%B8%AD%E7%9A%84%E5%90%84%E7%A7%8DO/","excerpt":"","text":"0ã€Javaä¸­çš„å„ç§O1ã€POJO Plain Ordinary Java Object ç®€å•Javaå¯¹è±¡ã€‚ ç®€å•çš„Javaå¯¹è±¡ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„JavaBeansã€‚ä½¿ç”¨POJOæ˜¯ä¸ºäº†é¿å…å’ŒEJBæ··æ·†èµ·æ¥ï¼Œè€Œä¸”ç®€ç§°æ¯”è¾ƒç›´æ¥ã€‚å…¶ä¸­æœ‰ä¸€äº›å±æ€§åŠå…¶getter/setteræ–¹æ³•çš„ç±»ï¼Œæ²¡æœ‰ä¸šåŠ¡é€»è¾‘ã€‚æœ‰æ—¶å€™å¯ä»¥ä½œä¸ºVOæˆ–è€…DTOæ¥ä½¿ç”¨ã€‚ 2ã€PO Presistant Object æŒä¹…åŒ–å¯¹è±¡ å®ƒä»¬æ˜¯ä¸€ç»„å±æ€§å’Œå±æ€§çš„setter/getteræ–¹æ³•ç»„æˆã€‚åŸºäºO/Ræ˜ å°„å‡ºç°çš„æ¦‚å¿µã€‚å±æ€§é€šå¸¸å¯¹åº”æ•°æ®åº“/æ•°æ®æ¨¡å‹ï¼Œå¹¶ä¸”æœ¬èº«ä¹Ÿå°±å¯ä»¥æœ‰ä¸€äº›ä¸šåŠ¡é€»è¾‘çš„å¤„ç†ï¼Œå¯ä»¥çœ‹åšæ˜¯æ•°æ®åº“è¡¨æ˜ å°„çš„å¯¹è±¡ã€‚ 3ã€BO Business Object ä¸šåŠ¡å¯¹è±¡ ä¸šåŠ¡å¯¹è±¡å°±æ˜¯å°†ä¸šåŠ¡æŠ½è±¡é€»è¾‘å°è£…æˆçš„å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å¯ä»¥åŒ…å«å¾ˆå¤šç§å…¶ä»–å¯¹è±¡ï¼Œæ¯”å¦‚DAOä½œä¸ºæ•°æ®åº“è®¿é—®ï¼Œæˆ–è€…DTOä½œä¸ºä¸šåŠ¡æ•°æ®çš„ä¼ é€’ï¼Œä¹Ÿå¯ä»¥æŒæœ‰å¾ˆå¤šçš„POJOå¯¹è±¡ã€‚ 4ã€DO Domain Object é¢†åŸŸå¯¹è±¡ å°±æ˜¯ä»æ˜¾ç¤ºä¸–ç•Œä¸­æŠ½è±¡å‡ºæ¥çš„æœ‰å½¢æˆ–è€…æ— å½¢çš„ä¸šåŠ¡å®ä½“ 5ã€DAO Data Access Obejct æ•°æ®è®¿é—®å¯¹è±¡ ä¸€èˆ¬æŒ‡æ•°æ®åº“çš„è®¿é—®å¯¹è±¡ã€‚ç›¸å½“äºä¸€ä¸ªæ•°æ®çš„è®¿é—®æ¥å£ã€‚åŠ åœ¨ä¸šåŠ¡å±‚å’Œæ•°æ®å±‚ä¸­é—´ã€‚é€šè¿‡è°ƒç”¨DAOçš„æ–¹æ³•ï¼Œä¸šåŠ¡å±‚å¯ä»¥è·å–ä¸€ä¸ªæˆ–è€…å¤šä¸ªPOæ•°æ®ã€‚ 6ã€ DTO Data Transfer Object æ•°æ®ä¼ è¾“å¯¹è±¡ ä¸€èˆ¬åªç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼Œå±•ç¤ºå±‚å’ŒæœåŠ¡å±‚ï¼Œåº”ç”¨é—´ä¸ºä¼ é€’æ•°æ®è€Œå°è£…çš„å¯¹è±¡ã€‚å†…éƒ¨å¯ä»¥åŒ…å«å¾ˆå¤šVOå’ŒPOJO 7ã€ VO Value Object å€¼å¯¹è±¡ é€šå¸¸ç”¨äºä¸šåŠ¡å±‚ä¹‹é—´çš„æ•°æ®ä¼ é€’å’ŒPOä¸€æ ·ä¹Ÿä»…ä»…åŒ…å«æ•°æ®è€Œå·²ã€‚ä½†åº”å¯¹æŠ½è±¡çš„ä¸šåŠ¡å¯¹è±¡ï¼Œå¯ä»¥å’Œè¡¨å¯¹åº”ï¼Œä¹Ÿå¯ä»¥ä¸ï¼Œè¿™ä¸ªéœ€è¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œç”¨new å…³é”®å­—åˆ›å»ºï¼Œç”±GCå›æ”¶ã€‚","categories":[{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"https://zhangyong3214.github.io/categories/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"}],"tags":[{"name":"åç«¯æŠ€æœ¯","slug":"åç«¯æŠ€æœ¯","permalink":"https://zhangyong3214.github.io/tags/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/"}]},{"title":"ä¼ä¸šå¼€å‘è§„èŒƒå’ŒæŠ€å·§","slug":"å¼€å‘å·¥ä½œ/å¼€å‘è§„èŒƒå’ŒæŠ€å·§","date":"2022-04-05T09:32:31.586Z","updated":"2022-04-05T09:32:31.586Z","comments":true,"path":"2022/04/05/å¼€å‘å·¥ä½œ/å¼€å‘è§„èŒƒå’ŒæŠ€å·§/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/05/%E5%BC%80%E5%8F%91%E5%B7%A5%E4%BD%9C/%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E5%92%8C%E6%8A%80%E5%B7%A7/","excerpt":"","text":"å¼€å‘è§„èŒƒå‰è¨€â€‹ æ²¡æœ‰çœ‹è¿‡é˜¿é‡Œå¼€å‘è§„èŒƒçš„åŒå­¦å¯ä»¥å…ˆé˜…è¯»ä¸€éè§„èŒƒé‡Œé¢çš„å†…å®¹ï¼Œã€ŠJava å¼€å‘æ‰‹å†Œã€‹æ˜¯é˜¿é‡Œå·´å·´é›†å›¢æŠ€æœ¯å›¢é˜Ÿçš„é›†ä½“æ™ºæ…§ç»“æ™¶å’Œç»éªŒæ€»ç»“ï¼Œç»å†äº†å¤šæ¬¡å¤§è§„æ¨¡ä¸€ çº¿å®æˆ˜çš„æ£€éªŒåŠä¸æ–­å®Œå–„ï¼Œå…¬å¼€åˆ°ä¸šç•Œåï¼Œä¼—å¤šç¤¾åŒºå¼€å‘è€…è¸Šè·ƒå‚ä¸ï¼Œå…±åŒæ‰“ç£¨å®Œå–„ï¼Œç³»ç»ŸåŒ–åœ°æ•´ç† æˆå†Œã€‚ä¸ºæé«˜è½¯ä»¶çš„æœ€ç»ˆäº¤ä»˜è´¨é‡ï¼Œäº”èŠ±å…«é—¨çš„é”™è¯¯ç äººä¸ºåœ° å¢åŠ æ’æŸ¥é—®é¢˜çš„éš¾åº¦;æ•°æ®åº“çš„è¡¨ç»“æ„å’Œç´¢å¼•è®¾è®¡ç¼ºé™·å¸¦æ¥çš„ç³»ç»Ÿæ¶æ„ç¼ºé™·æˆ–æ€§èƒ½é£é™©;å·¥ç¨‹ç»“æ„æ·· ä¹±å¯¼è‡´åç»­é¡¹ç›®ç»´æŠ¤è‰°éš¾;æ²¡æœ‰é‰´æƒçš„æ¼æ´ä»£ç æ˜“è¢«é»‘å®¢æ”»å‡»ç­‰ç­‰ï¼Œåˆ¶å®šä¸€å¥—å¼€å‘è§„èŒƒå‡ºæ¥è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œå¯¹äºå¢å¼ºä»£ç çš„å¯è¯»æ€§ï¼Œæé«˜é¡¹ç›®çš„ç»´æŠ¤æˆæœ¬ï¼Œæé«˜é—®é¢˜çš„æ’æŸ¥é€Ÿåº¦ï¼Œéƒ½ä¼šæœ‰é‡è¦çš„ä½œç”¨ã€‚ å‘½å","categories":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://zhangyong3214.github.io/categories/%E6%95%99%E7%A8%8B/"}],"tags":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://zhangyong3214.github.io/tags/%E5%BC%80%E5%8F%91/"}]},{"title":"SpringæŠ€æœ¯ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°/Spring","date":"2022-04-05T09:32:31.585Z","updated":"2022-04-05T09:32:31.585Z","comments":true,"path":"2022/04/05/å­¦ä¹ ç¬”è®°/Spring/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/05/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Spring/","excerpt":"","text":"Springåº•å±‚æ ¸å¿ƒåŸç†è§£æä¸‹è½½Springæºç git cloneçš„åœ°å€ä¸ºï¼šhttps://gitee.com/archguide/spring-framework-5.3.10.git Beançš„åˆ›å»ºè¿‡ç¨‹é‚£ä¹ˆSpringåˆ°åº•æ˜¯å¦‚ä½•æ¥åˆ›å»ºä¸€ä¸ªBeançš„å‘¢ï¼Œè¿™ä¸ªå°±æ˜¯Beanåˆ›å»ºçš„ç”Ÿå‘½å‘¨æœŸï¼Œå¤§è‡´è¿‡ç¨‹å¦‚ä¸‹ï¼š åˆ©ç”¨è¯¥ç±»çš„æ„é€ æ–¹æ³•æ¥å®ä¾‹åŒ–å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ï¼ˆä½†æ˜¯å¦‚ä½•ä¸€ä¸ªç±»ä¸­æœ‰å¤šä¸ªæ„é€ æ–¹æ³•ï¼ŒSpringåˆ™ä¼šè¿›è¡Œé€‰æ‹©ï¼Œè¿™ä¸ªå«åšæ¨æ–­æ„é€ æ–¹æ³•ï¼‰ å¾—åˆ°ä¸€ä¸ªå¯¹è±¡åï¼ŒSpringä¼šåˆ¤æ–­è¯¥å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨è¢«@Autowiredæ³¨è§£äº†çš„å±æ€§ï¼ŒæŠŠè¿™äº›å±æ€§æ‰¾å‡ºæ¥å¹¶ç”±Springè¿›è¡Œèµ‹å€¼ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ ä¾èµ–æ³¨å…¥åï¼ŒSpringä¼šåˆ¤æ–­è¯¥å¯¹è±¡æ˜¯å¦å®ç°äº†BeanNameAwareæ¥å£ã€BeanClassLoaderAwareæ¥å£ã€BeanFactoryAwareæ¥å£ï¼Œå¦‚æœå®ç°äº†ï¼Œå°±è¡¨ç¤ºå½“å‰å¯¹è±¡å¿…é¡»å®ç°è¯¥æ¥å£ä¸­æ‰€å®šä¹‰çš„setBeanName()ã€setBeanClassLoader()ã€setBeanFactory()æ–¹æ³•ï¼Œé‚£Springå°±ä¼šè°ƒç”¨è¿™äº›æ–¹æ³•å¹¶ä¼ å…¥ç›¸åº”çš„å‚æ•°ï¼ˆAwareå›è°ƒï¼‰ Awareå›è°ƒåï¼ŒSpringä¼šåˆ¤æ–­è¯¥å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªæ–¹æ³•è¢«@PostConstructæ³¨è§£äº†ï¼Œå¦‚æœå­˜åœ¨ï¼ŒSpringä¼šè°ƒç”¨å½“å‰å¯¹è±¡çš„æ­¤æ–¹æ³•ï¼ˆåˆå§‹åŒ–å‰ï¼‰ ç´§æ¥ç€ï¼ŒSpringä¼šåˆ¤æ–­è¯¥å¯¹è±¡æ˜¯å¦å®ç°äº†InitializingBeanæ¥å£ï¼Œå¦‚æœå®ç°äº†ï¼Œå°±è¡¨ç¤ºå½“å‰å¯¹è±¡å¿…é¡»å®ç°è¯¥æ¥å£ä¸­çš„afterPropertiesSet()æ–¹æ³•ï¼Œé‚£Springå°±ä¼šè°ƒç”¨å½“å‰å¯¹è±¡ä¸­çš„afterPropertiesSet()æ–¹æ³•ï¼ˆåˆå§‹åŒ–ï¼‰ æœ€åï¼ŒSpringä¼šåˆ¤æ–­å½“å‰å¯¹è±¡éœ€ä¸éœ€è¦è¿›è¡ŒAOPï¼Œå¦‚æœä¸éœ€è¦é‚£ä¹ˆBeanå°±åˆ›å»ºå®Œäº†ï¼Œå¦‚æœéœ€è¦è¿›è¡ŒAOPï¼Œåˆ™ä¼šè¿›è¡ŒåŠ¨æ€ä»£ç†å¹¶ç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡åšä¸ºBeanï¼ˆåˆå§‹åŒ–åï¼‰ é€šè¿‡æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå½“Springæ ¹æ®UserServiceç±»æ¥åˆ›å»ºä¸€ä¸ªBeanæ—¶ï¼š å¦‚æœä¸ç”¨è¿›è¡ŒAOPï¼Œé‚£ä¹ˆBeanå°±æ˜¯UserServiceç±»çš„æ„é€ æ–¹æ³•æ‰€å¾—åˆ°çš„å¯¹è±¡ã€‚ å¦‚æœéœ€è¦è¿›è¡ŒAOPï¼Œé‚£ä¹ˆBeanå°±æ˜¯UserServiceçš„ä»£ç†ç±»æ‰€å®ä¾‹åŒ–å¾—åˆ°çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯UserServiceæœ¬èº«æ‰€å¾—åˆ°çš„å¯¹è±¡ã€‚ Beanå¯¹è±¡åˆ›å»ºå‡ºæ¥åï¼š å¦‚æœå½“å‰Beanæ˜¯å•ä¾‹Beanï¼Œé‚£ä¹ˆä¼šæŠŠè¯¥Beanå¯¹è±¡å­˜å…¥ä¸€ä¸ªMap&lt;String,Object&gt;ï¼ŒMapçš„keyä¸ºbeanNameï¼Œvalueä¸ºBeanå¯¹è±¡ã€‚è¿™æ ·ä¸‹æ¬¡getBeanæ—¶å°±å¯ä»¥ç›´æ¥ä»Mapä¸­æ‹¿åˆ°å¯¹åº”çš„Beanå¯¹è±¡äº†ã€‚ï¼ˆå®é™…ä¸Šï¼Œåœ¨Springæºç ä¸­ï¼Œè¿™ä¸ªMapå°±æ˜¯å•ä¾‹æ± ï¼‰ å¦‚æœå½“å‰Beanæ˜¯åŸå‹Beanï¼Œé‚£ä¹ˆåç»­æ²¡æœ‰å…¶ä»–åŠ¨ä½œï¼Œä¸ä¼šå­˜å…¥ä¸€ä¸ªMapï¼Œä¸‹æ¬¡getBeanæ—¶ä¼šå†æ¬¡æ‰§è¡Œä¸Šè¿°åˆ›å»ºè¿‡ç¨‹ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„Beanå¯¹è±¡ã€‚ æ¨æ–­æ„é€ æ–¹æ³•Springåœ¨åŸºäºæŸä¸ªç±»ç”ŸæˆBeançš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦åˆ©ç”¨è¯¥ç±»çš„æ„é€ æ–¹æ³•æ¥å®ä¾‹åŒ–å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯å¦‚æœä¸€ä¸ªç±»å­˜åœ¨å¤šä¸ªæ„é€ æ–¹æ³•ï¼ŒSpringä¼šä½¿ç”¨å“ªä¸ªå‘¢ï¼Ÿ Springçš„åˆ¤æ–­é€»è¾‘å¦‚ä¸‹ï¼š å¦‚æœä¸€ä¸ªç±»åªå­˜åœ¨ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œä¸ç®¡è¯¥æ„é€ æ–¹æ³•æ˜¯æ— å‚æ„é€ æ–¹æ³•ï¼Œè¿˜æ˜¯æœ‰å‚æ„é€ æ–¹æ³•ï¼ŒSpringéƒ½ä¼šç”¨è¿™ä¸ªæ„é€ æ–¹æ³• å¦‚æœä¸€ä¸ªç±»å­˜åœ¨å¤šä¸ªæ„é€ æ–¹æ³•a. è¿™äº›æ„é€ æ–¹æ³•ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªæ— å‚çš„æ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆSpringå°±ä¼šç”¨è¿™ä¸ªæ— å‚çš„æ„é€ æ–¹æ³•b. è¿™äº›æ„é€ æ–¹æ³•ä¸­ï¼Œä¸å­˜åœ¨ä¸€ä¸ªæ— å‚çš„æ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆSpringå°±ä¼šæŠ¥é”™ Springçš„è®¾è®¡æ€æƒ³æ˜¯è¿™æ ·çš„ï¼š å¦‚æœä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œé‚£ä¹ˆæ²¡å¾—é€‰æ‹©ï¼Œåªèƒ½ç”¨è¿™ä¸ªæ„é€ æ–¹æ³• å¦‚æœä¸€ä¸ªç±»å­˜åœ¨å¤šä¸ªæ„é€ æ–¹æ³•ï¼ŒSpringä¸çŸ¥é“å¦‚ä½•é€‰æ‹©ï¼Œå°±ä¼šçœ‹æ˜¯å¦æœ‰æ— å‚çš„æ„é€ æ–¹æ³•ï¼Œå› ä¸ºæ— å‚æ„é€ æ–¹æ³•æœ¬èº«è¡¨ç¤ºäº†ä¸€ç§é»˜è®¤çš„æ„ä¹‰ ä¸è¿‡å¦‚æœæŸä¸ªæ„é€ æ–¹æ³•ä¸ŠåŠ äº†@Autowiredæ³¨è§£ï¼Œé‚£å°±è¡¨ç¤ºç¨‹åºå‘˜å‘Šè¯‰Springå°±ç”¨è¿™ä¸ªåŠ äº†æ³¨è§£çš„æ–¹æ³•ï¼Œé‚£Springå°±ä¼šç”¨è¿™ä¸ªåŠ äº†@Autowiredæ³¨è§£æ„é€ æ–¹æ³•äº† éœ€è¦é‡è§†çš„æ˜¯ï¼Œå¦‚æœSpringé€‰æ‹©äº†ä¸€ä¸ªæœ‰å‚çš„æ„é€ æ–¹æ³•ï¼ŒSpringåœ¨è°ƒç”¨è¿™ä¸ªæœ‰å‚æ„é€ æ–¹æ³•æ—¶ï¼Œéœ€è¦ä¼ å…¥å‚æ•°ï¼Œé‚£è¿™ä¸ªå‚æ•°æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿ Springä¼šæ ¹æ®å…¥å‚çš„ç±»å‹å’Œå…¥å‚çš„åå­—å»Springä¸­æ‰¾Beanå¯¹è±¡ï¼ˆä»¥å•ä¾‹Beanä¸ºä¾‹ï¼ŒSpringä¼šä»å•ä¾‹æ± é‚£ä¸ªMapä¸­å»æ‰¾ï¼‰ï¼š å…ˆæ ¹æ®å…¥å‚ç±»å‹æ‰¾ï¼Œå¦‚æœåªæ‰¾åˆ°ä¸€ä¸ªï¼Œé‚£å°±ç›´æ¥ç”¨æ¥ä½œä¸ºå…¥å‚ å¦‚æœæ ¹æ®ç±»å‹æ‰¾åˆ°å¤šä¸ªï¼Œåˆ™å†æ ¹æ®å…¥å‚åå­—æ¥ç¡®å®šå”¯ä¸€ä¸€ä¸ª æœ€ç»ˆå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œæ— æ³•åˆ›å»ºå½“å‰Beanå¯¹è±¡ ç¡®å®šç”¨å“ªä¸ªæ„é€ æ–¹æ³•ï¼Œç¡®å®šå…¥å‚çš„Beanå¯¹è±¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«åšæ¨æ–­æ„é€ æ–¹æ³•ã€‚ AOPå¤§è‡´æµç¨‹AOPå°±æ˜¯è¿›è¡ŒåŠ¨æ€ä»£ç†ï¼Œåœ¨åˆ›å»ºä¸€ä¸ªBeançš„è¿‡ç¨‹ä¸­ï¼ŒSpringåœ¨æœ€åä¸€æ­¥ä¼šå»åˆ¤æ–­å½“å‰æ­£åœ¨åˆ›å»ºçš„è¿™ä¸ªBeanæ˜¯ä¸æ˜¯éœ€è¦è¿›è¡ŒAOPï¼Œå¦‚æœéœ€è¦åˆ™ä¼šè¿›è¡ŒåŠ¨æ€ä»£ç†ã€‚ å¦‚ä½•åˆ¤æ–­å½“å‰Beanå¯¹è±¡éœ€ä¸éœ€è¦è¿›è¡ŒAOP: æ‰¾å‡ºæ‰€æœ‰çš„åˆ‡é¢Bean éå†åˆ‡é¢ä¸­çš„æ¯ä¸ªæ–¹æ³•ï¼Œçœ‹æ˜¯å¦å†™äº†@Beforeã€@Afterç­‰æ³¨è§£ å¦‚æœå†™äº†ï¼Œåˆ™åˆ¤æ–­æ‰€å¯¹åº”çš„Pointcutæ˜¯å¦å’Œå½“å‰Beanå¯¹è±¡çš„ç±»æ˜¯å¦åŒ¹é… å¦‚æœåŒ¹é…åˆ™è¡¨ç¤ºå½“å‰Beanå¯¹è±¡æœ‰åŒ¹é…çš„çš„Pointcutï¼Œè¡¨ç¤ºéœ€è¦è¿›è¡ŒAOP åˆ©ç”¨cglibè¿›è¡ŒAOPçš„å¤§è‡´æµç¨‹ï¼š ç”Ÿæˆä»£ç†ç±»UserServiceProxyï¼Œä»£ç†ç±»ç»§æ‰¿UserService ä»£ç†ç±»ä¸­é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œæ¯”å¦‚UserServiceä¸­çš„test()æ–¹æ³• ä»£ç†ç±»ä¸­è¿˜ä¼šæœ‰ä¸€ä¸ªtargetå±æ€§ï¼Œè¯¥å±æ€§çš„å€¼ä¸ºè¢«ä»£ç†å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯é€šè¿‡UserServiceç±»æ¨æ–­æ„é€ æ–¹æ³•å®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡ï¼Œè¿›è¡Œäº†ä¾èµ–æ³¨å…¥ã€åˆå§‹åŒ–ç­‰æ­¥éª¤çš„å¯¹è±¡ï¼‰ ä»£ç†ç±»ä¸­çš„test()æ–¹æ³•è¢«æ‰§è¡Œæ—¶çš„é€»è¾‘å¦‚ä¸‹ï¼ša. æ‰§è¡Œåˆ‡é¢é€»è¾‘ï¼ˆ@Beforeï¼‰b. è°ƒç”¨target.test() å½“æˆ‘ä»¬ä»Springå®¹å™¨å¾—åˆ°UserServiceçš„Beanå¯¹è±¡æ—¶ï¼Œæ‹¿åˆ°çš„å°±æ˜¯UserServiceProxyæ‰€ç”Ÿæˆçš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä»£ç†å¯¹è±¡ã€‚UserServiceä»£ç†å¯¹è±¡.test()â€”&gt;æ‰§è¡Œåˆ‡é¢é€»è¾‘â€”&gt;target.test()ï¼Œæ³¨æ„targetå¯¹è±¡ä¸æ˜¯ä»£ç†å¯¹è±¡ï¼Œè€Œæ˜¯è¢«ä»£ç†å¯¹è±¡ã€‚ Springäº‹åŠ¡å½“æˆ‘ä»¬åœ¨æŸä¸ªæ–¹æ³•ä¸ŠåŠ äº†@Transactionalæ³¨è§£åï¼Œå°±è¡¨ç¤ºè¯¥æ–¹æ³•åœ¨è°ƒç”¨æ—¶ä¼šå¼€å¯Springäº‹åŠ¡ï¼Œè€Œè¿™ä¸ªæ–¹æ³•æ‰€åœ¨çš„ç±»æ‰€å¯¹åº”çš„Beanå¯¹è±¡ä¼šæ˜¯è¯¥ç±»çš„ä»£ç†å¯¹è±¡ã€‚ Springäº‹åŠ¡çš„ä»£ç†å¯¹è±¡æ‰§è¡ŒæŸä¸ªæ–¹æ³•æ—¶çš„æ­¥éª¤ï¼š åˆ¤æ–­å½“å‰æ‰§è¡Œçš„æ–¹æ³•æ˜¯å¦å­˜åœ¨@Transactionalæ³¨è§£ å¦‚æœå­˜åœ¨ï¼Œåˆ™åˆ©ç”¨äº‹åŠ¡ç®¡ç†å™¨ï¼ˆTransactionManangerï¼‰æ–°å»ºä¸€ä¸ªæ•°æ®åº“è¿æ¥ ä¿®æ”¹æ•°æ®åº“è¿æ¥çš„autocommitä¸ºfalse æ‰§è¡Œtarget.test()ï¼Œæ‰§è¡Œç¨‹åºå‘˜æ‰€å†™çš„ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œsql æ‰§è¡Œå®Œäº†ä¹‹åå¦‚æœæ²¡æœ‰å‡ºç°å¼‚å¸¸ï¼Œåˆ™æäº¤ï¼Œå¦åˆ™å›æ»š Springäº‹åŠ¡æ˜¯å¦ä¼šå¤±æ•ˆçš„åˆ¤æ–­æ ‡å‡†ï¼šæŸä¸ªåŠ äº†@Transactionalæ³¨è§£çš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œè¦åˆ¤æ–­åˆ°åº•æ˜¯ä¸æ˜¯ç›´æ¥è¢«ä»£ç†å¯¹è±¡è°ƒç”¨çš„ï¼Œå¦‚æœæ˜¯åˆ™äº‹åŠ¡ä¼šç”Ÿæ•ˆï¼Œå¦‚æœä¸æ˜¯åˆ™å¤±æ•ˆã€‚","categories":[{"name":"æ¡†æ¶","slug":"æ¡†æ¶","permalink":"https://zhangyong3214.github.io/categories/%E6%A1%86%E6%9E%B6/"}],"tags":[{"name":"åç«¯æŠ€æœ¯","slug":"åç«¯æŠ€æœ¯","permalink":"https://zhangyong3214.github.io/tags/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/"}]},{"title":"RabbitMQæ¶ˆæ¯ä¸­é—´ä»¶æŠ€æœ¯ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°/RabbitMQ","date":"2022-04-05T09:32:31.582Z","updated":"2022-04-05T09:32:31.584Z","comments":true,"path":"2022/04/05/å­¦ä¹ ç¬”è®°/RabbitMQ/","link":"","permalink":"https://zhangyong3214.github.io/2022/04/05/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/RabbitMQ/","excerpt":"","text":"MQç›¸å…³æ¦‚å¿µä»€ä¹ˆæ˜¯MQMQ(message queue)ï¼Œä»å­—é¢æ„æ€ä¸Šçœ‹ï¼Œæœ¬è´¨æ˜¯ä¸ªé˜Ÿåˆ—ï¼ŒFIFO å…ˆå…¥å…ˆå‡ºï¼Œåªä¸è¿‡é˜Ÿåˆ—ä¸­å­˜æ”¾çš„å†…å®¹æ˜¯message è€Œå·²ï¼Œè¿˜æ˜¯ä¸€ç§è·¨è¿›ç¨‹çš„é€šä¿¡æœºåˆ¶ï¼Œç”¨äºä¸Šä¸‹æ¸¸ä¼ é€’æ¶ˆæ¯ã€‚åœ¨äº’è”ç½‘æ¶æ„ä¸­ï¼ŒMQ æ˜¯ä¸€ç§éå¸¸å¸¸è§çš„ä¸Šä¸‹æ¸¸â€œé€»è¾‘è§£è€¦+ç‰©ç†è§£è€¦â€çš„æ¶ˆæ¯é€šä¿¡æœåŠ¡ã€‚ä½¿ç”¨äº† MQä¹‹åï¼Œæ¶ˆæ¯å‘é€ä¸Šæ¸¸åªéœ€è¦ä¾èµ– MQï¼Œä¸ç”¨ä¾èµ–å…¶ä»–æœåŠ¡ã€‚ ä¸ºä»€ä¹ˆè¦ç”¨MQ æµé‡æ¶ˆå³° ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœè®¢å•ç³»ç»Ÿæœ€å¤šèƒ½å¤„ç†ä¸€ä¸‡æ¬¡è®¢å•ï¼Œè¿™ä¸ªå¤„ç†èƒ½åŠ›åº”ä»˜æ­£å¸¸æ—¶æ®µçš„ä¸‹å•æ—¶ç»°ç»°æœ‰ä½™ï¼Œæ­£å¸¸æ—¶æ®µæˆ‘ä»¬ä¸‹å•ä¸€ç§’åå°±èƒ½è¿”å›ç»“æœã€‚ä½†æ˜¯åœ¨é«˜å³°æœŸï¼Œå¦‚æœæœ‰ä¸¤ä¸‡æ¬¡ä¸‹å•æ“ä½œç³»ç»Ÿæ˜¯å¤„ç†ä¸äº†çš„ï¼Œåªèƒ½é™åˆ¶è®¢å•è¶…è¿‡ä¸€ä¸‡åä¸å…è®¸ç”¨æˆ·ä¸‹å•ã€‚ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—åšç¼“å†²ï¼Œæˆ‘ä»¬å¯ä»¥å–æ¶ˆè¿™ä¸ªé™åˆ¶ï¼ŒæŠŠä¸€ç§’å†…ä¸‹çš„è®¢å•åˆ†æ•£æˆä¸€æ®µæ—¶é—´æ¥å¤„ç†ï¼Œè¿™æ—¶æœ‰äº›ç”¨æˆ·å¯èƒ½åœ¨ä¸‹å•åå‡ ç§’åæ‰èƒ½æ”¶åˆ°ä¸‹å•æˆåŠŸçš„æ“ä½œï¼Œä½†æ˜¯æ¯”ä¸èƒ½ä¸‹å•çš„ä½“éªŒè¦å¥½ã€‚ åº”ç”¨è§£è€¦ ä»¥ç”µå•†åº”ç”¨ä¸ºä¾‹ï¼Œåº”ç”¨ä¸­æœ‰è®¢å•ç³»ç»Ÿã€åº“å­˜ç³»ç»Ÿã€ç‰©æµç³»ç»Ÿã€æ”¯ä»˜ç³»ç»Ÿã€‚ç”¨æˆ·åˆ›å»ºè®¢å•åï¼Œå¦‚æœè€¦åˆè°ƒç”¨åº“å­˜ç³»ç»Ÿã€ç‰©æµç³»ç»Ÿã€æ”¯ä»˜ç³»ç»Ÿï¼Œä»»ä½•ä¸€ä¸ªå­ç³»ç»Ÿå‡ºäº†æ•…éšœï¼Œéƒ½ä¼šé€ æˆä¸‹å•æ“ä½œå¼‚å¸¸ã€‚å½“è½¬å˜æˆåŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„æ–¹å¼åï¼Œç³»ç»Ÿé—´è°ƒç”¨çš„é—®é¢˜ä¼šå‡å°‘å¾ˆå¤šï¼Œæ¯”å¦‚ç‰©æµç³»ç»Ÿå› ä¸ºå‘ç”Ÿæ•…éšœï¼Œéœ€è¦å‡ åˆ†é’Ÿæ¥ä¿®å¤ã€‚åœ¨è¿™å‡ åˆ†é’Ÿçš„æ—¶é—´é‡Œï¼Œç‰©æµç³»ç»Ÿè¦å¤„ç†çš„å†…å­˜è¢«ç¼“å­˜åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç”¨æˆ·çš„ä¸‹å•æ“ä½œå¯ä»¥æ­£å¸¸å®Œæˆã€‚å½“ç‰©æµç³»ç»Ÿæ¢å¤åï¼Œç»§ç»­å¤„ç†è®¢å•ä¿¡æ¯å³å¯ï¼Œä¸­å•ç”¨æˆ·æ„Ÿå—ä¸åˆ°ç‰©æµç³»ç»Ÿçš„æ•…éšœï¼Œæå‡ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚ å¼‚æ­¥æé€Ÿ æœ‰äº›æœåŠ¡é—´è°ƒç”¨æ˜¯å¼‚æ­¥çš„ï¼Œä¾‹å¦‚ A è°ƒç”¨ Bï¼ŒB éœ€è¦èŠ±è´¹å¾ˆé•¿æ—¶é—´æ‰§è¡Œï¼Œä½†æ˜¯ A éœ€è¦çŸ¥é“ B ä»€ä¹ˆæ—¶å€™å¯ä»¥æ‰§è¡Œå®Œï¼Œä»¥å‰ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼ŒA è¿‡ä¸€æ®µæ—¶é—´å»è°ƒç”¨ B çš„æŸ¥è¯¢ api æŸ¥è¯¢ã€‚æˆ–è€… A æä¾›ä¸€ä¸ª callback apiï¼ŒB æ‰§è¡Œå®Œä¹‹åè°ƒç”¨ api é€šçŸ¥ A æœåŠ¡ã€‚è¿™ä¸¤ç§æ–¹å¼éƒ½ä¸æ˜¯å¾ˆä¼˜é›…ï¼Œä½¿ç”¨æ¶ˆæ¯æ€»çº¿ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒA è°ƒç”¨ B æœåŠ¡åï¼Œåªéœ€è¦ç›‘å¬ B å¤„ç†å®Œæˆçš„æ¶ˆæ¯ï¼Œå½“ B å¤„ç†å®Œæˆåï¼Œä¼šå‘é€ä¸€æ¡æ¶ˆæ¯ç»™ MQï¼ŒMQ ä¼šå°†æ­¤æ¶ˆæ¯è½¬å‘ç»™ A æœåŠ¡ã€‚è¿™æ · A æœåŠ¡æ—¢ä¸ç”¨å¾ªç¯è°ƒç”¨ B çš„æŸ¥è¯¢ apiï¼Œä¹Ÿä¸ç”¨æä¾› callback apiã€‚åŒæ · B æœåŠ¡ä¹Ÿä¸ç”¨åšè¿™äº›æ“ä½œã€‚A æœåŠ¡è¿˜èƒ½åŠæ—¶çš„å¾—åˆ°å¼‚æ­¥å¤„ç†æˆåŠŸçš„æ¶ˆæ¯ã€‚ MQçš„åˆ†ç±» ActiveMQä¼˜ç‚¹ï¼šå•æœºååé‡ä¸‡çº§ï¼Œæ—¶æ•ˆæ€§ ms çº§ï¼Œå¯ç”¨æ€§é«˜ï¼ŒåŸºäºä¸»ä»æ¶æ„å®ç°é«˜å¯ç”¨æ€§ï¼Œæ¶ˆæ¯å¯é æ€§è¾ƒä½çš„æ¦‚ç‡ä¸¢å¤±æ•°æ®ã€‚ ç¼ºç‚¹ï¼šå®˜æ–¹ç¤¾åŒºç°åœ¨å¯¹ ActiveMQ 5.x ç»´æŠ¤è¶Šæ¥è¶Šå°‘ï¼Œé«˜ååé‡åœºæ™¯è¾ƒå°‘ä½¿ç”¨ã€‚ Kafkaå¤§æ•°æ®çš„æ€æ‰‹é”ï¼Œè°ˆåˆ°å¤§æ•°æ®é¢†åŸŸå†…çš„æ¶ˆæ¯ä¼ è¾“ï¼Œåˆ™ç»•ä¸å¼€ Kafkaï¼Œè¿™æ¬¾ä¸ºå¤§æ•°æ®è€Œç”Ÿçš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œä»¥å…¶ç™¾ä¸‡çº§ TPS çš„ååé‡åå£°å¤§å™ªï¼Œè¿…é€Ÿæˆä¸ºå¤§æ•°æ®é¢†åŸŸçš„å® å„¿ï¼Œåœ¨æ•°æ®é‡‡é›†ã€ä¼ è¾“ã€å­˜å‚¨çš„è¿‡ç¨‹ä¸­å‘æŒ¥ç€ä¸¾è¶³è½»é‡çš„ä½œç”¨ã€‚ç›®å‰å·²ç»è¢« LinkedInï¼ŒUber, Twitter, Netflix ç­‰å¤§å…¬å¸æ‰€é‡‡çº³ã€‚ ä¼˜ç‚¹ï¼šæ€§èƒ½å“è¶Šï¼Œå•æœºå†™å…¥ TPS çº¦åœ¨ç™¾ä¸‡æ¡/ç§’ï¼Œæœ€å¤§çš„ä¼˜ç‚¹ï¼Œå°±æ˜¯ååé‡é«˜ã€‚æ—¶æ•ˆæ€§ ms çº§å¯ç”¨æ€§éå¸¸é«˜ï¼Œkafka æ˜¯åˆ†å¸ƒå¼çš„ï¼Œä¸€ä¸ªæ•°æ®å¤šä¸ªå‰¯æœ¬ï¼Œå°‘æ•°æœºå™¨å®•æœºï¼Œä¸ä¼šä¸¢å¤±æ•°æ®ï¼Œä¸ä¼šå¯¼è‡´ä¸å¯ç”¨,æ¶ˆè´¹è€…é‡‡ç”¨ Pull æ–¹å¼è·å–æ¶ˆæ¯, æ¶ˆæ¯æœ‰åº, é€šè¿‡æ§åˆ¶èƒ½å¤Ÿä¿è¯æ‰€æœ‰æ¶ˆæ¯è¢«æ¶ˆè´¹ä¸”ä»…è¢«æ¶ˆè´¹ä¸€æ¬¡;æœ‰ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹Kafka Web ç®¡ç†ç•Œé¢ Kafka-Managerï¼›åœ¨æ—¥å¿—é¢†åŸŸæ¯”è¾ƒæˆç†Ÿï¼Œè¢«å¤šå®¶å…¬å¸å’Œå¤šä¸ªå¼€æºé¡¹ç›®ä½¿ç”¨ï¼›åŠŸèƒ½æ”¯æŒï¼šåŠŸèƒ½è¾ƒä¸ºç®€å•ï¼Œä¸»è¦æ”¯æŒç®€å•çš„ MQ åŠŸèƒ½ï¼Œåœ¨å¤§æ•°æ®é¢†åŸŸçš„å®æ—¶è®¡ç®—ä»¥åŠæ—¥å¿—é‡‡é›†è¢«å¤§è§„æ¨¡ä½¿ç”¨ã€‚ ç¼ºç‚¹ï¼šKafka å•æœºè¶…è¿‡ 64 ä¸ªé˜Ÿåˆ—/åˆ†åŒºï¼ŒLoad ä¼šå‘ç”Ÿæ˜æ˜¾çš„é£™é«˜ç°è±¡ï¼Œé˜Ÿåˆ—è¶Šå¤šï¼Œload è¶Šé«˜ï¼Œå‘é€æ¶ˆæ¯å“åº”æ—¶é—´å˜é•¿ï¼Œä½¿ç”¨çŸ­è½®è¯¢æ–¹å¼ï¼Œå®æ—¶æ€§å–å†³äºè½®è¯¢é—´éš”æ—¶é—´ï¼Œæ¶ˆè´¹å¤±è´¥ä¸æ”¯æŒé‡è¯•ï¼›æ”¯æŒæ¶ˆæ¯é¡ºåºï¼Œä½†æ˜¯ä¸€å°ä»£ç†å®•æœºåï¼Œå°±ä¼šäº§ç”Ÿæ¶ˆæ¯ä¹±åºï¼Œç¤¾åŒºæ›´æ–°è¾ƒæ…¢ã€‚ RocketMQRocketMQ å‡ºè‡ªé˜¿é‡Œå·´å·´çš„å¼€æºäº§å“ï¼Œç”¨ Java è¯­è¨€å®ç°ï¼Œåœ¨è®¾è®¡æ—¶å‚è€ƒäº† Kafkaï¼Œå¹¶åšå‡ºäº†è‡ªå·±çš„ä¸€äº›æ”¹è¿›ã€‚è¢«é˜¿é‡Œå·´å·´å¹¿æ³›åº”ç”¨åœ¨è®¢å•ï¼Œäº¤æ˜“ï¼Œå……å€¼ï¼Œæµè®¡ç®—ï¼Œæ¶ˆæ¯æ¨é€ï¼Œæ—¥å¿—æµå¼å¤„ç†ï¼Œbinglog åˆ†å‘ç­‰åœºæ™¯ã€‚ ä¼˜ç‚¹ï¼šå•æœºååé‡åä¸‡çº§,å¯ç”¨æ€§éå¸¸é«˜ï¼Œåˆ†å¸ƒå¼æ¶æ„,æ¶ˆæ¯å¯ä»¥åšåˆ° 0 ä¸¢å¤±,MQ åŠŸèƒ½è¾ƒä¸ºå®Œå–„ï¼Œè¿˜æ˜¯åˆ†å¸ƒå¼çš„ï¼Œæ‰©å±•æ€§å¥½,æ”¯æŒ 10 äº¿çº§åˆ«çš„æ¶ˆæ¯å †ç§¯ï¼Œä¸ä¼šå› ä¸ºå †ç§¯å¯¼è‡´æ€§èƒ½ä¸‹é™,æºç æ˜¯ java æˆ‘ä»¬å¯ä»¥è‡ªå·±é˜…è¯»æºç ï¼Œå®šåˆ¶è‡ªå·±å…¬å¸çš„ MQã€‚ ç¼ºç‚¹ï¼šæ”¯æŒçš„å®¢æˆ·ç«¯è¯­è¨€ä¸å¤šï¼Œç›®å‰æ˜¯ java åŠ c++ï¼Œå…¶ä¸­ c++ä¸æˆç†Ÿï¼›ç¤¾åŒºæ´»è·ƒåº¦ä¸€èˆ¬,æ²¡æœ‰åœ¨ MQæ ¸å¿ƒä¸­å»å®ç° JMS ç­‰æ¥å£,æœ‰äº›ç³»ç»Ÿè¦è¿ç§»éœ€è¦ä¿®æ”¹å¤§é‡ä»£ç ã€‚ RabbitMQ2007 å¹´å‘å¸ƒï¼Œæ˜¯ä¸€ä¸ªåœ¨ AMQP(é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®)åŸºç¡€ä¸Šå®Œæˆçš„ï¼Œå¯å¤ç”¨çš„ä¼ä¸šæ¶ˆæ¯ç³»ç»Ÿï¼Œæ˜¯å½“å‰æœ€ä¸»æµçš„æ¶ˆæ¯ä¸­é—´ä»¶ä¹‹ä¸€ã€‚ ä¼˜ç‚¹ï¼šç”±äº erlang è¯­è¨€çš„é«˜å¹¶å‘ç‰¹æ€§ï¼Œæ€§èƒ½è¾ƒå¥½ï¼›ååé‡åˆ°ä¸‡çº§ï¼ŒMQ åŠŸèƒ½æ¯”è¾ƒå®Œå¤‡,å¥å£®ã€ç¨³å®šã€æ˜“ç”¨ã€è·¨å¹³å°ã€æ”¯æŒå¤šç§è¯­è¨€ å¦‚ï¼šPythonã€Rubyã€.NETã€Javaã€JMSã€Cã€PHPã€ActionScriptã€XMPPã€STOMPç­‰ï¼Œæ”¯æŒ AJAX æ–‡æ¡£é½å…¨ï¼›å¼€æºæä¾›çš„ç®¡ç†ç•Œé¢éå¸¸æ£’ï¼Œç”¨èµ·æ¥å¾ˆå¥½ç”¨,ç¤¾åŒºæ´»è·ƒåº¦é«˜ï¼›æ›´æ–°é¢‘ç‡ç›¸å½“é«˜ã€‚ ç¼ºç‚¹ï¼šå•†ä¸šç‰ˆéœ€è¦æ”¶è´¹,å­¦ä¹ æˆæœ¬è¾ƒé«˜ã€‚ MQçš„é€‰æ‹©KafkaKafka ä¸»è¦ç‰¹ç‚¹æ˜¯åŸºäº Pull çš„æ¨¡å¼æ¥å¤„ç†æ¶ˆæ¯æ¶ˆè´¹ï¼Œè¿½æ±‚é«˜ååé‡ï¼Œä¸€å¼€å§‹çš„ç›®çš„å°±æ˜¯ç”¨äºæ—¥å¿—æ”¶é›†å’Œä¼ è¾“ï¼Œé€‚åˆäº§ç”Ÿå¤§é‡æ•°æ®çš„äº’è”ç½‘æœåŠ¡çš„æ•°æ®æ”¶é›†ä¸šåŠ¡ã€‚å¤§å‹å…¬å¸å»ºè®®å¯ä»¥é€‰ç”¨ï¼Œå¦‚æœæœ‰æ—¥å¿—é‡‡é›†åŠŸèƒ½ï¼Œè‚¯å®šæ˜¯é¦–é€‰ kafka äº†ã€‚ RocketMQå¤©ç”Ÿä¸ºé‡‘èäº’è”ç½‘é¢†åŸŸè€Œç”Ÿï¼Œå¯¹äºå¯é æ€§è¦æ±‚å¾ˆé«˜çš„åœºæ™¯ï¼Œå°¤å…¶æ˜¯ç”µå•†é‡Œé¢çš„è®¢å•æ‰£æ¬¾ï¼Œä»¥åŠä¸šåŠ¡å‰Šå³°ï¼Œåœ¨å¤§é‡äº¤æ˜“æ¶Œå…¥æ—¶ï¼Œåç«¯å¯èƒ½æ— æ³•åŠæ—¶å¤„ç†çš„æƒ…å†µã€‚RoketMQ åœ¨ç¨³å®šæ€§ä¸Šå¯èƒ½æ›´å€¼å¾—ä¿¡èµ–ï¼Œè¿™äº›ä¸šåŠ¡åœºæ™¯åœ¨é˜¿é‡ŒåŒ 11 å·²ç»ç»å†äº†å¤šæ¬¡è€ƒéªŒï¼Œå¦‚æœä½ çš„ä¸šåŠ¡æœ‰ä¸Šè¿°å¹¶å‘åœºæ™¯ï¼Œå»ºè®®å¯ä»¥é€‰æ‹© RocketMQã€‚ RabbitMQç»“åˆ erlang è¯­è¨€æœ¬èº«çš„å¹¶å‘ä¼˜åŠ¿ï¼Œæ€§èƒ½å¥½æ—¶æ•ˆæ€§å¾®ç§’çº§ï¼Œç¤¾åŒºæ´»è·ƒåº¦ä¹Ÿæ¯”è¾ƒé«˜ï¼Œç®¡ç†ç•Œé¢ç”¨èµ·æ¥ååˆ†æ–¹ä¾¿ï¼Œå¦‚æœä½ çš„æ•°æ®é‡æ²¡æœ‰é‚£ä¹ˆå¤§ï¼Œä¸­å°å‹å…¬å¸ä¼˜å…ˆé€‰æ‹©åŠŸèƒ½æ¯”è¾ƒå®Œå¤‡çš„ RabbitMQã€‚ RabbitMQç®€ä»‹2007å¹´ï¼ŒRabbit æŠ€æœ¯å…¬å¸åŸºäº AMQP æ ‡å‡†å¼€å‘çš„ RabbitMQ 1.0 å‘å¸ƒã€‚RabbitMQ é‡‡ç”¨ Erlang è¯­è¨€å¼€å‘ã€‚Erlang è¯­è¨€ç”± Ericson è®¾è®¡ï¼Œä¸“é—¨ä¸ºå¼€å‘é«˜å¹¶å‘å’Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€ç§è¯­è¨€ï¼Œåœ¨ç”µä¿¡é¢†åŸŸä½¿ç”¨å¹¿æ³›ã€‚ RabbitMQå››å¤§æ ¸å¿ƒæ¦‚å¿µ ç”Ÿäº§è€…äº§ç”Ÿæ•°æ®å‘é€æ¶ˆæ¯çš„ç¨‹åºæ˜¯ç”Ÿäº§è€… äº¤æ¢æœºäº¤æ¢æœºæ˜¯ RabbitMQ éå¸¸é‡è¦çš„ä¸€ä¸ªéƒ¨ä»¶ï¼Œä¸€æ–¹é¢å®ƒæ¥æ”¶æ¥è‡ªç”Ÿäº§è€…çš„æ¶ˆæ¯ï¼Œå¦ä¸€æ–¹é¢å®ƒå°†æ¶ˆæ¯æ¨é€åˆ°é˜Ÿåˆ—ä¸­ã€‚äº¤æ¢æœºå¿…é¡»ç¡®åˆ‡çŸ¥é“å¦‚ä½•å¤„ç†å®ƒæ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼Œæ˜¯å°†è¿™äº›æ¶ˆæ¯æ¨é€åˆ°ç‰¹å®šé˜Ÿåˆ—è¿˜æ˜¯æ¨é€åˆ°å¤šä¸ªé˜Ÿåˆ—ï¼Œäº¦æˆ–è€…æ˜¯æŠŠæ¶ˆæ¯ä¸¢å¼ƒï¼Œè¿™ä¸ªå¾—æœ‰äº¤æ¢æœºç±»å‹å†³å®šã€‚ é˜Ÿåˆ— é˜Ÿåˆ—æ˜¯ RabbitMQ å†…éƒ¨ä½¿ç”¨çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå°½ç®¡æ¶ˆæ¯æµç» RabbitMQ å’Œåº”ç”¨ç¨‹åºï¼Œä½†å®ƒä»¬åªèƒ½å­˜å‚¨åœ¨é˜Ÿåˆ—ä¸­ã€‚é˜Ÿåˆ—ä»…å—ä¸»æœºçš„å†…å­˜å’Œç£ç›˜é™åˆ¶çš„çº¦æŸï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¤§çš„æ¶ˆæ¯ç¼“å†²åŒºã€‚è®¸å¤šç”Ÿäº§è€…å¯ä»¥å°†æ¶ˆæ¯å‘é€åˆ°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œè®¸å¤šæ¶ˆè´¹è€…å¯ä»¥å°è¯•ä»ä¸€ä¸ªé˜Ÿåˆ—æ¥æ”¶æ•°æ®ã€‚è¿™å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨é˜Ÿåˆ—çš„æ–¹å¼ã€‚ æ¶ˆè´¹è€… æ¶ˆè´¹ä¸æ¥æ”¶å…·æœ‰ç›¸ä¼¼çš„å«ä¹‰ã€‚æ¶ˆè´¹è€…å¤§å¤šæ—¶å€™æ˜¯ä¸€ä¸ªç­‰å¾…æ¥æ”¶æ¶ˆæ¯çš„ç¨‹åºã€‚è¯·æ³¨æ„ç”Ÿäº§è€…ï¼Œæ¶ˆè´¹è€…å’Œæ¶ˆæ¯ä¸­é—´ä»¶å¾ˆå¤šæ—¶å€™å¹¶ä¸åœ¨åŒä¸€æœºå™¨ä¸Šã€‚åŒä¸€ä¸ªåº”ç”¨ç¨‹åºæ—¢å¯ä»¥æ˜¯ç”Ÿäº§è€…åˆæ˜¯å¯ä»¥æ˜¯æ¶ˆè´¹è€…ã€‚ RabbitMQçš„å·¥ä½œæ¨¡å¼ ç®€å•æ¨¡å¼ HelloWorldï¼š ä¸€ä¸ªç”Ÿäº§è€…ã€ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œä¸éœ€è¦è®¾ç½®äº¤æ¢æœºï¼ˆä½¿ç”¨é»˜è®¤çš„äº¤æ¢æœºï¼‰ã€‚ å·¥ä½œé˜Ÿåˆ—æ¨¡å¼ Work Queueï¼š ä¸€ä¸ªç”Ÿäº§è€…ã€å¤šä¸ªæ¶ˆè´¹è€…ï¼ˆç«äº‰å…³ç³»ï¼‰ï¼Œä¸éœ€è¦è®¾ç½®äº¤æ¢æœºï¼ˆä½¿ç”¨é»˜è®¤çš„äº¤æ¢æœºï¼‰ã€‚ å‘å¸ƒè®¢é˜…æ¨¡å¼ Publish/subscribeï¼šéœ€è¦è®¾ç½®ç±»å‹ä¸º fanout çš„äº¤æ¢æœºï¼Œå¹¶ä¸”äº¤æ¢æœºå’Œé˜Ÿåˆ—è¿›è¡Œç»‘å®šï¼Œå½“å‘é€æ¶ˆæ¯åˆ°äº¤æ¢æœºåï¼Œäº¤æ¢æœºä¼šå°†æ¶ˆæ¯å‘é€åˆ°ç»‘å®šçš„é˜Ÿåˆ—ã€‚ è·¯ç”±æ¨¡å¼ Routingï¼š éœ€è¦è®¾ç½®ç±»å‹ä¸º direct çš„äº¤æ¢æœºï¼Œäº¤æ¢æœºå’Œé˜Ÿåˆ—è¿›è¡Œç»‘å®šï¼Œå¹¶ä¸”æŒ‡å®š routing keyï¼Œå½“å‘é€æ¶ˆæ¯åˆ°äº¤æ¢æœºåï¼Œäº¤æ¢æœºä¼šæ ¹æ® routing key å°†æ¶ˆæ¯å‘é€åˆ°å¯¹åº”çš„é˜Ÿåˆ—ã€‚ é€šé…ç¬¦æ¨¡å¼ Topicï¼šéœ€è¦è®¾ç½®ç±»å‹ä¸º topic çš„äº¤æ¢æœºï¼Œäº¤æ¢æœºå’Œé˜Ÿåˆ—è¿›è¡Œç»‘å®šï¼Œå¹¶ä¸”æŒ‡å®šé€šé…ç¬¦æ–¹å¼çš„ routing keyï¼Œå½“å‘é€æ¶ˆæ¯åˆ°äº¤æ¢æœºåï¼Œäº¤æ¢æœºä¼šæ ¹æ® routing key å°†æ¶ˆæ¯å‘é€åˆ°å¯¹åº”çš„é˜Ÿåˆ—ã€‚ RabbitMQå·¥ä½œåŸç† Brokerï¼šæ¥æ”¶å’Œåˆ†å‘æ¶ˆæ¯çš„åº”ç”¨ï¼ŒRabbitMQ Server å°±æ˜¯ Message Broker Virtual hostï¼šå‡ºäºå¤šç§Ÿæˆ·å’Œå®‰å…¨å› ç´ è®¾è®¡çš„ï¼ŒæŠŠ AMQP çš„åŸºæœ¬ç»„ä»¶åˆ’åˆ†åˆ°ä¸€ä¸ªè™šæ‹Ÿçš„åˆ†ç»„ä¸­ï¼Œç±»ä¼¼äºç½‘ç»œä¸­çš„ namespace æ¦‚å¿µã€‚å½“å¤šä¸ªä¸åŒçš„ç”¨æˆ·ä½¿ç”¨åŒä¸€ä¸ª RabbitMQ server æä¾›çš„æœåŠ¡æ—¶ï¼Œå¯ä»¥åˆ’åˆ†å‡ºå¤šä¸ª vhostï¼Œæ¯ä¸ªç”¨æˆ·åœ¨è‡ªå·±çš„ vhost åˆ›å»º exchangeï¼queue ç­‰ Connectionï¼špublisherï¼consumer å’Œ broker ä¹‹é—´çš„ TCP è¿æ¥ Channelï¼šå¦‚æœæ¯ä¸€æ¬¡è®¿é—® RabbitMQ éƒ½å»ºç«‹ä¸€ä¸ª Connectionï¼Œåœ¨æ¶ˆæ¯é‡å¤§çš„æ—¶å€™å»ºç«‹ TCPConnection çš„å¼€é”€å°†æ˜¯å·¨å¤§çš„ï¼Œæ•ˆç‡ä¹Ÿè¾ƒä½ã€‚Channel æ˜¯åœ¨ connection å†…éƒ¨å»ºç«‹çš„é€»è¾‘è¿æ¥ï¼Œå¦‚æœåº”ç”¨ç¨‹åºæ”¯æŒå¤šçº¿ç¨‹ï¼Œé€šå¸¸æ¯ä¸ª thread åˆ›å»ºå•ç‹¬çš„ channel è¿›è¡Œé€šè®¯ï¼ŒAMQP method åŒ…å«äº† channel id å¸®åŠ©å®¢æˆ·ç«¯å’Œ message broker è¯†åˆ« channelï¼Œæ‰€ä»¥ channel ä¹‹é—´æ˜¯å®Œå…¨éš”ç¦»çš„ã€‚ l Channel ä½œä¸ºè½»é‡çº§çš„Connection æå¤§å‡å°‘äº†æ“ä½œç³»ç»Ÿå»ºç«‹ TCP connection çš„å¼€é”€ Exchange ï¼š message åˆ°è¾¾ broker çš„ç¬¬ä¸€ç«™ï¼Œæ ¹æ®åˆ†å‘è§„åˆ™ï¼ŒåŒ¹é…æŸ¥è¯¢è¡¨ä¸­çš„ routing keyï¼Œåˆ†å‘æ¶ˆæ¯åˆ° queue ä¸­å»ã€‚å¸¸ç”¨çš„ç±»å‹æœ‰ï¼šdirect (point-to-point), topic (publish-subscribe) and fanout(multicast) Queue ï¼š æ¶ˆæ¯æœ€ç»ˆè¢«é€åˆ°è¿™é‡Œç­‰å¾… consumer å–èµ° Binding ï¼š exchange å’Œ queue ä¹‹é—´çš„è™šæ‹Ÿè¿æ¥ï¼Œbinding ä¸­å¯ä»¥åŒ…å« routing keyï¼ŒBinding ä¿¡æ¯è¢«ä¿å­˜åˆ° exchange ä¸­çš„æŸ¥è¯¢è¡¨ä¸­ï¼Œç”¨äº message çš„åˆ†å‘ä¾æ® RabbitMQå®‰è£…ç•¥â€¦.æ¨èä½¿ç”¨Dockerå®‰è£…å­¦ä¹ ï¼Œå‚è€ƒæ–‡ç« ï¼šDockeræ“ä½œç¬”è®°-ä»å°ç™½åˆ°å…¥é—¨ RabbitMQåœ¨å®‰è£…å¥½åï¼Œå¯ä»¥è®¿é—®http://ipåœ°å€:15672 ;å…¶è‡ªå¸¦äº†guest/guestçš„ ç”¨æˆ·åå’Œå¯†ç ã€‚ è§’è‰²è¯´æ˜ è¶…çº§ç®¡ç†å‘˜(administrator)ï¼šå¯ç™»é™†ç®¡ç†æ§åˆ¶å°ï¼Œå¯æŸ¥çœ‹æ‰€æœ‰çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥å¯¹ç”¨æˆ·ï¼Œç­–ç•¥(policy)è¿›è¡Œæ“ ä½œã€‚ ç›‘æ§è€…(monitoring)ï¼šå¯ç™»é™†ç®¡ç†æ§åˆ¶å°ï¼ŒåŒæ—¶å¯ä»¥æŸ¥çœ‹rabbitmqèŠ‚ç‚¹çš„ç›¸å…³ä¿¡æ¯(è¿›ç¨‹æ•°ï¼Œå†…å­˜ä½¿ç”¨ æƒ…å†µï¼Œç£ç›˜ä½¿ç”¨æƒ…å†µç­‰)ã€‚ ç­–ç•¥åˆ¶å®šè€…(policymaker)ï¼šå¯ç™»é™†ç®¡ç†æ§åˆ¶å°, åŒæ—¶å¯ä»¥å¯¹policyè¿›è¡Œç®¡ç†ã€‚ä½†æ— æ³•æŸ¥çœ‹èŠ‚ç‚¹çš„ç›¸å…³ä¿¡æ¯(ä¸Š å›¾çº¢æ¡†æ ‡è¯†çš„éƒ¨åˆ†)ã€‚ æ™®é€šç®¡ç†è€…(management)ï¼šä»…å¯ç™»é™†ç®¡ç†æ§åˆ¶å°ï¼Œæ— æ³•çœ‹åˆ°èŠ‚ç‚¹ä¿¡æ¯ï¼Œä¹Ÿæ— æ³•å¯¹ç­–ç•¥è¿›è¡Œç®¡ç†ã€‚ å…¶ä»–ï¼šæ— æ³•ç™»é™†ç®¡ç†æ§åˆ¶å°ï¼Œé€šå¸¸å°±æ˜¯æ™®é€šçš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ã€‚ æ¶ˆæ¯åº”ç­”åŠæŒä¹…åŒ–æ¶ˆæ¯åº”ç­”æœºåˆ¶æ¦‚å¿µæ¶ˆè´¹è€…å®Œæˆä¸€ä¸ªä»»åŠ¡å¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªæ¶ˆè´¹è€…å¤„ç†ä¸€ä¸ªé•¿çš„ä»»åŠ¡å¹¶ä»…åªå®Œæˆäº†éƒ¨åˆ†çªç„¶å®ƒæŒ‚æ‰äº†ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µã€‚RabbitMQ ä¸€æ—¦å‘æ¶ˆè´¹è€…ä¼ é€’äº†ä¸€æ¡æ¶ˆæ¯ï¼Œä¾¿ç«‹å³å°†è¯¥æ¶ˆæ¯æ ‡è®°ä¸ºåˆ é™¤ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œçªç„¶æœ‰ä¸ªæ¶ˆè´¹è€…æŒ‚æ‰äº†ï¼Œæˆ‘ä»¬å°†ä¸¢å¤±æ­£åœ¨å¤„ç†çš„æ¶ˆæ¯ã€‚ä»¥åŠåç»­å‘é€ç»™è¯¥æ¶ˆè´¹è¿™çš„æ¶ˆæ¯ï¼Œå› ä¸ºå®ƒæ— æ³•æ¥æ”¶åˆ°ã€‚ä¸ºäº†ä¿è¯æ¶ˆæ¯åœ¨å‘é€è¿‡ç¨‹ä¸­ä¸ä¸¢å¤±ï¼Œrabbitmq å¼•å…¥æ¶ˆæ¯åº”ç­”æœºåˆ¶ï¼Œæ¶ˆæ¯åº”ç­”å°±æ˜¯: æ¶ˆè´¹è€…åœ¨æ¥æ”¶åˆ°æ¶ˆæ¯å¹¶ä¸”å¤„ç†è¯¥æ¶ˆæ¯ä¹‹åï¼Œå‘Šè¯‰rabbitmq å®ƒå·²ç»å¤„ç†äº†ï¼Œrabbitmq å¯ä»¥æŠŠè¯¥æ¶ˆæ¯åˆ é™¤äº†ã€‚ è‡ªåŠ¨åº”ç­”æ¶ˆæ¯å‘é€åç«‹å³è¢«è®¤ä¸ºå·²ç»ä¼ é€æˆåŠŸï¼Œè¿™ç§æ¨¡å¼éœ€è¦åœ¨é«˜ååé‡å’Œæ•°æ®ä¼ è¾“å®‰å…¨æ€§æ–¹é¢åšæƒè¡¡,å› ä¸ºè¿™ç§æ¨¡å¼å¦‚æœæ¶ˆæ¯åœ¨æ¥æ”¶åˆ°ä¹‹å‰ï¼Œæ¶ˆè´¹è€…é‚£è¾¹å‡ºç°è¿æ¥æˆ–è€… channel å…³é—­ï¼Œé‚£ä¹ˆæ¶ˆæ¯å°±ä¸¢å¤±äº†,å½“ç„¶å¦ä¸€æ–¹é¢è¿™ç§æ¨¡å¼æ¶ˆè´¹è€…é‚£è¾¹å¯ä»¥ä¼ é€’è¿‡è½½çš„æ¶ˆæ¯ï¼Œæ²¡æœ‰å¯¹ä¼ é€’çš„æ¶ˆæ¯æ•°é‡è¿›è¡Œé™åˆ¶ï¼Œå½“ç„¶è¿™æ ·æœ‰å¯èƒ½ä½¿å¾—æ¶ˆè´¹è€…è¿™è¾¹ç”±äºæ¥æ”¶å¤ªå¤šè¿˜æ¥ä¸åŠå¤„ç†çš„æ¶ˆæ¯ï¼Œå¯¼è‡´è¿™äº›æ¶ˆæ¯çš„ç§¯å‹ï¼Œæœ€ç»ˆä½¿å¾—å†…å­˜è€—å°½ï¼Œæœ€ç»ˆè¿™äº›æ¶ˆè´¹è€…çº¿ç¨‹è¢«æ“ä½œç³»ç»Ÿæ€æ­»ï¼Œ æ‰€ä»¥è¿™ç§æ¨¡å¼ä»…é€‚ç”¨åœ¨æ¶ˆè´¹è€…å¯ä»¥é«˜æ•ˆå¹¶ä»¥æŸç§é€Ÿç‡èƒ½å¤Ÿå¤„ç†è¿™äº›æ¶ˆæ¯çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ æ€»ç»“ï¼šå°½é‡å°‘ç”¨è‡ªåŠ¨åº”ç­”ï¼Œè‡ªåŠ¨åº”ç­”æ˜¯åœ¨æ¥æ”¶åˆ°æ¶ˆæ¯çš„ä¸€åˆ¹é‚£å°±è¿›è¡Œäº†åº”ç­”ï¼Œå¦‚æœåç»­å¯¹æ¶ˆæ¯è¿›è¡Œäº†å¤„ç†å‡ºç°é”™è¯¯ï¼Œä¸èƒ½é‡æ–°ä»é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯å¤„ç†ã€‚ æ‰‹åŠ¨åº”ç­”æ¶ˆæ¯åº”ç­”çš„æ–¹æ³• Channel.basicAck(ç”¨äºè‚¯å®šç¡®è®¤)ï¼šRabbitMQ å·²çŸ¥é“è¯¥æ¶ˆæ¯å¹¶ä¸”æˆåŠŸçš„å¤„ç†æ¶ˆæ¯ï¼Œå¯ä»¥å°†å…¶ä¸¢å¼ƒäº† Channel.basicNack(ç”¨äºå¦å®šç¡®è®¤) Channel.basicReject(ç”¨äºå¦å®šç¡®è®¤)ï¼šä¸ Channel.basicNack ç›¸æ¯”å°‘ä¸€ä¸ªå‚æ•°(æ˜¯å¦æ‰¹é‡å¤„ç†)ï¼Œä¸å¤„ç†è¯¥æ¶ˆæ¯äº†ç›´æ¥æ‹’ç»ï¼Œå¯ä»¥å°†å…¶ä¸¢å¼ƒäº† æ‰‹åŠ¨åº”ç­”çš„å¥½å¤„æ˜¯å¯ä»¥æ‰¹é‡åº”ç­”å¹¶ä¸”å‡å°‘ç½‘ç»œæ‹¥å µ multiple çš„ true å’Œ false ä»£è¡¨ä¸åŒæ„æ€ true ä»£è¡¨æ‰¹é‡åº”ç­” channel ä¸Šæœªåº”ç­”çš„æ¶ˆæ¯ï¼Œæ¯”å¦‚è¯´ channel ä¸Šæœ‰ä¼ é€ tag çš„æ¶ˆæ¯ 5,6,7,8 å½“å‰ tag æ˜¯ 8 é‚£ä¹ˆæ­¤æ—¶5-8 çš„è¿™äº›è¿˜æœªåº”ç­”çš„æ¶ˆæ¯éƒ½ä¼šè¢«ç¡®è®¤æ”¶åˆ°æ¶ˆæ¯åº”ç­” false åŒä¸Šé¢ç›¸æ¯”åªä¼šåº”ç­” tag=8 çš„æ¶ˆæ¯ 5,6,7 è¿™ä¸‰ä¸ªæ¶ˆæ¯ä¾ç„¶ä¸ä¼šè¢«ç¡®è®¤æ”¶åˆ°æ¶ˆæ¯åº”ç­” æ¶ˆæ¯è‡ªåŠ¨é‡æ–°å…¥é˜Ÿå¦‚æœæ¶ˆè´¹è€…ç”±äºæŸäº›åŸå› å¤±å»è¿æ¥(å…¶é€šé“å·²å…³é—­ï¼Œè¿æ¥å·²å…³é—­æˆ– TCP è¿æ¥ä¸¢å¤±)ï¼Œå¯¼è‡´æ¶ˆæ¯æœªå‘é€ ACK ç¡®è®¤ï¼ŒRabbitMQ å°†äº†è§£åˆ°æ¶ˆæ¯æœªå®Œå…¨å¤„ç†ï¼Œå¹¶å°†å¯¹å…¶é‡æ–°æ’é˜Ÿã€‚å¦‚æœæ­¤æ—¶å…¶ä»–æ¶ˆè´¹è€…å¯ä»¥å¤„ç†ï¼Œå®ƒå°†å¾ˆå¿«å°†å…¶é‡æ–°åˆ†å‘ç»™å¦ä¸€ä¸ªæ¶ˆè´¹è€…ã€‚è¿™æ ·ï¼Œå³ä½¿æŸä¸ªæ¶ˆè´¹è€…å¶å°”æ­»äº¡ï¼Œä¹Ÿå¯ä»¥ç¡®ä¿ä¸ä¼šä¸¢å¤±ä»»ä½•æ¶ˆæ¯ã€‚ æ¶ˆæ¯æ‰‹åŠ¨åº”ç­”ä»£ç ç¼–å†™é»˜è®¤æ¶ˆæ¯é‡‡ç”¨çš„æ˜¯è‡ªåŠ¨åº”ç­”ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æƒ³å®ç°æ¶ˆæ¯æ¶ˆè´¹è¿‡ç¨‹ä¸­ä¸ä¸¢å¤±ï¼Œéœ€è¦æŠŠè‡ªåŠ¨åº”ç­”æ”¹ä¸ºæ‰‹åŠ¨åº”ç­”ï¼Œæ¶ˆè´¹è€…åœ¨ä¸Šé¢ä»£ç çš„åŸºç¡€ä¸Šå¢åŠ ä¸‹é¢ç”»çº¢è‰²éƒ¨åˆ†ä»£ç ã€‚ æ¶ˆæ¯ç”Ÿäº§è€…123456789101112131415161718public class Producer &#123; // é˜Ÿåˆ—åç§° public static final String TASK_QUEUE_NAME = &quot;ack_queue&quot;; public static void main(String[] args) throws Exception &#123; Channel channel = RabbitMqUtils.getChannel(); // å£°æ˜é˜Ÿåˆ—ï¼šé˜Ÿåˆ—åç§°ï¼Œæ˜¯å¦æŒä¹…åŒ–ï¼Œæ˜¯å¦å…±äº«ï¼Œè‡ªåŠ¨åˆ é™¤ï¼Œå‚æ•° channel.queueDeclare(TASK_QUEUE_NAME, false, false, false, null); Scanner scanner = new Scanner(System.in); while (scanner.hasNext()) &#123; String message = scanner.next(); channel.basicPublish(&quot;&quot;, TASK_QUEUE_NAME, null, message.getBytes(StandardCharsets.UTF_8)); log.info(&quot;ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼š&#123;&#125;&quot;, message); &#125; &#125;&#125; RabbitMQ è¿æ¥å·¥å…·ç±» 123456789101112131415public class RabbitMqUtils &#123; // å¾—åˆ°ä¸€ä¸ªè¿æ¥çš„ channel public static Channel getChannel() throws Exception &#123; // åˆ›å»ºä¸€ä¸ªè¿æ¥å·¥å‚ ConnectionFactory factory = new ConnectionFactory(); factory.setHost(&quot;127.0.0.1&quot;); factory.setPort(5672); factory.setUsername(&quot;guest&quot;); factory.setPassword(&quot;guest&quot;); factory.setVirtualHost(&quot;demo&quot;); Connection connection = factory.newConnection(); Channel channel = connection.createChannel(); return channel; &#125;&#125; æ¶ˆè´¹è€…1234567891011121314151617181920212223242526public class Work01 &#123; private static final String ACK_QUEUE_NAME = &quot;ack_queue&quot;; public static void main(String[] args) throws Exception &#123; Channel channel = RabbitMqUtils.getChannel(); System.out.println(&quot;Work01 ç­‰å¾…æ¥æ”¶æ¶ˆæ¯å¤„ç†æ—¶é—´è¾ƒçŸ­&quot;); // æ¶ˆæ¯æ¶ˆè´¹çš„æ—¶å€™å¦‚ä½•å¤„ç†æ¶ˆæ¯ DeliverCallback deliverCallback = (consumerTag, delivery) -&gt; &#123; String message = new String(delivery.getBody()); // ä¸šåŠ¡å¤„ç†è€—æ—¶1ç§’ SleepUtils.sleep(1); System.out.println(&quot; æ¥æ”¶åˆ°æ¶ˆæ¯:&quot; + message); /** * é‡‡ç”¨æ‰‹åŠ¨åº”ç­” * 1. æ¶ˆæ¯æ ‡è®° tag * 2. æ˜¯å¦æ‰¹é‡åº”ç­”æœªåº”ç­”æ¶ˆæ¯ï¼šä¸æ‰¹é‡ä¿¡é“ä¸­çš„æ¶ˆæ¯ */ channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false); &#125;; // ***é‡‡ç”¨æ‰‹åŠ¨åº”ç­” boolean autoAck = false; channel.basicConsume(ACK_QUEUE_NAME, autoAck, deliverCallback, (consumerTag) -&gt; &#123; System.out.println(consumerTag + &quot; æ¶ˆè´¹è€…å–æ¶ˆæ¶ˆè´¹æ¥å£å›è°ƒé€»è¾‘&quot;); &#125;); &#125;&#125; ç¡çœ å·¥å…· 123456789public class SleepUtils &#123; public static void sleep(int second) &#123; try &#123; Thread.sleep(1000L * second); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125; RabbitMQ æŒä¹…åŒ–æŒä¹…åŒ–æ¦‚å¿µåˆšåˆšæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å¦‚ä½•å¤„ç†ä»»åŠ¡ä¸ä¸¢å¤±çš„æƒ…å†µï¼Œä½†æ˜¯å¦‚ä½•ä¿éšœå½“ RabbitMQ æœåŠ¡åœæ‰ä»¥åæ¶ˆæ¯ç”Ÿäº§è€…å‘é€è¿‡æ¥çš„æ¶ˆæ¯ä¸ä¸¢å¤±ã€‚é»˜è®¤æƒ…å†µä¸‹ RabbitMQ é€€å‡ºæˆ–ç”±äºæŸç§åŸå› å´©æºƒæ—¶ï¼Œå®ƒå¿½è§†é˜Ÿåˆ—å’Œæ¶ˆæ¯ï¼Œé™¤éå‘ŠçŸ¥å®ƒä¸è¦è¿™æ ·åšã€‚ç¡®ä¿æ¶ˆæ¯ä¸ä¼šä¸¢å¤±éœ€è¦åšä¸¤ä»¶äº‹ï¼šæˆ‘ä»¬éœ€è¦å°†é˜Ÿåˆ—å’Œæ¶ˆæ¯éƒ½æ ‡è®°ä¸ºæŒä¹…åŒ–ã€‚ é˜Ÿåˆ—å®ç°æŒä¹…åŒ–ä¹‹å‰æˆ‘ä»¬åˆ›å»ºçš„é˜Ÿåˆ—éƒ½æ˜¯éæŒä¹…åŒ–çš„ï¼Œrabbitmq å¦‚æœé‡å¯çš„åŒ–ï¼Œè¯¥é˜Ÿåˆ—å°±ä¼šè¢«åˆ é™¤æ‰ï¼Œå¦‚æœ è¦é˜Ÿåˆ—å®ç°æŒä¹…åŒ– éœ€è¦åœ¨å£°æ˜é˜Ÿåˆ—çš„æ—¶å€™æŠŠ durable å‚æ•°è®¾ç½®ä¸ºæŒä¹…åŒ– ä½†æ˜¯éœ€è¦æ³¨æ„çš„å°±æ˜¯å¦‚æœä¹‹å‰å£°æ˜çš„é˜Ÿåˆ—ä¸æ˜¯æŒä¹…åŒ–çš„ï¼Œéœ€è¦æŠŠåŸå…ˆé˜Ÿåˆ—å…ˆåˆ é™¤ï¼Œæˆ–è€…é‡æ–°åˆ›å»ºä¸€ä¸ªæŒä¹…åŒ–çš„é˜Ÿåˆ—ï¼Œä¸ç„¶å°±ä¼šå‡ºç°é”™è¯¯ã€‚ ä»¥ä¸‹ä¸ºæ§åˆ¶å°ä¸­æŒä¹…åŒ–ä¸éæŒä¹…åŒ–é˜Ÿåˆ—çš„ UI æ˜¾ç¤ºåŒºï¼š è¿™ä¸ªæ—¶å€™å³ä½¿é‡å¯ rabbitmq é˜Ÿåˆ—ä¹Ÿä¾ç„¶å­˜åœ¨ã€‚ æ¶ˆæ¯å®ç°æŒä¹…åŒ–è¦æƒ³è®©æ¶ˆæ¯å®ç°æŒä¹…åŒ–éœ€è¦åœ¨æ¶ˆæ¯ç”Ÿäº§è€…ä¿®æ”¹ä»£ç ï¼ŒMessageProperties.PERSISTENT_TEXT_PLAIN æ·»åŠ è¿™ä¸ªå±æ€§ï¼Œå¦‚ä¸‹å›¾ å°†æ¶ˆæ¯æ ‡è®°ä¸ºæŒä¹…åŒ–å¹¶ä¸èƒ½å®Œå…¨ä¿è¯ä¸ä¼šä¸¢å¤±æ¶ˆæ¯ã€‚å°½ç®¡å®ƒå‘Šè¯‰ RabbitMQ å°†æ¶ˆæ¯ä¿å­˜åˆ°ç£ç›˜ï¼Œä½†æ˜¯ è¿™é‡Œä¾ç„¶å­˜åœ¨å½“æ¶ˆæ¯åˆšå‡†å¤‡å­˜å‚¨åœ¨ç£ç›˜çš„æ—¶å€™ ä½†æ˜¯è¿˜æ²¡æœ‰å­˜å‚¨å®Œï¼Œæ¶ˆæ¯è¿˜åœ¨ç¼“å­˜çš„ä¸€ä¸ªé—´éš”ç‚¹ã€‚æ­¤æ—¶å¹¶æ²¡ æœ‰çœŸæ­£å†™å…¥ç£ç›˜ã€‚æŒä¹…æ€§ä¿è¯å¹¶ä¸å¼ºï¼Œä½†æ˜¯å¯¹äºæˆ‘ä»¬çš„ç®€å•ä»»åŠ¡é˜Ÿåˆ—è€Œè¨€ï¼Œè¿™å·²ç»ç»°ç»°æœ‰ä½™äº†ã€‚å¦‚æœéœ€è¦ æ›´å¼ºæœ‰åŠ›çš„æŒä¹…åŒ–ç­–ç•¥ï¼Œå‚è€ƒåè¾¹è¯¾ä»¶å‘å¸ƒç¡®è®¤ç« èŠ‚ã€‚ ä¸å…¬å¹³åˆ†å‘åœ¨æœ€å¼€å§‹çš„æ—¶å€™æˆ‘ä»¬å­¦ä¹ åˆ° RabbitMQ åˆ†å‘æ¶ˆæ¯é‡‡ç”¨çš„è½®è®­åˆ†å‘ï¼Œä½†æ˜¯åœ¨æŸç§åœºæ™¯ä¸‹è¿™ç§ç­–ç•¥å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œæ¯”æ–¹è¯´æœ‰ä¸¤ä¸ªæ¶ˆè´¹è€…åœ¨å¤„ç†ä»»åŠ¡ï¼Œå…¶ä¸­æœ‰ä¸ªæ¶ˆè´¹è€… 1 å¤„ç†ä»»åŠ¡çš„é€Ÿåº¦éå¸¸å¿«ï¼Œè€Œå¦å¤–ä¸€ä¸ªæ¶ˆè´¹è€… 2 å¤„ç†é€Ÿåº¦å´å¾ˆæ…¢ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¿˜æ˜¯é‡‡ç”¨è½®è®­åˆ†å‘çš„åŒ–å°±ä¼šåˆ°è¿™å¤„ç†é€Ÿåº¦å¿«çš„è¿™ä¸ªæ¶ˆè´¹è€…å¾ˆå¤§ä¸€éƒ¨åˆ†æ—¶é—´å¤„äºç©ºé—²çŠ¶æ€ï¼Œè€Œå¤„ç†æ…¢çš„é‚£ä¸ªæ¶ˆè´¹è€…ä¸€ç›´åœ¨å¹²æ´»ï¼Œè¿™ç§åˆ†é…æ–¹å¼åœ¨è¿™ç§æƒ…å†µä¸‹å…¶å®å°±ä¸å¤ªå¥½ï¼Œä½†æ˜¯RabbitMQ å¹¶ä¸çŸ¥é“è¿™ç§æƒ…å†µå®ƒä¾ç„¶å¾ˆå…¬å¹³çš„è¿›è¡Œåˆ†å‘ã€‚ æ³¨ï¼šä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®å‚æ•° channel.basicQos(1)ï¼Œä¸å…¬å¹³åˆ†å‘ç”±æ¶ˆè´¹æ–¹è®¾ç½®ï¼Œç”Ÿäº§ç¯å¢ƒåº”è¯¥è®¾ç½®ä¸ºä¸å…¬å¹³åˆ†å‘ã€‚ æ„æ€å°±æ˜¯å¦‚æœè¿™ä¸ªä»»åŠ¡æˆ‘è¿˜æ²¡æœ‰å¤„ç†å®Œæˆ–è€…æˆ‘è¿˜æ²¡æœ‰åº”ç­”ä½ ï¼Œä½ å…ˆåˆ«åˆ†é…ç»™æˆ‘ï¼Œæˆ‘ç›®å‰åªèƒ½å¤„ç†ä¸€ä¸ªä»»åŠ¡ï¼Œç„¶å rabbitmq å°±ä¼šæŠŠè¯¥ä»»åŠ¡åˆ†é…ç»™æ²¡æœ‰é‚£ä¹ˆå¿™çš„é‚£ä¸ªç©ºé—²æ¶ˆè´¹è€…ï¼Œå½“ç„¶å¦‚æœæ‰€æœ‰çš„æ¶ˆè´¹è€…éƒ½æ²¡æœ‰å®Œæˆæ‰‹ä¸Šä»»åŠ¡ï¼Œé˜Ÿåˆ—è¿˜åœ¨ä¸åœçš„æ·»åŠ æ–°ä»»åŠ¡ï¼Œé˜Ÿåˆ—æœ‰å¯èƒ½å°±ä¼šé‡åˆ°é˜Ÿåˆ—è¢«æ’‘æ»¡çš„æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™å°±åªèƒ½æ·»åŠ æ–°çš„ worker æˆ–è€…æ”¹å˜å…¶ä»–å­˜å‚¨ä»»åŠ¡çš„ç­–ç•¥ã€‚ å‘å¸ƒç¡®è®¤å‘å¸ƒç¡®è®¤åŸç†ç”Ÿäº§è€…å°†ä¿¡é“è®¾ç½®æˆ confirm æ¨¡å¼ï¼Œä¸€æ—¦ä¿¡é“è¿›å…¥confirm æ¨¡å¼ï¼Œæ‰€æœ‰åœ¨è¯¥ä¿¡é“ä¸Šé¢å‘å¸ƒçš„æ¶ˆæ¯éƒ½å°†ä¼šè¢«æŒ‡æ´¾ä¸€ä¸ªå”¯ä¸€çš„ID(ä»1å¼€å§‹)ï¼Œä¸€æ—¦æ¶ˆæ¯è¢«æŠ•é€’åˆ°æ‰€æœ‰åŒ¹é…çš„é˜Ÿåˆ—ä¹‹åï¼Œbroker å°±ä¼šå‘é€ä¸€ä¸ªç¡®è®¤ç»™ç”Ÿäº§è€…(åŒ…å«æ¶ˆæ¯çš„å”¯ä¸€ID)ï¼Œè¿™å°±ä½¿å¾—ç”Ÿäº§è€…çŸ¥é“æ¶ˆæ¯å·²ç»æ­£ç¡®åˆ°è¾¾ç›®çš„é˜Ÿåˆ—äº†ï¼Œå¦‚æœæ¶ˆæ¯å’Œé˜Ÿåˆ—æ˜¯å¯æŒä¹…åŒ–çš„ï¼Œé‚£ä¹ˆç¡®è®¤æ¶ˆæ¯ä¼šåœ¨å°†æ¶ˆæ¯å†™å…¥ç£ç›˜ä¹‹åå‘å‡ºï¼Œbrokerå›ä¼  ç»™ç”Ÿäº§è€…çš„ç¡®è®¤æ¶ˆæ¯ä¸­ delivery-tag åŸŸåŒ…å«äº†ç¡®è®¤æ¶ˆæ¯çš„åºåˆ—å·ï¼Œæ­¤å¤–brokerä¹Ÿå¯ä»¥è®¾ç½®basic.ackçš„multipleåŸŸï¼Œè¡¨ç¤ºåˆ°è¿™ä¸ªåºåˆ—å·ä¹‹å‰çš„æ‰€æœ‰æ¶ˆæ¯éƒ½å·²ç»å¾—åˆ°äº†å¤„ç†ã€‚confirm æ¨¡å¼æœ€å¤§çš„å¥½å¤„åœ¨äºä»–æ˜¯å¼‚æ­¥çš„ï¼Œä¸€æ—¦å‘å¸ƒä¸€æ¡æ¶ˆæ¯ï¼Œç”Ÿäº§è€…åº”ç”¨ç¨‹åºå°±å¯ä»¥åœ¨ç­‰ä¿¡é“è¿”å›ç¡®è®¤çš„åŒæ—¶ç»§ç»­å‘é€ä¸‹ä¸€æ¡æ¶ˆæ¯ï¼Œå½“æ¶ˆæ¯æœ€ç»ˆå¾—åˆ°ç¡®è®¤ä¹‹åï¼Œç”Ÿäº§è€…åº”ç”¨ä¾¿å¯ä»¥é€šè¿‡å›è°ƒæ–¹æ³•æ¥å¤„ç†è¯¥ç¡®è®¤æ¶ˆæ¯ï¼Œå¦‚æœ RabbitMQå› ä¸ºè‡ªèº«å†…éƒ¨é”™è¯¯å¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ï¼Œå°±ä¼šå‘é€ä¸€æ¡nackæ¶ˆ æ¯ï¼Œç”Ÿäº§è€…åº”ç”¨ç¨‹åºåŒæ ·å¯ä»¥åœ¨å›è°ƒæ–¹æ³•ä¸­å¤„ç†è¯¥nackæ¶ˆæ¯ã€‚ å‘å¸ƒç¡®è®¤çš„ç­–ç•¥å¼€å¯å‘å¸ƒç¡®è®¤çš„æ–¹æ³•å‘å¸ƒç¡®è®¤é»˜è®¤æ˜¯æ²¡æœ‰å¼€å¯çš„ï¼Œå¦‚æœè¦å¼€å¯éœ€è¦è°ƒç”¨æ–¹æ³• confirmSelectï¼Œæ¯å½“ä½ è¦æƒ³ä½¿ç”¨å‘å¸ƒç¡®è®¤ï¼Œéƒ½éœ€è¦åœ¨ channel ä¸Šè°ƒç”¨è¯¥æ–¹æ³•ã€‚ 12Channel channel = connection.createchannel();channel.confirmselect(); ç¬¬ä¸€ç§ï¼šå•ä¸ªç¡®è®¤å‘å¸ƒè¿™æ˜¯ä¸€ç§ç®€å•çš„ç¡®è®¤æ–¹å¼ï¼Œå®ƒæ˜¯ä¸€ç§åŒæ­¥ç¡®è®¤å‘å¸ƒçš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯å‘å¸ƒä¸€ä¸ªæ¶ˆæ¯ä¹‹ååªæœ‰å®ƒ è¢«ç¡®è®¤å‘å¸ƒï¼Œåç»­çš„æ¶ˆæ¯æ‰èƒ½ç»§ç»­å‘å¸ƒ,waitForConfirmsOrDie(long)è¿™ä¸ªæ–¹æ³•åªæœ‰åœ¨æ¶ˆæ¯è¢«ç¡®è®¤ çš„æ—¶å€™æ‰è¿”å›ï¼Œå¦‚æœåœ¨æŒ‡å®šæ—¶é—´èŒƒå›´å†…è¿™ä¸ªæ¶ˆæ¯æ²¡æœ‰è¢«ç¡®è®¤é‚£ä¹ˆå®ƒå°†æŠ›å‡ºå¼‚å¸¸ã€‚è¿™ç§ç¡®è®¤æ–¹å¼æœ‰ä¸€ä¸ªæœ€å¤§çš„ç¼ºç‚¹å°±æ˜¯:å‘å¸ƒé€Ÿåº¦ç‰¹åˆ«çš„æ…¢ï¼Œå› ä¸ºå¦‚æœæ²¡æœ‰ç¡®è®¤å‘å¸ƒçš„æ¶ˆæ¯å°±ä¼š é˜»å¡æ‰€æœ‰åç»­æ¶ˆæ¯çš„å‘å¸ƒï¼Œè¿™ç§æ–¹å¼æœ€å¤šæä¾›æ¯ç§’ä¸è¶…è¿‡æ•°ç™¾æ¡å‘å¸ƒæ¶ˆæ¯çš„ååé‡ã€‚å½“ç„¶å¯¹äºæŸ äº›åº”ç”¨ç¨‹åºæ¥è¯´è¿™å¯èƒ½å·²ç»è¶³å¤Ÿäº†ã€‚ 123456789101112131415161718192021// å‘å¸ƒå•æ¡æ¶ˆæ¯1000æ¡è€—æ—¶æµ‹è¯•ï¼š 722mspublic static void publishMessageOne() throws Exception &#123; try (Channel channel = RabbitMqUtils.getChannel()) &#123; String queueName = UUID.randomUUID().toString(); channel.queueDeclare(queueName, false, false, false, null); // å¼€å¯å‘å¸ƒç¡®è®¤ channel.confirmSelect(); long begin = System.currentTimeMillis(); for (int i = 0; i &lt; MESSAGE_COUNT; i++) &#123; String message = i + &quot;&quot;; channel.basicPublish(&quot;&quot;, queueName, null, message.getBytes()); // å‘é€ä¹‹åé©¬ä¸Šè¿›è¡Œå‘å¸ƒç¡®è®¤ï¼ŒæœåŠ¡ç«¯è¿”å› false æˆ–è¶…æ—¶æ—¶é—´å†…æœªè¿”å›ï¼Œç”Ÿäº§è€…å¯ä»¥æ¶ˆæ¯é‡å‘ boolean flag = channel.waitForConfirms(); if (flag) &#123; System.out.println(&quot; æ¶ˆæ¯å‘é€æˆåŠŸ&quot;); &#125; &#125; long end = System.currentTimeMillis(); System.out.println(&quot; å‘å¸ƒ&quot; + MESSAGE_COUNT + &quot; ä¸ªå•ç‹¬ç¡®è®¤æ¶ˆæ¯, è€—æ—¶&quot; + (end - begin) + &quot;ms&quot;); &#125;&#125; ç¬¬äºŒç§ï¼šæ‰¹é‡ç¡®è®¤å‘å¸ƒä¸Šé¢é‚£ç§æ–¹å¼éå¸¸æ…¢ï¼Œä¸å•ä¸ªç­‰å¾…ç¡®è®¤æ¶ˆæ¯ç›¸æ¯”ï¼Œå…ˆå‘å¸ƒä¸€æ‰¹æ¶ˆæ¯ç„¶åä¸€èµ·ç¡®è®¤å¯ä»¥æå¤§åœ° æé«˜ååé‡ï¼Œå½“ç„¶è¿™ç§æ–¹å¼çš„ç¼ºç‚¹å°±æ˜¯:å½“å‘ç”Ÿæ•…éšœå¯¼è‡´å‘å¸ƒå‡ºç°é—®é¢˜æ—¶ï¼Œä¸çŸ¥é“æ˜¯å“ªä¸ªæ¶ˆæ¯å‡ºç° é—®é¢˜äº†ï¼Œæˆ‘ä»¬å¿…é¡»å°†æ•´ä¸ªæ‰¹å¤„ç†ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä»¥è®°å½•é‡è¦çš„ä¿¡æ¯è€Œåé‡æ–°å‘å¸ƒæ¶ˆæ¯ã€‚å½“ç„¶è¿™ç§ æ–¹æ¡ˆä»ç„¶æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿä¸€æ ·é˜»å¡æ¶ˆæ¯çš„å‘å¸ƒã€‚ 123456789101112131415161718192021222324252627282930// æ‰¹é‡å‘å¸ƒç¡®è®¤ å‘å¸ƒ1000ä¸ªæ¶ˆæ¯ï¼Œè€—æ—¶141mspublic static void publishMessageBatch() throws Exception &#123; try (Channel channel = RabbitMqUtils.getChannel()) &#123; String queueName = UUID.randomUUID().toString(); channel.queueDeclare(queueName, false, false, false, null); // å¼€å¯å‘å¸ƒç¡®è®¤ channel.confirmSelect(); // æ‰¹é‡ç¡®è®¤æ¶ˆæ¯å¤§å° int batchSize = 100; // æœªç¡®è®¤æ¶ˆæ¯ä¸ªæ•° int outstandingMessageCount = 0; long begin = System.currentTimeMillis(); for (int i = 0; i &lt; MESSAGE_COUNT; i++) &#123; String message = i + &quot;&quot;; channel.basicPublish(&quot;&quot;, queueName, null, message.getBytes()); outstandingMessageCount++; // 100æ¡ç¡®è®¤ä¸€æ¬¡ if (outstandingMessageCount == batchSize) &#123; channel.waitForConfirms(); outstandingMessageCount = 0; &#125; &#125; // ä¸ºäº†ç¡®ä¿è¿˜æœ‰å‰©ä½™æ²¡æœ‰ç¡®è®¤æ¶ˆæ¯ å†æ¬¡ç¡®è®¤ if (outstandingMessageCount &gt; 0) &#123; channel.waitForConfirms(); &#125; long end = System.currentTimeMillis(); System.out.println(&quot; å‘å¸ƒ&quot; + MESSAGE_COUNT + &quot; ä¸ªæ‰¹é‡ç¡®è®¤æ¶ˆæ¯, è€—æ—¶&quot; + (end - begin) + &quot;ms&quot;); &#125;&#125; ç¬¬ä¸‰ç§ï¼šå¼‚æ­¥ç¡®è®¤å‘å¸ƒå¼‚æ­¥ç¡®è®¤è™½ç„¶ç¼–ç¨‹é€»è¾‘æ¯”ä¸Šä¸¤ä¸ªè¦å¤æ‚ï¼Œä½†æ˜¯æ€§ä»·æ¯”æœ€é«˜ï¼Œæ— è®ºæ˜¯å¯é æ€§è¿˜æ˜¯æ•ˆç‡éƒ½æ²¡å¾—è¯´ï¼Œ ä»–æ˜¯åˆ©ç”¨å›è°ƒå‡½æ•°æ¥è¾¾åˆ°æ¶ˆæ¯å¯é æ€§ä¼ é€’çš„ï¼Œè¿™ä¸ªä¸­é—´ä»¶ä¹Ÿæ˜¯é€šè¿‡å‡½æ•°å›è°ƒæ¥ä¿è¯æ˜¯å¦æŠ•é€’æˆåŠŸï¼Œ ä¸‹é¢å°±è®©æˆ‘ä»¬æ¥è¯¦ç»†è®²è§£å¼‚æ­¥ç¡®è®¤æ˜¯æ€ä¹ˆå®ç°çš„ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758// å¼‚æ­¥å‘å¸ƒç¡®è®¤ å‘å¸ƒ1000ä¸ªæ¶ˆæ¯ï¼Œè€—æ—¶62mspublic static void publishMessageAsync() throws Exception &#123; try (Channel channel = RabbitMqUtils.getChannel()) &#123; String queueName = UUID.randomUUID().toString(); channel.queueDeclare(queueName, false, false, false, null); // å¼€å¯å‘å¸ƒç¡®è®¤ channel.confirmSelect(); /** * çº¿ç¨‹å®‰å…¨æœ‰åºçš„ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œé€‚ç”¨äºé«˜å¹¶å‘çš„æƒ…å†µ * 1. è½»æ¾çš„å°†åºå·ä¸æ¶ˆæ¯è¿›è¡Œå…³è” * 2. è½»æ¾æ‰¹é‡åˆ é™¤æ¡ç›® åªè¦ç»™åˆ°åºåˆ—å· * 3. æ”¯æŒå¹¶å‘è®¿é—® */ ConcurrentSkipListMap&lt;Long, String&gt; outstandingConfirms = new ConcurrentSkipListMap&lt;&gt;(); /** * ç¡®è®¤æ”¶åˆ°æ¶ˆæ¯çš„ä¸€ä¸ªå›è°ƒ * 1. æ¶ˆæ¯åºåˆ—å· * 2.true å¯ä»¥ç¡®è®¤å°äºç­‰äºå½“å‰åºåˆ—å·çš„æ¶ˆæ¯ * false ç¡®è®¤å½“å‰åºåˆ—å·æ¶ˆæ¯ */ ConfirmCallback ackCallback = (sequenceNumber, multiple) -&gt; &#123; if (multiple) &#123; // è¿”å›çš„æ˜¯å°äºç­‰äºå½“å‰åºåˆ—å·çš„æœªç¡®è®¤æ¶ˆæ¯ æ˜¯ä¸€ä¸ª map ConcurrentNavigableMap&lt;Long, String&gt; confirmed = outstandingConfirms.headMap(sequenceNumber, true); // æ¸…é™¤è¯¥éƒ¨åˆ†æœªç¡®è®¤æ¶ˆæ¯ confirmed.clear(); &#125;else&#123; // åªæ¸…é™¤å½“å‰åºåˆ—å·çš„æ¶ˆæ¯ outstandingConfirms.remove(sequenceNumber); &#125; &#125;; ConfirmCallback nackCallback = (sequenceNumber, multiple) -&gt; &#123; String message = outstandingConfirms.get(sequenceNumber); System.out.println(&quot; å‘å¸ƒçš„æ¶ˆæ¯&quot;+message+&quot; æœªè¢«ç¡®è®¤ï¼Œåºåˆ—å·&quot;+sequenceNumber); &#125;; /** * æ·»åŠ ä¸€ä¸ªå¼‚æ­¥ç¡®è®¤çš„ç›‘å¬å™¨ * 1. ç¡®è®¤æ”¶åˆ°æ¶ˆæ¯çš„å›è°ƒ * 2. æœªæ”¶åˆ°æ¶ˆæ¯çš„å›è°ƒ */ channel.addConfirmListener(ackCallback, null); long begin = System.currentTimeMillis(); for (int i = 0; i &lt; MESSAGE_COUNT; i++) &#123; String message = &quot; æ¶ˆæ¯&quot; + i; /** * channel.getNextPublishSeqNo() è·å–ä¸‹ä¸€ä¸ªæ¶ˆæ¯çš„åºåˆ—å· * é€šè¿‡åºåˆ—å·ä¸æ¶ˆæ¯ä½“è¿›è¡Œä¸€ä¸ªå…³è” * å…¨éƒ¨éƒ½æ˜¯æœªç¡®è®¤çš„æ¶ˆæ¯ä½“ */ outstandingConfirms.put(channel.getNextPublishSeqNo(), message); channel.basicPublish(&quot;&quot;, queueName, null, message.getBytes()); &#125; long end = System.currentTimeMillis(); System.out.println(&quot; å‘å¸ƒ&quot; + MESSAGE_COUNT + &quot; ä¸ªå¼‚æ­¥ç¡®è®¤æ¶ˆæ¯, è€—æ—¶&quot; + (end - begin) + &quot;ms&quot;); &#125;&#125; å¦‚ä½•å¤„ç†å¼‚æ­¥æœªç¡®è®¤æ¶ˆæ¯å¥½çš„è§£å†³çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯æŠŠæœªç¡®è®¤çš„æ¶ˆæ¯æ”¾åˆ°ä¸€ä¸ªåŸºäºå†…å­˜çš„èƒ½è¢«å‘å¸ƒçº¿ç¨‹è®¿é—®çš„é˜Ÿåˆ—ï¼Œ æ¯”å¦‚è¯´ç”¨ ConcurrentLinkedQueue è¿™ä¸ªé˜Ÿåˆ—åœ¨ confirm callbacks ä¸å‘å¸ƒçº¿ç¨‹ä¹‹é—´è¿›è¡Œæ¶ˆæ¯çš„ä¼  é€’ã€‚ 3ç§å‘å¸ƒç¡®è®¤é€Ÿåº¦å¯¹æ¯” å•ç‹¬å‘å¸ƒæ¶ˆæ¯ï¼šåŒæ­¥ç­‰å¾…ç¡®è®¤ï¼Œç®€å•ï¼Œä½†ååé‡éå¸¸æœ‰é™ã€‚ æ‰¹é‡å‘å¸ƒæ¶ˆæ¯ï¼šæ‰¹é‡åŒæ­¥ç­‰å¾…ç¡®è®¤ï¼Œç®€å•ï¼Œåˆç†çš„ååé‡ï¼Œä¸€æ—¦å‡ºç°é—®é¢˜ä½†å¾ˆéš¾æ¨æ–­å‡ºæ˜¯é‚£æ¡æ¶ˆæ¯å‡ºç°äº†é—®é¢˜ã€‚ å¼‚æ­¥å¤„ç†ï¼šæœ€ä½³æ€§èƒ½å’Œèµ„æºä½¿ç”¨ï¼Œåœ¨å‡ºç°é”™è¯¯çš„æƒ…å†µä¸‹å¯ä»¥å¾ˆå¥½åœ°æ§åˆ¶ï¼Œä½†æ˜¯å®ç°èµ·æ¥ç¨å¾®éš¾äº›ã€‚ äº¤æ¢æœºåœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå·¥ä½œé˜Ÿåˆ—ã€‚æˆ‘ä»¬å‡è®¾çš„æ˜¯å·¥ä½œé˜Ÿåˆ—èƒŒåï¼Œæ¯ä¸ªä»»åŠ¡éƒ½æ°å¥½äº¤ä»˜ç»™ä¸€ä¸ªæ¶ˆ è´¹è€…(å·¥ä½œè¿›ç¨‹)ã€‚åœ¨è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†åšä¸€äº›å®Œå…¨ä¸åŒçš„äº‹æƒ…-æˆ‘ä»¬å°†æ¶ˆæ¯ä¼ è¾¾ç»™å¤šä¸ªæ¶ˆè´¹è€…ã€‚è¿™ç§æ¨¡å¼ ç§°ä¸º â€å‘å¸ƒ/è®¢é˜…â€ï¼Œä¸ºäº†è¯´æ˜è¿™ç§æ¨¡å¼ï¼Œæˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªç®€å•çš„æ—¥å¿—ç³»ç»Ÿã€‚å®ƒå°†ç”±ä¸¤ä¸ªç¨‹åºç»„æˆ:ç¬¬ä¸€ä¸ªç¨‹åºå°†å‘å‡ºæ—¥å¿—æ¶ˆ æ¯ï¼Œç¬¬äºŒä¸ªç¨‹åºæ˜¯æ¶ˆè´¹è€…ã€‚å…¶ä¸­æˆ‘ä»¬ä¼šå¯åŠ¨ä¸¤ä¸ªæ¶ˆè´¹è€…ï¼Œå…¶ä¸­ä¸€ä¸ªæ¶ˆè´¹è€…æ¥æ”¶åˆ°æ¶ˆæ¯åæŠŠæ—¥å¿—å­˜å‚¨åœ¨ç£ç›˜ï¼Œå¦å¤–ä¸€ä¸ªæ¶ˆè´¹è€…æ¥æ”¶åˆ°æ¶ˆæ¯åæŠŠæ¶ˆæ¯æ‰“å°åœ¨å±å¹•ä¸Šï¼Œäº‹å®ä¸Šç¬¬ä¸€ä¸ªç¨‹åºå‘å‡ºçš„æ—¥å¿—æ¶ˆæ¯å°†å¹¿æ’­ç»™æ‰€æœ‰æ¶ˆè´¹è€…ã€‚ Exchangesæ¦‚å¿µRabbitMQ æ¶ˆæ¯ä¼ é€’æ¨¡å‹çš„æ ¸å¿ƒæ€æƒ³æ˜¯: ç”Ÿäº§è€…ç”Ÿäº§çš„æ¶ˆæ¯ä»ä¸ä¼šç›´æ¥å‘é€åˆ°é˜Ÿåˆ—ã€‚å®é™…ä¸Šï¼Œé€šå¸¸ç”Ÿäº§è€…ç”šè‡³éƒ½ä¸çŸ¥é“è¿™äº›æ¶ˆæ¯ä¼ é€’ä¼ é€’åˆ°äº†å“ªäº›é˜Ÿåˆ—ä¸­ã€‚ç›¸åï¼Œ**ç”Ÿäº§è€…åªèƒ½å°†æ¶ˆæ¯å‘é€åˆ°äº¤æ¢æœº(exchange)**ï¼Œäº¤æ¢æœºå·¥ä½œçš„å†…å®¹éå¸¸ç®€å•ï¼Œä¸€æ–¹é¢å®ƒæ¥æ”¶æ¥ è‡ªç”Ÿäº§è€…çš„æ¶ˆæ¯ï¼Œå¦ä¸€æ–¹é¢å°†å®ƒä»¬æ¨å…¥é˜Ÿåˆ—ã€‚äº¤æ¢æœºå¿…é¡»ç¡®åˆ‡çŸ¥é“å¦‚ä½•å¤„ç†æ”¶åˆ°çš„æ¶ˆæ¯ã€‚æ˜¯åº”è¯¥æŠŠè¿™äº›æ¶ˆ æ¯æ”¾åˆ°ç‰¹å®šé˜Ÿåˆ—è¿˜æ˜¯è¯´æŠŠä»–ä»¬åˆ°è®¸å¤šé˜Ÿåˆ—ä¸­è¿˜æ˜¯è¯´åº”è¯¥ä¸¢å¼ƒå®ƒä»¬ã€‚è¿™å°±çš„ç”±äº¤æ¢æœºçš„ç±»å‹æ¥å†³å®šã€‚ Exchanges çš„ç±»å‹ ç›´æ¥(direct) â€” è·¯ç”±ç±»å‹ ä¸»é¢˜(topic) â€” é€šé…ç¬¦åŒ¹é…æ¨¡å¼ æ ‡é¢˜(headers) â€” å·²ç»ä¸ç”¨äº† æ‰‡å‡º(fanout) â€” å‘å¸ƒè®¢é˜…ç±»å‹ æ— å exchangeç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº¤æ¢æœºçš„åç§°ã€‚ç©ºå­—ç¬¦ä¸²è¡¨ç¤ºé»˜è®¤æˆ–æ— åç§°äº¤æ¢æœºï¼šæ¶ˆæ¯èƒ½è·¯ç”±å‘é€åˆ°é˜Ÿåˆ—ä¸­å…¶å®æ˜¯ç”± routingKey(bindingkey)ç»‘å®š key æŒ‡å®šçš„ã€‚ ä¸´æ—¶é˜Ÿåˆ—æ¯å½“æˆ‘ä»¬è¿æ¥åˆ° Rabbit æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ä¸€ä¸ªå…¨æ–°çš„ç©ºé˜Ÿåˆ—ï¼Œä¸ºæ­¤æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå…·æœ‰éšæœºåç§°çš„é˜Ÿåˆ—ï¼Œæˆ–è€…èƒ½è®©æœåŠ¡å™¨ä¸ºæˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªéšæœºé˜Ÿåˆ—åç§°é‚£å°±æ›´å¥½äº†ã€‚å…¶æ¬¡ä¸€æ—¦æˆ‘ä»¬æ–­å¼€äº†æ¶ˆè´¹è€…çš„è¿æ¥ï¼Œé˜Ÿåˆ—å°†è¢«è‡ªåŠ¨åˆ é™¤ã€‚åˆ›å»ºä¸´æ—¶é˜Ÿåˆ—çš„æ–¹å¼å¦‚ä¸‹:String queueName = channel.queueDeclare().getQueue(); ç»‘å®š(bindings)ä»€ä¹ˆæ˜¯ bingding å‘¢ï¼Œbinding å…¶å®æ˜¯ exchange å’Œ queue ä¹‹é—´çš„æ¡¥æ¢ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬ exchange å’Œé‚£ä¸ªé˜Ÿ åˆ—è¿›è¡Œäº†ç»‘å®šå…³ç³»ã€‚æ¯”å¦‚è¯´ä¸‹é¢è¿™å¼ å›¾å‘Šè¯‰æˆ‘ä»¬çš„å°±æ˜¯ X ä¸ Q1 å’Œ Q2 è¿›è¡Œäº†ç»‘å®š Fanout(å‘å¸ƒè®¢é˜…äº¤æ¢æœº)Fanout è¿™ç§ç±»å‹éå¸¸ç®€å•ã€‚æ­£å¦‚ä»åç§°ä¸­çŒœåˆ°çš„é‚£æ ·ï¼Œå®ƒæ˜¯å°†æ¥æ”¶åˆ°çš„æ‰€æœ‰æ¶ˆæ¯å¹¿æ’­åˆ°å®ƒçŸ¥é“çš„ æ‰€æœ‰é˜Ÿåˆ—ä¸­ã€‚ç³»ç»Ÿä¸­é»˜è®¤æœ‰äº› exchange ç±»å‹ Fanout å®æˆ˜ Logs å’Œä¸´æ—¶é˜Ÿåˆ—çš„ç»‘å®šå…³ç³»å¦‚ä¸‹å›¾ å‘å¸ƒè®¢é˜…å‘å¸ƒè€…1234567891011121314151617181920public class EmitLog &#123; private static final String EXCHANGE_NAME = &quot;logs&quot;; public static void main(String[] argv) throws Exception &#123; try (Channel channel = RabbitMqUtils.getChannel()) &#123; /** * å£°æ˜ä¸€ä¸ª exchange * 1.exchange çš„åç§° * 2.exchange çš„ç±»å‹ */ channel.exchangeDeclare(EXCHANGE_NAME, &quot;fanout&quot;); Scanner sc = new Scanner(System.in); System.out.println(&quot; è¯·è¾“å…¥ä¿¡æ¯&quot;); while (sc.hasNext()) &#123; String message = sc.nextLine(); channel.basicPublish(EXCHANGE_NAME, &quot;&quot;, null, message.getBytes(&quot;UTF-8&quot;)); System.out.println(&quot; ç”Ÿäº§è€…å‘å‡ºæ¶ˆæ¯&quot; + message); &#125; &#125; &#125;&#125; å‘å¸ƒè®¢é˜…æ¥æ”¶è€…112345678910111213141516171819202122public class ReceiveLogs01 &#123; private static final String EXCHANGE_NAME = &quot;logs&quot;; public static void main(String[] argv) throws Exception &#123; Channel channel = RabbitMqUtils.getChannel(); channel.exchangeDeclare(EXCHANGE_NAME, &quot;fanout&quot;); /** * ç”Ÿæˆä¸€ä¸ªä¸´æ—¶çš„é˜Ÿåˆ— é˜Ÿåˆ—çš„åç§°æ˜¯éšæœºçš„ * å½“æ¶ˆè´¹è€…æ–­å¼€å’Œè¯¥é˜Ÿåˆ—çš„è¿æ¥æ—¶ é˜Ÿåˆ—è‡ªåŠ¨åˆ é™¤ */ String queueName = channel.queueDeclare().getQueue(); // æŠŠè¯¥ä¸´æ—¶é˜Ÿåˆ—ç»‘å®šæˆ‘ä»¬çš„ exchange å…¶ä¸­ routingkey( ä¹Ÿç§°ä¹‹ä¸º binding key) ä¸ºç©ºå­—ç¬¦ä¸² channel.queueBind(queueName, EXCHANGE_NAME, &quot;&quot;); System.out.println(&quot;01ç­‰å¾…æ¥æ”¶æ¶ˆæ¯, æŠŠæ¥æ”¶åˆ°çš„æ¶ˆæ¯æ‰“å°åœ¨å±å¹•.....&quot;); DeliverCallback deliverCallback = (consumerTag, delivery) -&gt; &#123; String message = new String(delivery.getBody(), StandardCharsets.UTF_8); System.out.println(&quot;01æ§åˆ¶å°æ‰“å°æ¥æ”¶åˆ°çš„æ¶ˆæ¯&quot; + message); &#125;; channel.basicConsume(queueName, true, deliverCallback, consumerTag -&gt; &#123; &#125;); &#125;&#125; å‘å¸ƒè®¢é˜…æ¥æ”¶è€…212345678910111213141516171819202122public class ReceiveLogs02 &#123; private static final String EXCHANGE_NAME = &quot;logs&quot;; public static void main(String[] argv) throws Exception &#123; Channel channel = RabbitMqUtils.getChannel(); channel.exchangeDeclare(EXCHANGE_NAME, &quot;fanout&quot;); /** * ç”Ÿæˆä¸€ä¸ªä¸´æ—¶çš„é˜Ÿåˆ— é˜Ÿåˆ—çš„åç§°æ˜¯éšæœºçš„ * å½“æ¶ˆè´¹è€…æ–­å¼€å’Œè¯¥é˜Ÿåˆ—çš„è¿æ¥æ—¶ é˜Ÿåˆ—è‡ªåŠ¨åˆ é™¤ */ String queueName = channel.queueDeclare().getQueue(); // æŠŠè¯¥ä¸´æ—¶é˜Ÿåˆ—ç»‘å®šæˆ‘ä»¬çš„ exchange å…¶ä¸­ routingkey( ä¹Ÿç§°ä¹‹ä¸º binding key) ä¸ºç©ºå­—ç¬¦ä¸² channel.queueBind(queueName, EXCHANGE_NAME, &quot;&quot;); System.out.println(&quot;02ç­‰å¾…æ¥æ”¶æ¶ˆæ¯, æŠŠæ¥æ”¶åˆ°çš„æ¶ˆæ¯æ‰“å°åœ¨å±å¹•.....&quot;); DeliverCallback deliverCallback = (consumerTag, delivery) -&gt; &#123; String message = new String(delivery.getBody(), StandardCharsets.UTF_8); System.out.println(&quot;02æ§åˆ¶å°æ‰“å°æ¥æ”¶åˆ°çš„æ¶ˆæ¯&quot; + message); &#125;; channel.basicConsume(queueName, true, deliverCallback, consumerTag -&gt; &#123; &#125;); &#125;&#125; Direct exchange(ç›´æ¥äº¤æ¢æœº)ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªç®€å•çš„æ—¥å¿—è®°å½•ç³»ç»Ÿã€‚æˆ‘ä»¬èƒ½å¤Ÿå‘è®¸å¤šæ¥æ”¶è€…å¹¿æ’­æ—¥å¿—æ¶ˆæ¯ã€‚åœ¨æœ¬èŠ‚æˆ‘ä»¬å°†å‘å…¶ä¸­æ·»åŠ ä¸€äº›ç‰¹åˆ«çš„åŠŸèƒ½-æ¯”æ–¹è¯´æˆ‘ä»¬åªè®©æŸä¸ªæ¶ˆè´¹è€…è®¢é˜…å‘å¸ƒçš„éƒ¨åˆ†æ¶ˆæ¯ã€‚ä¾‹å¦‚æˆ‘ä»¬åªæŠŠä¸¥é‡é”™è¯¯æ¶ˆæ¯å®šå‘å­˜å‚¨åˆ°æ—¥å¿—æ–‡ä»¶(ä»¥èŠ‚çœç£ç›˜ç©ºé—´)ï¼ŒåŒæ—¶ä»ç„¶èƒ½å¤Ÿåœ¨æ§åˆ¶å°ä¸Šæ‰“å°æ‰€æœ‰æ—¥å¿—æ¶ˆæ¯ã€‚æˆ‘ä»¬å†æ¬¡æ¥å›é¡¾ä¸€ä¸‹ä»€ä¹ˆæ˜¯ bindingsï¼Œç»‘å®šæ˜¯äº¤æ¢æœºå’Œé˜Ÿåˆ—ä¹‹é—´çš„æ¡¥æ¢å…³ç³»ã€‚ä¹Ÿå¯ä»¥è¿™ä¹ˆç†è§£ï¼šé˜Ÿåˆ—åªå¯¹å®ƒç»‘å®šçš„äº¤æ¢æœºçš„æ¶ˆæ¯æ„Ÿå…´è¶£ã€‚ç»‘å®šç”¨å‚æ•°ï¼šroutingKey æ¥è¡¨ç¤ºä¹Ÿå¯ç§°è¯¥å‚æ•°ä¸º binding keyï¼Œåˆ›å»ºç»‘å®šæˆ‘ä»¬ç”¨ä»£ç :channel.queueBind(queueName, EXCHANGE_NAME, &quot;routingKey&quot;);ç»‘å®šä¹‹åçš„æ„ä¹‰ç”±å…¶äº¤æ¢ç±»å‹å†³å®šã€‚ ç›´æ¥äº¤æ¢æœºå‘å¸ƒè€…12345678910111213141516171819202122public class EmitLogDirect &#123; private static final String EXCHANGE_NAME = &quot;direct_logs&quot;; public static void main(String[] argv) throws Exception &#123; try (Channel channel = RabbitMqUtils.getChannel()) &#123; channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.DIRECT); // åˆ›å»ºå¤šä¸ª bindingKey Map&lt;String, String&gt; bindingKeyMap = new HashMap&lt;&gt;(); bindingKeyMap.put(&quot;info&quot;, &quot; æ™®é€š info ä¿¡æ¯&quot;); bindingKeyMap.put(&quot;warning&quot;, &quot; è­¦å‘Š warning ä¿¡æ¯&quot;); bindingKeyMap.put(&quot;error&quot;, &quot; é”™è¯¯ error ä¿¡æ¯&quot;); //debug æ²¡æœ‰æ¶ˆè´¹è¿™æ¥æ”¶è¿™ä¸ªæ¶ˆæ¯ æ‰€æœ‰å°±ä¸¢å¤±äº† bindingKeyMap.put(&quot;debug&quot;, &quot; è°ƒè¯• debug ä¿¡æ¯&quot;); for (Map.Entry&lt;String, String&gt; bindingKeyEntry : bindingKeyMap.entrySet()) &#123; String bindingKey = bindingKeyEntry.getKey(); String message = bindingKeyEntry.getValue(); channel.basicPublish(EXCHANGE_NAME, bindingKey, null, message.getBytes(StandardCharsets.UTF_8)); System.out.println(&quot; ç”Ÿäº§è€…å‘å‡ºæ¶ˆæ¯:&quot; + message); &#125; &#125; &#125;&#125; ç›´æ¥äº¤æ¢æœºæ¶ˆè´¹è€…11234567891011121314151617181920public class ReceiveLogsDirect01 &#123; private static final String EXCHANGE_NAME = &quot;direct_logs&quot;; public static void main(String[] argv) throws Exception &#123; Channel channel = RabbitMqUtils.getChannel(); channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.DIRECT); String queueName = &quot;disk&quot;; channel.queueDeclare(queueName, false, false, false, null); channel.queueBind(queueName, EXCHANGE_NAME, &quot;error&quot;); System.out.println(&quot; ç­‰å¾…æ¥æ”¶æ¶ˆæ¯.....&quot;); DeliverCallback deliverCallback = (consumerTag, delivery) -&gt; &#123; String message = new String(delivery.getBody(), &quot;UTF-8&quot;); message = &quot; æ¥æ”¶ç»‘å®šé”®:&quot; + delivery.getEnvelope().getRoutingKey() + &quot;, æ¶ˆæ¯:&quot; + message; // å†™ç£ç›˜å¿½ç•¥ System.out.println(&quot; é”™è¯¯æ—¥å¿—å·²ç»æ¥æ”¶&quot; + message); &#125;; channel.basicConsume(queueName, true, deliverCallback, consumerTag -&gt; &#123; &#125;); &#125;&#125; ç›´æ¥äº¤æ¢æœºæ¶ˆè´¹è€…212345678910111213141516171819public class ReceiveLogsDirect02 &#123; private static final String EXCHANGE_NAME = &quot;direct_logs&quot;; public static void main(String[] argv) throws Exception &#123; Channel channel = RabbitMqUtils.getChannel(); channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.DIRECT); String queueName = &quot;console&quot;; channel.queueDeclare(queueName, false, false, false, null); channel.queueBind(queueName, EXCHANGE_NAME, &quot;info&quot;); channel.queueBind(queueName, EXCHANGE_NAME, &quot;warning&quot;); System.out.println(&quot; ç­‰å¾…æ¥æ”¶æ¶ˆæ¯.....&quot;); DeliverCallback deliverCallback = (consumerTag, delivery) -&gt; &#123; String message = new String(delivery.getBody(), &quot;UTF-8&quot;); System.out.println(&quot; æ¥ æ”¶ ç»‘ å®š é”® :&quot; + delivery.getEnvelope().getRoutingKey() + &quot;, æ¶ˆæ¯:&quot; + message); &#125;; channel.basicConsume(queueName, true, deliverCallback, consumerTag -&gt; &#123; &#125;); &#125;&#125; Topics(ä¸»é¢˜äº¤æ¢æœº)åœ¨ä¸Šä¸€ä¸ªå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ”¹è¿›äº†æ—¥å¿—è®°å½•ç³»ç»Ÿã€‚æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨åªèƒ½è¿›è¡Œéšæ„å¹¿æ’­çš„ fanout äº¤æ¢æœºï¼Œè€Œæ˜¯ä½¿ç”¨äº† direct äº¤æ¢æœºï¼Œä»è€Œæœ‰èƒ½å®ç°æœ‰é€‰æ‹©æ€§åœ°æ¥æ”¶æ—¥å¿—ã€‚å°½ç®¡ä½¿ç”¨ direct äº¤æ¢æœºæ”¹è¿›äº†æˆ‘ä»¬çš„ç³»ç»Ÿï¼Œä½†æ˜¯å®ƒä»ç„¶å­˜åœ¨å±€é™æ€§-æ¯”æ–¹è¯´æˆ‘ä»¬æƒ³æ¥æ”¶çš„æ—¥å¿—ç±»å‹æœ‰info.base å’Œ info.advantageï¼ŒæŸä¸ªé˜Ÿåˆ—åªæƒ³ info.base çš„æ¶ˆæ¯ï¼Œé‚£è¿™ä¸ªæ—¶å€™ direct å°±åŠä¸åˆ°äº†ã€‚è¿™ä¸ªæ—¶å€™å°±åªèƒ½ä½¿ç”¨ topic ç±»å‹ã€‚ Topic è¦æ±‚å‘é€åˆ°ç±»å‹æ˜¯ topic äº¤æ¢æœºçš„æ¶ˆæ¯çš„ routing_key ä¸èƒ½éšæ„å†™ï¼Œå¿…é¡»æ»¡è¶³ä¸€å®šçš„è¦æ±‚ï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªå•è¯åˆ—è¡¨ï¼Œä»¥ç‚¹å·åˆ†éš”å¼€ã€‚è¿™äº›å•è¯å¯ä»¥æ˜¯ä»»æ„å•è¯ï¼Œæ¯”å¦‚è¯´ï¼šâ€stock.usd.nyseâ€, â€œnyse.vmwâ€,â€quick.orange.rabbitâ€.è¿™ç§ç±»å‹çš„ã€‚å½“ç„¶è¿™ä¸ªå•è¯åˆ—è¡¨æœ€å¤šä¸èƒ½è¶…è¿‡ 255 ä¸ªå­—èŠ‚ã€‚åœ¨è¿™ä¸ªè§„åˆ™åˆ—è¡¨ä¸­ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªæ›¿æ¢ç¬¦æ˜¯å¤§å®¶éœ€è¦æ³¨æ„çš„ *(æ˜Ÿå·)å¯ä»¥ä»£æ›¿ä¸€ä¸ªå•è¯ #(äº•å·)å¯ä»¥æ›¿ä»£é›¶ä¸ªæˆ–å¤šä¸ªå•è¯ Topic åŒ¹é…æ¡ˆä¾‹ä¸‹å›¾ç»‘å®šå…³ç³»å¦‚ä¸‹ï¼š Q1â€“&gt;ç»‘å®šçš„æ˜¯ï¼šä¸­é—´å¸¦ orange å¸¦ 3 ä¸ªå•è¯çš„å­—ç¬¦ä¸²(.orange.) Q2â€“&gt;ç»‘å®šçš„æ˜¯ï¼šæœ€åä¸€ä¸ªå•è¯æ˜¯ rabbit çš„ 3 ä¸ªå•è¯(..rabbit) ç¬¬ä¸€ä¸ªå•è¯æ˜¯ lazy çš„å¤šä¸ªå•è¯(lazy.#) ä¸Šå›¾æ˜¯ä¸€ä¸ªé˜Ÿåˆ—ç»‘å®šå…³ç³»å›¾ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä»–ä»¬ä¹‹é—´æ•°æ®æ¥æ”¶æƒ…å†µæ˜¯æ€ä¹ˆæ ·çš„quick.orange.rabbit â€”â€”â€”â€” è¢«é˜Ÿåˆ— Q1Q2 æ¥æ”¶åˆ°lazy.orange.elephant â€”â€”â€”â€” è¢«é˜Ÿåˆ— Q1Q2 æ¥æ”¶åˆ°quick.orange.fox â€”â€”â€”â€” è¢«é˜Ÿåˆ— Q1 æ¥æ”¶åˆ°lazy.brown.fox â€”â€”â€”â€” è¢«é˜Ÿåˆ— Q2 æ¥æ”¶åˆ°lazy.pink.rabbit â€”â€”â€”â€” è™½ç„¶æ»¡è¶³ä¸¤ä¸ªç»‘å®šä½†åªè¢«é˜Ÿåˆ— Q2 æ¥æ”¶ä¸€æ¬¡quick.brown.fox â€”â€”â€”â€” ä¸åŒ¹é…ä»»ä½•ç»‘å®šä¸ä¼šè¢«ä»»ä½•é˜Ÿåˆ—æ¥æ”¶åˆ°ä¼šè¢«ä¸¢å¼ƒquick.orange.male.rabbit â€”â€”â€”â€” æ˜¯å››ä¸ªå•è¯ä¸åŒ¹é…ä»»ä½•ç»‘å®šä¼šè¢«ä¸¢å¼ƒlazy.orange.male.rabbit â€”â€”â€”â€” æ˜¯å››ä¸ªå•è¯ä½†åŒ¹é… Q2 å½“é˜Ÿåˆ—ç»‘å®šå…³ç³»æ˜¯ä¸‹åˆ—è¿™ç§æƒ…å†µæ—¶éœ€è¦å¼•èµ·æ³¨æ„ å½“ä¸€ä¸ªé˜Ÿåˆ—ç»‘å®šé”®æ˜¯#,é‚£ä¹ˆè¿™ä¸ªé˜Ÿåˆ—å°†æ¥æ”¶æ‰€æœ‰æ•°æ®ï¼Œå°±æœ‰ç‚¹åƒ fanout äº†ï¼Œå¦‚æœé˜Ÿåˆ—ç»‘å®šé”®å½“ä¸­æ²¡æœ‰#å’Œ*å‡ºç°ï¼Œé‚£ä¹ˆè¯¥é˜Ÿåˆ—ç»‘å®šç±»å‹å°±æ˜¯ direct äº†ã€‚ æ­»ä¿¡é˜Ÿåˆ—æ­»ä¿¡çš„æ¦‚å¿µå…ˆä»æ¦‚å¿µè§£é‡Šä¸Šææ¸…æ¥šè¿™ä¸ªå®šä¹‰ï¼Œæ­»ä¿¡ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯æ— æ³•è¢«æ¶ˆè´¹çš„æ¶ˆæ¯ï¼Œå­—é¢æ„æ€å¯ä»¥è¿™æ ·ç† è§£ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œproducer å°†æ¶ˆæ¯æŠ•é€’åˆ° broker æˆ–è€…ç›´æ¥åˆ° queue é‡Œäº†ï¼Œconsumer ä» queue å–å‡ºæ¶ˆæ¯ è¿›è¡Œæ¶ˆè´¹ï¼Œä½†æŸäº›æ—¶å€™ç”±äºç‰¹å®šçš„åŸå› å¯¼è‡´ queue ä¸­çš„æŸäº›æ¶ˆæ¯æ— æ³•è¢«æ¶ˆè´¹ï¼Œè¿™æ ·çš„æ¶ˆæ¯å¦‚æœæ²¡æœ‰ åç»­çš„å¤„ç†ï¼Œå°±å˜æˆäº†æ­»ä¿¡ï¼Œæœ‰æ­»ä¿¡è‡ªç„¶å°±æœ‰äº†æ­»ä¿¡é˜Ÿåˆ—ã€‚ åº”ç”¨åœºæ™¯:ä¸ºäº†ä¿è¯è®¢å•ä¸šåŠ¡çš„æ¶ˆæ¯æ•°æ®ä¸ä¸¢å¤±ï¼Œéœ€è¦ä½¿ç”¨åˆ° RabbitMQ çš„æ­»ä¿¡é˜Ÿåˆ—æœºåˆ¶ï¼Œå½“æ¶ˆæ¯ æ¶ˆè´¹å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå°†æ¶ˆæ¯æŠ•å…¥æ­»ä¿¡é˜Ÿåˆ—ä¸­.è¿˜æœ‰æ¯”å¦‚è¯´: ç”¨æˆ·åœ¨å•†åŸä¸‹å•æˆåŠŸå¹¶ç‚¹å‡»å»æ”¯ä»˜ååœ¨æŒ‡å®šæ—¶ é—´æœªæ”¯ä»˜æ—¶è‡ªåŠ¨å¤±æ•ˆ æ­»ä¿¡çš„æ¥æº æ¶ˆæ¯ TTL è¿‡æœŸ é˜Ÿåˆ—è¾¾åˆ°æœ€å¤§é•¿åº¦(é˜Ÿåˆ—æ»¡äº†ï¼Œæ— æ³•å†æ·»åŠ æ•°æ®åˆ° mq ä¸­) æ¶ˆæ¯è¢«æ‹’ç»(basic.reject æˆ– basic.nack)å¹¶ä¸” requeue=false. ä»£ç æ¶æ„å›¾ æ¶ˆæ¯TTLè¿‡æœŸä»£ç æ­»ä¿¡ç”Ÿäº§è€…123456789101112131415161718public class Producer &#123; private static final String NORMAL_EXCHANGE = &quot;normal_exchange&quot;; public static void main(String[] argv) throws Exception &#123; try (Channel channel = RabbitMqUtils.getChannel()) &#123; channel.exchangeDeclare(NORMAL_EXCHANGE, BuiltinExchangeType.DIRECT); // è®¾ç½®æ¶ˆæ¯çš„ TTL æ—¶é—´ AMQP.BasicProperties properties = new AMQP.BasicProperties().builder().expiration(&quot;10000&quot;).build(); // è¯¥ä¿¡æ¯æ˜¯ç”¨ä½œæ¼”ç¤ºé˜Ÿåˆ—ä¸ªæ•°é™åˆ¶ for (int i = 1; i &lt; 11; i++) &#123; String message = &quot;info&quot; + i; channel.basicPublish(NORMAL_EXCHANGE, &quot;zhangsan&quot;, properties, message.getBytes()); System.out.println(&quot; ç”Ÿäº§è€…å‘é€æ¶ˆæ¯:&quot; + message); &#125; &#125; &#125;&#125; æ­»ä¿¡æ¶ˆè´¹è€…C1æ¶ˆè´¹è€… C1 ( å¯åŠ¨ä¹‹åå…³é—­è¯¥æ¶ˆè´¹è€… æ¨¡æ‹Ÿå…¶æ¥æ”¶ä¸åˆ°æ¶ˆæ¯) 12345678910111213141516171819202122232425262728293031323334public class Consumer01 &#123; // æ™®é€šäº¤æ¢æœºåç§° private static final String NORMAL_EXCHANGE = &quot;normal_exchange&quot;; // æ­»ä¿¡äº¤æ¢æœºåç§° private static final String DEAD_EXCHANGE = &quot;dead_exchange&quot;; public static void main(String[] argv) throws Exception &#123; Channel channel = RabbitMqUtils.getChannel(); // å£°æ˜æ­»ä¿¡å’Œæ™®é€šäº¤æ¢æœº ç±»å‹ä¸º direct channel.exchangeDeclare(NORMAL_EXCHANGE, BuiltinExchangeType.DIRECT); channel.exchangeDeclare(DEAD_EXCHANGE, BuiltinExchangeType.DIRECT); // å£°æ˜æ­»ä¿¡é˜Ÿåˆ— String deadQueue = &quot;dead-queue&quot;; channel.queueDeclare(deadQueue, false, false, false, null); // æ­»ä¿¡é˜Ÿåˆ—ç»‘å®šæ­»ä¿¡äº¤æ¢æœºä¸ routingkey channel.queueBind(deadQueue, DEAD_EXCHANGE, &quot;lisi&quot;); // æ­£å¸¸é˜Ÿåˆ—ç»‘å®šæ­»ä¿¡é˜Ÿåˆ—ä¿¡æ¯ Map&lt;String, Object&gt; params = new HashMap&lt;&gt;(); // æ­£å¸¸é˜Ÿåˆ—è®¾ç½®æ­»ä¿¡äº¤æ¢æœº å‚æ•° key æ˜¯å›ºå®šå€¼ params.put(&quot;x-dead-letter-exchange&quot;, DEAD_EXCHANGE); // æ­£å¸¸é˜Ÿåˆ—è®¾ç½®æ­»ä¿¡ routing-key å‚æ•° key æ˜¯å›ºå®šå€¼ params.put(&quot;x-dead-letter-routing-key&quot;, &quot;lisi&quot;); String normalQueue = &quot;normal-queue&quot;; channel.queueDeclare(normalQueue, false, false, false, params); channel.queueBind(normalQueue, NORMAL_EXCHANGE, &quot;zhangsan&quot;); System.out.println(&quot; ç­‰å¾…æ¥æ”¶æ¶ˆæ¯.....&quot;); DeliverCallback deliverCallback = (consumerTag, delivery) -&gt; &#123; String message = new String(delivery.getBody(), &quot;UTF-8&quot;); System.out.println(&quot;Consumer01 æ¥æ”¶åˆ°æ¶ˆæ¯&quot; + message); &#125;; channel.basicConsume(normalQueue, true, deliverCallback, consumerTag -&gt; &#123; &#125;); &#125;&#125; æ­»ä¿¡é˜Ÿåˆ—æ¶ˆè´¹è€…æ¶ˆè´¹è€… C2 ( ä»¥ä¸Šæ­¥éª¤å®Œæˆå å¯åŠ¨ C2 æ¶ˆè´¹è€…å®ƒæ¶ˆè´¹æ­»ä¿¡é˜Ÿåˆ—é‡Œé¢çš„æ¶ˆæ¯) 123456789101112131415161718public class Consumer02 &#123; private static final String DEAD_EXCHANGE = &quot;dead_exchange&quot;; public static void main(String[] argv) throws Exception &#123; Channel channel = RabbitMqUtils.getChannel(); channel.exchangeDeclare(DEAD_EXCHANGE, BuiltinExchangeType.DIRECT); String deadQueue = &quot;dead-queue&quot;; channel.queueDeclare(deadQueue, false, false, false, null); channel.queueBind(deadQueue, DEAD_EXCHANGE, &quot;lisi&quot;); System.out.println(&quot; ç­‰å¾…æ¥æ”¶æ­»ä¿¡é˜Ÿåˆ—æ¶ˆæ¯.....&quot;); DeliverCallback deliverCallback = (consumerTag, delivery) -&gt; &#123; String message = new String(delivery.getBody(), &quot;UTF-8&quot;); System.out.println(&quot;Consumer02 æ¥æ”¶æ­»ä¿¡é˜Ÿåˆ—çš„æ¶ˆæ¯&quot; + message); &#125;; channel.basicConsume(deadQueue, true, deliverCallback, consumerTag -&gt; &#123; &#125;); &#125;&#125; é˜Ÿåˆ—è¾¾åˆ°æœ€å¤§é•¿åº¦ç”Ÿäº§è€…æ¶ˆæ¯ç”Ÿäº§è€…ä»£ç å»æ‰ TTL å±æ€§ 123456789101112131415public class TooLongProducer &#123; private static final String NORMAL_EXCHANGE = &quot;normal_exchange&quot;; public static void main(String[] argv) throws Exception &#123; try (Channel channel = RabbitMqUtils.getChannel()) &#123; channel.exchangeDeclare(NORMAL_EXCHANGE, BuiltinExchangeType.DIRECT); // è¯¥ä¿¡æ¯æ˜¯ç”¨ä½œæ¼”ç¤ºé˜Ÿåˆ—ä¸ªæ•°é™åˆ¶ for (int i = 1; i &lt; 11; i++) &#123; String message = &quot;info&quot; + i; channel.basicPublish(NORMAL_EXCHANGE, &quot;zhangsan&quot;, null, message.getBytes()); System.out.println(&quot; ç”Ÿäº§è€…å‘é€æ¶ˆæ¯:&quot; + message); &#125; &#125; &#125;&#125; æ¶ˆè´¹è€…C1 æ¶ˆè´¹è€…ä¿®æ”¹ä»¥ä¸‹ä»£ç  ( å¯åŠ¨ä¹‹åå…³é—­è¯¥æ¶ˆè´¹è€… æ¨¡æ‹Ÿå…¶æ¥æ”¶ä¸åˆ°æ¶ˆæ¯) æ³¨æ„æ­¤æ—¶éœ€è¦æŠŠåŸå…ˆé˜Ÿåˆ—åˆ é™¤ å› ä¸ºå‚æ•°æ”¹å˜äº† ,C2 æ¶ˆè´¹è€…ä»£ç ä¸å˜( å¯åŠ¨ C2 æ¶ˆè´¹è€…) æ¶ˆæ¯è¢«æ‹’è¿›å…¥æ­»ä¿¡ä»£ç ç•¥ å»¶è¿Ÿé˜Ÿåˆ—å»¶æ—¶é˜Ÿåˆ—,é˜Ÿåˆ—å†…éƒ¨æ˜¯æœ‰åºçš„ï¼Œæœ€é‡è¦çš„ç‰¹æ€§å°±ä½“ç°åœ¨å®ƒçš„å»¶æ—¶å±æ€§ä¸Šï¼Œå»¶æ—¶é˜Ÿåˆ—ä¸­çš„å…ƒç´ æ˜¯å¸Œæœ›åœ¨æŒ‡å®šæ—¶é—´åˆ°äº†ä»¥åæˆ–ä¹‹å‰å–å‡ºå’Œå¤„ç†ï¼Œç®€å•æ¥è¯´ï¼Œå»¶æ—¶é˜Ÿåˆ—å°±æ˜¯ç”¨æ¥å­˜æ”¾éœ€è¦åœ¨æŒ‡å®šæ—¶é—´è¢«å¤„ç†çš„å…ƒç´ çš„é˜Ÿåˆ—ã€‚ å»¶è¿Ÿé˜Ÿåˆ—ä½¿ç”¨åœºæ™¯ è®¢å•åœ¨ååˆ†é’Ÿä¹‹å†…æœªæ”¯ä»˜åˆ™è‡ªåŠ¨å–æ¶ˆ æ–°åˆ›å»ºçš„åº—é“ºï¼Œå¦‚æœåœ¨åå¤©å†…éƒ½æ²¡æœ‰ä¸Šä¼ è¿‡å•†å“ï¼Œåˆ™è‡ªåŠ¨å‘é€æ¶ˆæ¯æé†’ã€‚ ç”¨æˆ·æ³¨å†ŒæˆåŠŸåï¼Œå¦‚æœä¸‰å¤©å†…æ²¡æœ‰ç™»é™†åˆ™è¿›è¡ŒçŸ­ä¿¡æé†’ã€‚ ç”¨æˆ·å‘èµ·é€€æ¬¾ï¼Œå¦‚æœä¸‰å¤©å†…æ²¡æœ‰å¾—åˆ°å¤„ç†åˆ™é€šçŸ¥ç›¸å…³è¿è¥äººå‘˜ã€‚ é¢„å®šä¼šè®®åï¼Œéœ€è¦åœ¨é¢„å®šçš„æ—¶é—´ç‚¹å‰ååˆ†é’Ÿé€šçŸ¥å„ä¸ªä¸ä¼šäººå‘˜å‚åŠ ä¼šè®® RabbitMQ ä¸­çš„ TTLTTL æ˜¯ä»€ä¹ˆå‘¢ï¼ŸTTL æ˜¯ RabbitMQ ä¸­ä¸€ä¸ªæ¶ˆæ¯æˆ–è€…é˜Ÿåˆ—çš„å±æ€§ï¼Œè¡¨æ˜ä¸€æ¡æ¶ˆæ¯æˆ–è€…è¯¥é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰æ¶ˆæ¯çš„æœ€å¤§å­˜æ´»æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœä¸€æ¡æ¶ˆæ¯è®¾ç½®äº† TTL å±æ€§æˆ–è€…è¿›å…¥äº†è®¾ç½® TTL å±æ€§çš„é˜Ÿåˆ—ï¼Œé‚£ä¹ˆè¿™æ¡æ¶ˆæ¯å¦‚æœåœ¨ TTL è®¾ç½®çš„æ—¶é—´å†…æ²¡æœ‰è¢«æ¶ˆè´¹ï¼Œåˆ™ä¼šæˆä¸ºâ€æ­»ä¿¡â€ã€‚å¦‚æœåŒæ—¶é…ç½®äº†é˜Ÿåˆ—çš„ TTL å’Œæ¶ˆæ¯çš„TTLï¼Œé‚£ä¹ˆè¾ƒå°çš„é‚£ä¸ªå€¼å°†ä¼šè¢«ä½¿ç”¨ï¼Œæœ‰ä¸¤ç§æ–¹å¼è®¾ç½® TTLã€‚ æ¶ˆæ¯è®¾ç½® TTLå¦ä¸€ç§æ–¹å¼ä¾¿æ˜¯é’ˆå¯¹æ¯æ¡æ¶ˆæ¯è®¾ç½® TTL é˜Ÿåˆ—è®¾ç½® TTLç¬¬ä¸€ç§æ˜¯åœ¨åˆ›å»ºé˜Ÿåˆ—çš„æ—¶å€™è®¾ç½®é˜Ÿåˆ—çš„â€œx-message-ttlâ€å±æ€§ ä¸¤è€…çš„åŒºåˆ«å¦‚æœè®¾ç½®äº†é˜Ÿåˆ—çš„ TTL å±æ€§ï¼Œé‚£ä¹ˆä¸€æ—¦æ¶ˆæ¯è¿‡æœŸï¼Œå°±ä¼šè¢«é˜Ÿåˆ—ä¸¢å¼ƒ(å¦‚æœé…ç½®äº†æ­»ä¿¡é˜Ÿåˆ—è¢«ä¸¢åˆ°æ­»ä¿¡é˜Ÿåˆ—ä¸­)ï¼Œè€Œç¬¬äºŒç§æ–¹å¼ï¼Œæ¶ˆæ¯å³ä½¿è¿‡æœŸï¼Œä¹Ÿä¸ä¸€å®šä¼šè¢«é©¬ä¸Šä¸¢å¼ƒï¼Œå› ä¸ºæ¶ˆæ¯æ˜¯å¦è¿‡æœŸæ˜¯åœ¨å³å°†æŠ•é€’åˆ°æ¶ˆè´¹è€…ä¹‹å‰åˆ¤å®šçš„ï¼Œå¦‚æœå½“å‰é˜Ÿåˆ—æœ‰ä¸¥é‡çš„æ¶ˆæ¯ç§¯å‹æƒ…å†µï¼Œåˆ™å·²è¿‡æœŸçš„æ¶ˆæ¯ä¹Ÿè®¸è¿˜èƒ½å­˜æ´»è¾ƒé•¿æ—¶é—´ï¼›å¦å¤–ï¼Œè¿˜éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœä¸è®¾ç½® TTLï¼Œè¡¨ç¤ºæ¶ˆæ¯æ°¸è¿œä¸ä¼šè¿‡æœŸï¼Œå¦‚æœå°† TTL è®¾ç½®ä¸º 0ï¼Œåˆ™è¡¨ç¤ºé™¤éæ­¤æ—¶å¯ä»¥ç›´æ¥æŠ•é€’è¯¥æ¶ˆæ¯åˆ°æ¶ˆè´¹è€…ï¼Œå¦åˆ™è¯¥æ¶ˆæ¯å°†ä¼šè¢«ä¸¢å¼ƒã€‚ å‰ä¸€å°èŠ‚æˆ‘ä»¬ä»‹ç»äº†æ­»ä¿¡é˜Ÿåˆ—ï¼Œåˆšåˆšåˆä»‹ç»äº† TTLï¼Œè‡³æ­¤åˆ©ç”¨ RabbitMQ å®ç°å»¶æ—¶é˜Ÿåˆ—çš„ä¸¤å¤§è¦ç´ å·²ç»é›†é½ï¼Œæ¥ä¸‹æ¥åªéœ€è¦å°†å®ƒä»¬è¿›è¡Œèåˆï¼Œå†åŠ å…¥ä¸€ç‚¹ç‚¹è°ƒå‘³æ–™ï¼Œå»¶æ—¶é˜Ÿåˆ—å°±å¯ä»¥æ–°é²œå‡ºç‚‰äº†ã€‚æƒ³æƒ³çœ‹ï¼Œå»¶æ—¶é˜Ÿåˆ—ï¼Œä¸å°±æ˜¯æƒ³è¦æ¶ˆæ¯å»¶è¿Ÿå¤šä¹…è¢«å¤„ç†å—ï¼ŒTTL åˆ™åˆšå¥½èƒ½è®©æ¶ˆæ¯åœ¨å»¶è¿Ÿå¤šä¹…ä¹‹åæˆä¸ºæ­»ä¿¡ï¼Œå¦ä¸€æ–¹é¢ï¼Œæˆä¸ºæ­»ä¿¡çš„æ¶ˆæ¯éƒ½ä¼šè¢«æŠ•é€’åˆ°æ­»ä¿¡é˜Ÿåˆ—é‡Œï¼Œè¿™æ ·åªéœ€è¦æ¶ˆè´¹è€…ä¸€ç›´æ¶ˆè´¹æ­»ä¿¡é˜Ÿåˆ—é‡Œçš„æ¶ˆæ¯å°±å®Œäº‹äº†ï¼Œå› ä¸ºé‡Œé¢çš„æ¶ˆæ¯éƒ½æ˜¯å¸Œæœ›è¢«ç«‹å³å¤„ç†çš„æ¶ˆæ¯ã€‚ æ•´åˆSpringBootæ·»åŠ ä¾èµ–123456789101112131415161718192021222324252627282930313233343536373839404142&lt;dependencies&gt; &lt;!--RabbitMQ ä¾èµ– --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.47&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--swagger--&gt; &lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;io.springfox&lt;/groupId&gt; &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt; &lt;/dependency&gt; &lt;!--RabbitMQ æµ‹è¯•ä¾èµ– --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt; &lt;artifactId&gt;spring-rabbit-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt;&lt;/dependencies&gt; ä¿®æ”¹é…ç½®æ–‡ä»¶1234spring.rabbitmq.host=127.0.0.1spring.rabbitmq.port=5672spring.rabbitmq.username=adminspring.rabbitmq.password=123 æ­»ä¿¡é˜Ÿåˆ—å®ç°å»¶è¿ŸMQåˆ›å»ºä¸¤ä¸ªé˜Ÿåˆ— QA å’Œ QBï¼Œä¸¤è€…é˜Ÿåˆ— TTL åˆ†åˆ«è®¾ç½®ä¸º 10S å’Œ 40Sï¼Œç„¶ååœ¨åˆ›å»ºä¸€ä¸ªäº¤æ¢æœº X å’Œæ­»ä¿¡äº¤æ¢æœº Yï¼Œå®ƒä»¬çš„ç±»å‹éƒ½æ˜¯ directï¼Œåˆ›å»ºä¸€ä¸ªæ­»ä¿¡é˜Ÿåˆ— QDï¼Œå®ƒä»¬çš„ç»‘å®šå…³ç³»å¦‚ä¸‹ï¼š é…ç½®æ–‡ä»¶ç±»ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172public class TtlQueueConfig &#123; public static final String X_EXCHANGE = &quot;X&quot;; public static final String QUEUE_A = &quot;QA&quot;; public static final String QUEUE_B = &quot;QB&quot;; public static final String Y_DEAD_LETTER_EXCHANGE = &quot;Y&quot;; public static final String DEAD_LETTER_QUEUE = &quot;QD&quot;; // å£°æ˜ xExchange @Bean(&quot;xExchange&quot;) public DirectExchange xExchange() &#123; return new DirectExchange(X_EXCHANGE); &#125; // å£°æ˜ xExchange @Bean(&quot;yExchange&quot;) public DirectExchange yExchange() &#123; return new DirectExchange(Y_DEAD_LETTER_EXCHANGE); &#125; // å£°æ˜é˜Ÿåˆ— A ttl ä¸º 10s å¹¶ç»‘å®šåˆ°å¯¹åº”çš„æ­»ä¿¡äº¤æ¢æœº @Bean(&quot;queueA&quot;) public Queue queueA() &#123; Map&lt;String, Object&gt; args = new HashMap&lt;&gt;(3); // å£°æ˜å½“å‰é˜Ÿåˆ—ç»‘å®šçš„æ­»ä¿¡äº¤æ¢æœº args.put(&quot;x-dead-letter-exchange&quot;, Y_DEAD_LETTER_EXCHANGE); // å£°æ˜å½“å‰é˜Ÿåˆ—çš„æ­»ä¿¡è·¯ç”± key args.put(&quot;x-dead-letter-routing-key&quot;, &quot;YD&quot;); // å£°æ˜é˜Ÿåˆ—çš„ TTL args.put(&quot;x-message-ttl&quot;, 10000); return QueueBuilder.durable(QUEUE_A).withArguments(args).build(); &#125; // å£°æ˜é˜Ÿåˆ— A ç»‘å®š X äº¤æ¢æœº @Bean public Binding queueaBindingX(@Qualifier(&quot;queueA&quot;) Queue queueA, @Qualifier(&quot;xExchange&quot;) DirectExchange xExchange) &#123; return BindingBuilder.bind(queueA).to(xExchange).with(&quot;XA&quot;); &#125; // å£°æ˜é˜Ÿåˆ— B ttl ä¸º 40s å¹¶ç»‘å®šåˆ°å¯¹åº”çš„æ­»ä¿¡äº¤æ¢æœº @Bean(&quot;queueB&quot;) public Queue queueB() &#123; Map&lt;String, Object&gt; args = new HashMap&lt;&gt;(3); // å£°æ˜å½“å‰é˜Ÿåˆ—ç»‘å®šçš„æ­»ä¿¡äº¤æ¢æœº args.put(&quot;x-dead-letter-exchange&quot;, Y_DEAD_LETTER_EXCHANGE); // å£°æ˜å½“å‰é˜Ÿåˆ—çš„æ­»ä¿¡è·¯ç”± key args.put(&quot;x-dead-letter-routing-key&quot;, &quot;YD&quot;); // å£°æ˜é˜Ÿåˆ—çš„ TTL args.put(&quot;x-message-ttl&quot;, 40000); return QueueBuilder.durable(QUEUE_B).withArguments(args).build(); &#125; // å£°æ˜é˜Ÿåˆ— B ç»‘å®š X äº¤æ¢æœº @Bean public Binding queuebBindingX(@Qualifier(&quot;queueB&quot;) Queue queue1B, @Qualifier(&quot;xExchange&quot;) DirectExchange xExchange) &#123; return BindingBuilder.bind(queue1B).to(xExchange).with(&quot;XB&quot;); &#125; // å£°æ˜æ­»ä¿¡é˜Ÿåˆ— QD @Bean(&quot;queueD&quot;) public Queue queueD() &#123; return new Queue(DEAD_LETTER_QUEUE); &#125; // å£°æ˜æ­»ä¿¡é˜Ÿåˆ— QD ç»‘å®šå…³ç³» @Bean public Binding deadLetterBindingQAD(@Qualifier(&quot;queueD&quot;) Queue queueD, @Qualifier(&quot;yExchange&quot;) DirectExchange yExchange) &#123; return BindingBuilder.bind(queueD).to(yExchange).with(&quot;YD&quot;); &#125;&#125; ç”Ÿäº§è€…ä»£ç 1234567891011121314@Slf4j@RequestMapping(&quot;ttl&quot;)@RestControllerpublic class SendMsgController &#123; @Autowired private RabbitTemplate rabbitTemplate; @GetMapping(&quot;sendMsg/&#123;message&#125;&quot;) public void sendMsg(@PathVariable String message) &#123; log.info(&quot; å½“å‰æ—¶é—´ï¼š&#123;&#125;, å‘é€ä¸€æ¡ä¿¡æ¯ç»™ä¸¤ä¸ª TTL é˜Ÿåˆ—:&#123;&#125;&quot;, new Date(), message); rabbitTemplate.convertAndSend(&quot;X&quot;, &quot;XA&quot;, &quot; æ¶ˆæ¯æ¥è‡ª ttl ä¸º ä¸º 10S çš„é˜Ÿåˆ—: &quot; + message); rabbitTemplate.convertAndSend(&quot;X&quot;, &quot;XB&quot;, &quot; æ¶ˆæ¯æ¥è‡ª ttl ä¸º ä¸º 40S çš„é˜Ÿåˆ—: &quot; + message); &#125;&#125; æ¶ˆè´¹è€…ä»£ç 123456789@Slf4j@Componentpublic class DeadLetterQueueConsumer &#123; @RabbitListener(queues = &quot;QD&quot;) public void receiveD(Message message, Channel channel) throws IOException &#123; String msg = new String(message.getBody()); log.info(&quot; å½“å‰æ—¶é—´ï¼š&#123;&#125;, æ”¶åˆ°æ­»ä¿¡é˜Ÿåˆ—ä¿¡æ¯&#123;&#125;&quot;, new Date().toString(), msg); &#125;&#125; ç¬¬ä¸€æ¡æ¶ˆæ¯åœ¨ 10S åå˜æˆäº†æ­»ä¿¡æ¶ˆæ¯ï¼Œç„¶åè¢«æ¶ˆè´¹è€…æ¶ˆè´¹æ‰ï¼Œç¬¬äºŒæ¡æ¶ˆæ¯åœ¨ 40S ä¹‹åå˜æˆäº†æ­»ä¿¡æ¶ˆæ¯ï¼Œç„¶åè¢«æ¶ˆè´¹æ‰ï¼Œè¿™æ ·ä¸€ä¸ªå»¶æ—¶é˜Ÿåˆ—å°±æ‰“é€ å®Œæˆäº†ã€‚ä¸è¿‡ï¼Œå¦‚æœè¿™æ ·ä½¿ç”¨çš„è¯ï¼Œå²‚ä¸æ˜¯æ¯å¢åŠ ä¸€ä¸ªæ–°çš„æ—¶é—´éœ€æ±‚ï¼Œå°±è¦æ–°å¢ä¸€ä¸ªé˜Ÿåˆ—ï¼Œè¿™é‡Œåªæœ‰ 10S å’Œ 40Sä¸¤ä¸ªæ—¶é—´é€‰é¡¹ï¼Œå¦‚æœéœ€è¦ä¸€ä¸ªå°æ—¶åå¤„ç†ï¼Œé‚£ä¹ˆå°±éœ€è¦å¢åŠ  TTL ä¸ºä¸€ä¸ªå°æ—¶çš„é˜Ÿåˆ—ï¼Œå¦‚æœæ˜¯é¢„å®šä¼šè®®å®¤ç„¶åæå‰é€šçŸ¥è¿™æ ·çš„åœºæ™¯ï¼Œå²‚ä¸æ˜¯è¦å¢åŠ æ— æ•°ä¸ªé˜Ÿåˆ—æ‰èƒ½æ»¡è¶³éœ€æ±‚ï¼Ÿ å»¶æ—¶é˜Ÿåˆ—ä¼˜åŒ–åœ¨è¿™é‡Œæ–°å¢äº†ä¸€ä¸ªé˜Ÿåˆ— QC,ç»‘å®šå…³ç³»å¦‚ä¸‹,è¯¥é˜Ÿåˆ—ä¸è®¾ç½® TTL æ—¶é—´ çœ‹èµ·æ¥ä¼¼ä¹æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯åœ¨æœ€å¼€å§‹çš„æ—¶å€™ï¼Œå°±ä»‹ç»è¿‡å¦‚æœä½¿ç”¨åœ¨æ¶ˆæ¯å±æ€§ä¸Šè®¾ç½® TTL çš„æ–¹å¼ï¼Œæ¶ˆæ¯å¯èƒ½å¹¶ä¸ä¼šæŒ‰æ—¶â€œæ­»äº¡â€œï¼Œå› ä¸º RabbitMQ åªä¼šæ£€æŸ¥ç¬¬ä¸€ä¸ªæ¶ˆæ¯æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸåˆ™ä¸¢åˆ°æ­»ä¿¡é˜Ÿåˆ—ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ¶ˆæ¯çš„å»¶æ—¶æ—¶é•¿å¾ˆé•¿ï¼Œè€Œç¬¬äºŒä¸ªæ¶ˆæ¯çš„å»¶æ—¶æ—¶é•¿å¾ˆçŸ­ï¼Œç¬¬äºŒä¸ªæ¶ˆæ¯å¹¶ä¸ä¼šä¼˜å…ˆå¾—åˆ°æ‰§è¡Œã€‚ Rabbitmqæ’ä»¶å®ç°å»¶è¿Ÿé˜Ÿåˆ—å‚è€ƒæ–‡ç«  SpringBoot+RabbitMQç”¨æ­»ä¿¡é˜Ÿåˆ—å’Œæ’ä»¶å½¢å¼å®ç°å»¶è¿Ÿé˜Ÿåˆ— Dockerå®‰è£…RabbitmqåŠå…¶å»¶æ—¶é˜Ÿåˆ—æ’ä»¶ å®‰è£…å»¶æ—¶é˜Ÿåˆ—æ’ä»¶åœ¨å®˜ç½‘ ï¼Œä¸‹è½½rabbitmq_delayed_message_exchangeæ’ä»¶ï¼Œç„¶åè§£å‹æ”¾ç½®åˆ° RabbitMQ çš„æ’ä»¶ç›®å½•ã€‚è¿›å…¥ RabbitMQ çš„å®‰è£…ç›®å½•ä¸‹çš„ plgins ç›®å½•ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤è®©è¯¥æ’ä»¶ç”Ÿæ•ˆï¼Œç„¶åé‡å¯ RabbitMQ /usr/lib/rabbitmq/lib/rabbitmq_server-3.8.8/plugins rabbitmq-plugins enable rabbitmq_delayed_message_exchange å‘å¸ƒç¡®è®¤é«˜çº§å§¿åŠ¿åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç”±äºä¸€äº›ä¸æ˜åŸå› ï¼Œå¯¼è‡´ rabbitmq é‡å¯ï¼Œåœ¨ RabbitMQ é‡å¯æœŸé—´ç”Ÿäº§è€…æ¶ˆæ¯æŠ•é€’å¤±è´¥ï¼Œå¯¼è‡´æ¶ˆæ¯ä¸¢å¤±ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†å’Œæ¢å¤ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬å¼€å§‹æ€è€ƒï¼Œå¦‚ä½•æ‰èƒ½è¿›è¡Œ RabbitMQ çš„æ¶ˆæ¯å¯é æŠ•é€’å‘¢ï¼Ÿç‰¹åˆ«æ˜¯åœ¨è¿™æ ·æ¯”è¾ƒæç«¯çš„æƒ…å†µï¼ŒRabbitMQ é›†ç¾¤ä¸å¯ç”¨çš„æ—¶å€™ï¼Œæ— æ³•æŠ•é€’çš„æ¶ˆæ¯è¯¥å¦‚ä½•å¤„ç†å‘¢: å‘å¸ƒç¡®è®¤ springboot ç‰ˆæœ¬ç¡®è®¤æœºåˆ¶æ–¹æ¡ˆ ä»£ç æ¶æ„å›¾ é…ç½®æ–‡ä»¶12# åœ¨é…ç½®æ–‡ä»¶å½“ä¸­éœ€è¦æ·»åŠ spring.rabbitmq.publisher-confirm-type=correlated NONEï¼šç¦ç”¨å‘å¸ƒç¡®è®¤æ¨¡å¼ï¼Œæ˜¯é»˜è®¤å€¼ CORRELATEDï¼šå‘å¸ƒæ¶ˆæ¯æˆåŠŸåˆ°äº¤æ¢å™¨åä¼šè§¦å‘å›è°ƒæ–¹æ³• SIMPLEï¼šç»æµ‹è¯•æœ‰ä¸¤ç§æ•ˆæœï¼Œå…¶ä¸€æ•ˆæœå’Œ CORRELATED å€¼ä¸€æ ·ä¼šè§¦å‘å›è°ƒæ–¹æ³•ï¼Œå…¶äºŒåœ¨å‘å¸ƒæ¶ˆæ¯æˆåŠŸåä½¿ç”¨ rabbitTemplate è°ƒç”¨ waitForConfirms æˆ– waitForConfirmsOrDie æ–¹æ³•ç­‰å¾… broker èŠ‚ç‚¹è¿”å›å‘é€ç»“æœï¼Œæ ¹æ®è¿”å›ç»“æœæ¥åˆ¤å®šä¸‹ä¸€æ­¥çš„é€»è¾‘ï¼Œè¦æ³¨æ„çš„ç‚¹æ˜¯ waitForConfirmsOrDie æ–¹æ³•å¦‚æœè¿”å› false åˆ™ä¼šå…³é—­ channelï¼Œåˆ™æ¥ä¸‹æ¥æ— æ³•å‘é€æ¶ˆæ¯åˆ° brokerï¼Œæ³¨ï¼šæ­¤é…ç½®åŒæ­¥ç¡®è®¤æ¶ˆæ¯ï¼Œç”Ÿäº§ä¸å»ºè®®ä½¿ç”¨ äº¤æ¢æœºå‘å¸ƒç¡®è®¤ä»£ç 1234567891011121314151617181920212223242526272829public class MessageConfirmCallBack&lt;T&gt; implements RabbitTemplate.ConfirmCallback &#123; @Resource private RabbitTemplate rabbitTemplate; @PostConstruct public void init() &#123; rabbitTemplate.setConfirmCallback(this); &#125; /** * äº¤æ¢æœºç¡®è®¤å›è°ƒæ–¹æ³• (å‘å¸ƒè€…å‘é€æ¶ˆæ¯æ˜¯å¦åˆ°äº¤æ¢æœºè§¦å‘å›è°ƒ) * 1. å‘æ¶ˆæ¯ äº¤æ¢æœºæ¥æ”¶åˆ°æ¶ˆæ¯ï¼Œå›è°ƒ * 1.1 correlationData ä¿å­˜æ¯æ‰æ¶ˆæ¯çš„idåŠç›¸å…³ä¿¡æ¯ * 1.2 äº¤æ¢æœºæ¥æ”¶åˆ°æ¶ˆæ¯ true * 1.3 å¤±è´¥åŸå› -null * 2. å‘æ¶ˆæ¯ äº¤æ¢æœºæ¥æ”¶å¤±è´¥ å›è°ƒ * 2.1 correlationData ä¿å­˜æ¯æ‰æ¶ˆæ¯çš„idåŠç›¸å…³ä¿¡æ¯ * 2.2 false * 2.3 å¤±è´¥åŸå›  */ @Override public void confirm(CorrelationData correlationData, boolean ack, String cause) &#123; if (ack) &#123; log.info(&quot;å‘å¸ƒç¡®è®¤:äº¤æ¢æœºæ”¶åˆ°æ¶ˆæ¯idï¼š&#123;&#125;&quot;, correlationData.getId()); &#125; else &#123; log.info(&quot;å‘å¸ƒç¡®è®¤:äº¤æ¢æœºæœªæ”¶åˆ°æ¶ˆæ¯ï¼Œidä¸ºï¼š&#123;&#125;,åŸå› ï¼š&#123;&#125;&quot;, correlationData.getId(), cause); // TODO ä¿å­˜æ•°æ®åº“é‡æ–°å‘é€ç­‰é€»è¾‘ä¿è¯æ¶ˆæ¯é‡æ–°å‘é€ç»™äº¤æ¢æœº &#125; &#125;&#125; å›é€€æ¶ˆæ¯åœ¨ä»…å¼€å¯äº†ç”Ÿäº§è€…ç¡®è®¤æœºåˆ¶çš„æƒ…å†µä¸‹ï¼Œäº¤æ¢æœºæ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œä¼šç›´æ¥ç»™æ¶ˆæ¯ç”Ÿäº§è€…å‘é€ç¡®è®¤æ¶ˆæ¯ï¼Œå¦‚æœå‘ç°è¯¥æ¶ˆæ¯ä¸å¯è·¯ç”±ï¼Œé‚£ä¹ˆæ¶ˆæ¯ä¼šè¢«ç›´æ¥ä¸¢å¼ƒï¼Œæ­¤æ—¶ç”Ÿäº§è€…æ˜¯ä¸çŸ¥é“æ¶ˆæ¯è¢«ä¸¢å¼ƒè¿™ä¸ªäº‹ä»¶çš„ã€‚é‚£ä¹ˆå¦‚ä½•è®©æ— æ³•è¢«è·¯ç”±çš„æ¶ˆæ¯å¸®æˆ‘æƒ³åŠæ³•å¤„ç†ä¸€ä¸‹ï¼Ÿæœ€èµ·ç é€šçŸ¥æˆ‘ä¸€å£°ï¼Œæˆ‘å¥½è‡ªå·±å¤„ç†å•Šã€‚é€šè¿‡è®¾ç½® mandatory å‚æ•°å¯ä»¥åœ¨å½“æ¶ˆæ¯ä¼ é€’è¿‡ç¨‹ä¸­ä¸å¯è¾¾ç›®çš„åœ°æ—¶å°†æ¶ˆæ¯è¿”å›ç»™ç”Ÿäº§è€…ã€‚ æ·»åŠ é…ç½®12# æ¶ˆæ¯å›é€€é…ç½®ï¼Œå¦‚æœæ¶ˆæ¯æ— æ³•è·¯ç”±ï¼Œåˆ™å›é€€ç»™ç”Ÿäº§è€…spring.rabbitmq.publisher-returns=true å›é€€ä»£ç æ¼”ç¤º1234567891011121314151617181920212223public class MessageReturnCallBack&lt;T&gt; implements RabbitTemplate.ReturnCallback &#123; @Resource private RabbitTemplate rabbitTemplate; @PostConstruct public void init() &#123; rabbitTemplate.setReturnCallback(this); &#125; /** * å¯ä»¥å°†æ¶ˆæ¯ä¼ é€’è¿‡ç¨‹ä¸­ä¸å¯è¾¾åˆ°ç›®çš„åœ°(é˜Ÿåˆ—)çš„æ¶ˆæ¯è¿”å›ç»™ç”Ÿäº§è€… * åªæœ‰ä¸å¯è¾¾ æ‰ä¼šå›é€€æ¶ˆæ¯ * è¯·æ³¨æ„!!!å¦‚æœä½ ä½¿ç”¨äº†å»¶è¿Ÿé˜Ÿåˆ—æ’ä»¶ï¼Œé‚£ä¹ˆä¸€å®šä¼šè°ƒç”¨è¯¥callbackæ–¹æ³•ï¼Œå› ä¸ºæ•°æ®å¹¶æ²¡æœ‰æäº¤ä¸Šå»ï¼Œ * è€Œæ˜¯æäº¤åœ¨äº¤æ¢å™¨ä¸­ï¼Œè¿‡æœŸæ—¶é—´åˆ°äº†æ‰æäº¤ä¸Šå»ï¼Œå¹¶éæ˜¯bugï¼ä½ å¯ä»¥ç”¨ifè¿›è¡Œåˆ¤æ–­äº¤æ¢æœºåç§°æ¥æ•æ‰è¯¥æŠ¥é”™ */ @Override public void returnedMessage(Message message, int replyCode, String replyText, String exchange, String routingKey) &#123; if(exchange.equals(delayedQueueProperties.getDelayedExchangeName()))&#123; return; &#125; log.info(&quot;æ¶ˆæ¯&#123;&#125;ï¼Œè¢«äº¤æ¢æœº&#123;&#125;é€€å›ï¼Œé€€å›åŸå› ï¼š&#123;&#125;ï¼Œè·¯ç”±Keyï¼š&#123;&#125;&quot;, new String(message.getBody()), exchange, replyText, routingKey); &#125;&#125; å¤‡ä»½äº¤æ¢æœºæœ‰äº† mandatory å‚æ•°å’Œå›é€€æ¶ˆæ¯ï¼Œæˆ‘ä»¬è·å¾—äº†å¯¹æ— æ³•æŠ•é€’æ¶ˆæ¯çš„æ„ŸçŸ¥èƒ½åŠ›ï¼Œæœ‰æœºä¼šåœ¨ç”Ÿäº§è€…çš„æ¶ˆæ¯æ— æ³•è¢«æŠ•é€’æ—¶å‘ç°å¹¶å¤„ç†ã€‚ä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“è¯¥å¦‚ä½•å¤„ç†è¿™äº›æ— æ³•è·¯ç”±çš„æ¶ˆæ¯ï¼Œæœ€å¤šæ‰“ä¸ªæ—¥å¿—ï¼Œç„¶åè§¦å‘æŠ¥è­¦ï¼Œå†æ¥æ‰‹åŠ¨å¤„ç†ã€‚è€Œé€šè¿‡æ—¥å¿—æ¥å¤„ç†è¿™äº›æ— æ³•è·¯ç”±çš„æ¶ˆæ¯æ˜¯å¾ˆä¸ä¼˜é›…çš„åšæ³•ï¼Œç‰¹åˆ«æ˜¯å½“ç”Ÿäº§è€…æ‰€åœ¨çš„æœåŠ¡æœ‰å¤šå°æœºå™¨çš„æ—¶å€™ï¼Œæ‰‹åŠ¨å¤åˆ¶æ—¥å¿—ä¼šæ›´åŠ éº»çƒ¦è€Œä¸”å®¹æ˜“å‡ºé”™ã€‚è€Œä¸”è®¾ç½® mandatory å‚æ•°ä¼šå¢åŠ ç”Ÿäº§è€…çš„å¤æ‚æ€§ï¼Œéœ€è¦æ·»åŠ å¤„ç†è¿™äº›è¢«é€€å›çš„æ¶ˆæ¯çš„é€»è¾‘ã€‚å¦‚æœæ—¢ä¸æƒ³ä¸¢å¤±æ¶ˆæ¯ï¼Œåˆä¸æƒ³å¢åŠ ç”Ÿäº§è€…çš„å¤æ‚æ€§ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿå‰é¢åœ¨è®¾ç½®æ­»ä¿¡é˜Ÿåˆ—çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æåˆ°ï¼Œå¯ä»¥ä¸ºé˜Ÿåˆ—è®¾ç½®æ­»ä¿¡äº¤æ¢æœºæ¥å­˜å‚¨é‚£äº›å¤„ç†å¤±è´¥çš„æ¶ˆæ¯ï¼Œå¯æ˜¯è¿™äº›ä¸å¯è·¯ç”±æ¶ˆæ¯æ ¹æœ¬æ²¡æœ‰æœºä¼šè¿›å…¥åˆ°é˜Ÿåˆ—ï¼Œå› æ­¤æ— æ³•ä½¿ç”¨æ­»ä¿¡é˜Ÿåˆ—æ¥ä¿å­˜æ¶ˆæ¯ã€‚åœ¨ RabbitMQ ä¸­ï¼Œæœ‰ä¸€ç§å¤‡ä»½äº¤æ¢æœºçš„æœºåˆ¶å­˜åœ¨ï¼Œå¯ä»¥å¾ˆå¥½çš„åº”å¯¹è¿™ä¸ªé—®é¢˜ã€‚ä»€ä¹ˆæ˜¯å¤‡ä»½äº¤æ¢æœºå‘¢ï¼Ÿå¤‡ä»½äº¤æ¢æœºå¯ä»¥ç†è§£ä¸º RabbitMQ ä¸­äº¤æ¢æœºçš„â€œå¤‡èƒâ€ï¼Œå½“æˆ‘ä»¬ä¸ºæŸä¸€ä¸ªäº¤æ¢æœºå£°æ˜ä¸€ä¸ªå¯¹åº”çš„å¤‡ä»½äº¤æ¢æœºæ—¶ï¼Œå°±æ˜¯ä¸ºå®ƒåˆ›å»ºä¸€ä¸ªå¤‡èƒï¼Œå½“äº¤æ¢æœºæ¥æ”¶åˆ°ä¸€æ¡ä¸å¯è·¯ç”±æ¶ˆæ¯æ—¶ï¼Œå°†ä¼šæŠŠè¿™æ¡æ¶ˆæ¯è½¬å‘åˆ°å¤‡ä»½äº¤æ¢æœºä¸­ï¼Œç”±å¤‡ä»½äº¤æ¢æœºæ¥è¿›è¡Œè½¬å‘å’Œå¤„ç†ï¼Œé€šå¸¸å¤‡ä»½äº¤æ¢æœºçš„ç±»å‹ä¸º Fanout ï¼Œè¿™æ ·å°±èƒ½æŠŠæ‰€æœ‰æ¶ˆæ¯éƒ½æŠ•é€’åˆ°ä¸å…¶ç»‘å®šçš„é˜Ÿåˆ—ä¸­ï¼Œç„¶åæˆ‘ä»¬åœ¨å¤‡ä»½äº¤æ¢æœºä¸‹ç»‘å®šä¸€ä¸ªé˜Ÿåˆ—ï¼Œè¿™æ ·æ‰€æœ‰é‚£äº›åŸäº¤æ¢æœºæ— æ³•è¢«è·¯ç”±çš„æ¶ˆæ¯ï¼Œå°±ä¼šéƒ½è¿›å…¥è¿™ä¸ªé˜Ÿåˆ—äº†ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å»ºç«‹ä¸€ä¸ªæŠ¥è­¦é˜Ÿåˆ—ï¼Œç”¨ç‹¬ç«‹çš„æ¶ˆè´¹è€…æ¥è¿›è¡Œç›‘æµ‹å’ŒæŠ¥è­¦ã€‚ å¤‡ä»½äº¤æ¢æœºä»£ç å£°æ˜åœ¨åŸæ¥çš„ä»£ç ä¸Šé¢å¤šå£°æ˜ä¸€ä¸ªäº¤æ¢æœºå’Œä¸¤ä¸ªé˜Ÿåˆ—ï¼Œè¿˜æœ‰ä¸€ä¸ªæŠ¥è­¦æ¶ˆè´¹è€… 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// @Configurationpublic class ConfirmConfig &#123; public static final String CONFIRM_EXCHANGE_NAME = &quot;confirm.exchange&quot;; public static final String CONFIRM_QUEUE_NAME = &quot;confirm.queue&quot;; public static final String BACKUP_EXCHANGE_NAME = &quot;backup.exchange&quot;; public static final String BACKUP_QUEUE_NAME = &quot;backup.queue&quot;; public static final String WARNING_QUEUE_NAME = &quot;warning.queue&quot;; // å£°æ˜ç¡®è®¤é˜Ÿåˆ— @Bean(&quot;confirmQueue&quot;) public Queue confirmQueue() &#123; return QueueBuilder.durable(CONFIRM_QUEUE_NAME).build(); &#125; // å£°æ˜ç¡®è®¤é˜Ÿåˆ—ç»‘å®šå…³ç³» @Bean public Binding queueBinding(@Qualifier(&quot;confirmQueue&quot;) Queue queue, @Qualifier(&quot;confirmExchange&quot;) DirectExchange exchange) &#123; return BindingBuilder.bind(queue).to(exchange).with(&quot;key1&quot;); &#125; // å£°æ˜å¤‡ä»½ Exchange @Bean(&quot;backupExchange&quot;) public FanoutExchange backupExchange() &#123; return new FanoutExchange(BACKUP_EXCHANGE_NAME); &#125; // å£°æ˜ç¡®è®¤ Exchange äº¤æ¢æœºçš„å¤‡ä»½äº¤æ¢æœº @Bean(&quot;confirmExchange&quot;) public DirectExchange confirmExchange() &#123; ExchangeBuilder exchangeBuilder = ExchangeBuilder.directExchange(CONFIRM_EXCHANGE_NAME) .durable(true) // è®¾ç½®è¯¥äº¤æ¢æœºçš„å¤‡ä»½äº¤æ¢æœº .withArgument(&quot;alternate-exchange&quot;, BACKUP_EXCHANGE_NAME); return (DirectExchange) exchangeBuilder.build(); &#125; // å£°æ˜è­¦å‘Šé˜Ÿåˆ— @Bean(&quot;warningQueue&quot;) public Queue warningQueue() &#123; return QueueBuilder.durable(WARNING_QUEUE_NAME).build(); &#125; // å£°æ˜æŠ¥è­¦é˜Ÿåˆ—ç»‘å®šå…³ç³» @Bean public Binding warningBinding(@Qualifier(&quot;warningQueue&quot;) Queue queue, @Qualifier(&quot;backupExchange&quot;) FanoutExchange backupExchange) &#123; return BindingBuilder.bind(queue).to(backupExchange); &#125; // å£°æ˜å¤‡ä»½é˜Ÿåˆ— @Bean(&quot;backQueue&quot;) public Queue backQueue() &#123; return QueueBuilder.durable(BACKUP_QUEUE_NAME).build(); &#125; // å£°æ˜å¤‡ä»½é˜Ÿåˆ—ç»‘å®šå…³ç³» @Bean public Binding backupBinding(@Qualifier(&quot;backQueue&quot;) Queue queue, @Qualifier(&quot;backupExchange&quot;) FanoutExchange backupExchange) &#123; return BindingBuilder.bind(queue).to(backupExchange); &#125;&#125; æŠ¥è­¦æ¶ˆè´¹è€…1234567891011@Component@Slf4jpublic class WarningConsumer &#123; public static final String WARNING_QUEUE_NAME = &quot;warning.queue&quot;; @RabbitListener(queues = WARNING_QUEUE_NAME) public void receiveWarningMsg(Message message) &#123; String msg = new String(message.getBody()); log.error(&quot; æŠ¥è­¦å‘ç°ä¸å¯è·¯ç”±æ¶ˆæ¯ï¼š&#123;&#125;&quot;, msg); &#125;&#125; æµ‹è¯•æ³¨æ„äº‹é¡¹ é‡æ–°å¯åŠ¨é¡¹ç›®çš„æ—¶å€™éœ€è¦æŠŠåŸæ¥çš„ confirm.exchange åˆ é™¤å› ä¸ºæˆ‘ä»¬ä¿®æ”¹äº†å…¶ç»‘å®šå±æ€§ï¼Œä¸ç„¶æŠ¥é”™ã€‚ å¤‡ä»½äº¤æ¢æœºå’Œå›é€€ä¼˜å…ˆçº§mandatory å‚æ•°ä¸å¤‡ä»½äº¤æ¢æœºå¯ä»¥ä¸€èµ·ä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚æœä¸¤è€…åŒæ—¶å¼€å¯ï¼Œæ¶ˆæ¯ç©¶ç«Ÿä½•å»ä½•ä»ï¼Ÿè°ä¼˜å…ˆçº§é«˜ï¼Œç»è¿‡ä¸Šé¢ç»“æœæ˜¾ç¤ºç­”æ¡ˆæ˜¯å¤‡ä»½äº¤æ¢æœºä¼˜å…ˆçº§é«˜ã€‚ RabbitMQå…¶ä»–çŸ¥è¯†ç‚¹å¹‚ç­‰æ€§ç”¨æˆ·å¯¹äºåŒä¸€æ“ä½œå‘èµ·çš„ä¸€æ¬¡è¯·æ±‚æˆ–è€…å¤šæ¬¡è¯·æ±‚çš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œä¸ä¼šå› ä¸ºå¤šæ¬¡ç‚¹å‡»è€Œäº§ç”Ÿäº†å‰¯ä½œç”¨ã€‚ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œé‚£å°±æ˜¯æ”¯ä»˜ï¼Œç”¨æˆ·è´­ä¹°å•†å“åæ”¯ä»˜ï¼Œæ”¯ä»˜æ‰£æ¬¾æˆåŠŸï¼Œä½†æ˜¯è¿”å›ç»“æœçš„æ—¶å€™ç½‘ç»œå¼‚å¸¸ï¼Œæ­¤æ—¶é’±å·²ç»æ‰£äº†ï¼Œç”¨æˆ·å†æ¬¡ç‚¹å‡»æŒ‰é’®ï¼Œæ­¤æ—¶ä¼šè¿›è¡Œç¬¬äºŒæ¬¡æ‰£æ¬¾ï¼Œè¿”å›ç»“æœæˆåŠŸï¼Œç”¨æˆ·æŸ¥è¯¢ä½™é¢å‘ç°å¤šæ‰£é’±äº†ï¼Œæµæ°´è®°å½•ä¹Ÿå˜æˆäº†ä¸¤æ¡ã€‚åœ¨ä»¥å‰çš„å•åº”ç”¨ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ•°æ®æ“ä½œæ”¾å…¥äº‹åŠ¡ä¸­å³å¯ï¼Œå‘ç”Ÿé”™è¯¯ç«‹å³å›æ»šï¼Œä½†æ˜¯å†å“åº”å®¢æˆ·ç«¯çš„æ—¶å€™ä¹Ÿæœ‰å¯èƒ½å‡ºç°ç½‘ç»œä¸­æ–­æˆ–è€…å¼‚å¸¸ç­‰ç­‰ æ¶ˆæ¯é‡å¤æ¶ˆè´¹æ¶ˆè´¹è€…åœ¨æ¶ˆè´¹ MQ ä¸­çš„æ¶ˆæ¯æ—¶ï¼ŒMQ å·²æŠŠæ¶ˆæ¯å‘é€ç»™æ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹è€…åœ¨ç»™ MQ è¿”å› ack æ—¶ç½‘ç»œä¸­æ–­ï¼Œæ•… MQ æœªæ”¶åˆ°ç¡®è®¤ä¿¡æ¯ï¼Œè¯¥æ¡æ¶ˆæ¯ä¼šé‡æ–°å‘ç»™å…¶ä»–çš„æ¶ˆè´¹è€…ï¼Œæˆ–è€…åœ¨ç½‘ç»œé‡è¿åå†æ¬¡å‘é€ç»™è¯¥æ¶ˆè´¹è€…ï¼Œä½†å®é™…ä¸Šè¯¥æ¶ˆè´¹è€…å·²æˆåŠŸæ¶ˆè´¹äº†è¯¥æ¡æ¶ˆæ¯ï¼Œé€ æˆæ¶ˆè´¹è€…æ¶ˆè´¹äº†é‡å¤çš„æ¶ˆæ¯ã€‚ è§£å†³æ€è·¯MQ æ¶ˆè´¹è€…çš„å¹‚ç­‰æ€§çš„è§£å†³ä¸€èˆ¬ä½¿ç”¨å…¨å±€ ID æˆ–è€…å†™ä¸ªå”¯ä¸€æ ‡è¯†æ¯”å¦‚æ—¶é—´æˆ³ æˆ–è€… UUID æˆ–è€…è®¢å•æ¶ˆè´¹è€…æ¶ˆè´¹ MQ ä¸­çš„æ¶ˆæ¯ä¹Ÿå¯åˆ©ç”¨ MQ çš„è¯¥ id æ¥åˆ¤æ–­ï¼Œæˆ–è€…å¯æŒ‰è‡ªå·±çš„è§„åˆ™ç”Ÿæˆä¸€ä¸ªå…¨å±€å”¯ä¸€ idï¼Œæ¯æ¬¡æ¶ˆè´¹æ¶ˆæ¯æ—¶ç”¨è¯¥ id å…ˆåˆ¤æ–­è¯¥æ¶ˆæ¯æ˜¯å¦å·²æ¶ˆè´¹è¿‡ã€‚ æ¶ˆè´¹ç«¯çš„å¹‚ç­‰æ€§ä¿éšœåœ¨æµ·é‡è®¢å•ç”Ÿæˆçš„ä¸šåŠ¡é«˜å³°æœŸï¼Œç”Ÿäº§ç«¯æœ‰å¯èƒ½å°±ä¼šé‡å¤å‘ç”Ÿäº†æ¶ˆæ¯ï¼Œè¿™æ—¶å€™æ¶ˆè´¹ç«¯å°±è¦å®ç°å¹‚ç­‰æ€§ï¼Œè¿™å°±æ„å‘³ç€æˆ‘ä»¬çš„æ¶ˆæ¯æ°¸è¿œä¸ä¼šè¢«æ¶ˆè´¹å¤šæ¬¡ï¼Œå³ä½¿æˆ‘ä»¬æ”¶åˆ°äº†ä¸€æ ·çš„æ¶ˆæ¯ã€‚ä¸šç•Œä¸»æµçš„å¹‚ç­‰æ€§æœ‰ä¸¤ç§æ“ä½œ:a.å”¯ä¸€ ID+æŒ‡çº¹ç æœºåˆ¶,åˆ©ç”¨æ•°æ®åº“ä¸»é”®å»é‡, b.åˆ©ç”¨ redis çš„åŸå­æ€§å»å®ç° å”¯ä¸€ID+ æŒ‡çº¹ç æœºåˆ¶æŒ‡çº¹ç :æˆ‘ä»¬çš„ä¸€äº›è§„åˆ™æˆ–è€…æ—¶é—´æˆ³åŠ åˆ«çš„æœåŠ¡ç»™åˆ°çš„å”¯ä¸€ä¿¡æ¯ç ,å®ƒå¹¶ä¸ä¸€å®šæ˜¯æˆ‘ä»¬ç³»ç»Ÿç”Ÿæˆçš„ï¼ŒåŸºæœ¬éƒ½æ˜¯ç”±æˆ‘ä»¬çš„ä¸šåŠ¡è§„åˆ™æ‹¼æ¥è€Œæ¥ï¼Œä½†æ˜¯ä¸€å®šè¦ä¿è¯å”¯ä¸€æ€§ï¼Œç„¶åå°±åˆ©ç”¨æŸ¥è¯¢è¯­å¥è¿›è¡Œåˆ¤æ–­è¿™ä¸ª id æ˜¯å¦å­˜åœ¨æ•°æ®åº“ä¸­,ä¼˜åŠ¿å°±æ˜¯å®ç°ç®€å•å°±ä¸€ä¸ªæ‹¼æ¥ï¼Œç„¶åæŸ¥è¯¢åˆ¤æ–­æ˜¯å¦é‡å¤ï¼›åŠ£åŠ¿å°±æ˜¯åœ¨é«˜å¹¶å‘æ—¶ï¼Œå¦‚æœæ˜¯å•ä¸ªæ•°æ®åº“å°±ä¼šæœ‰å†™å…¥æ€§èƒ½ç“¶é¢ˆå½“ç„¶ä¹Ÿå¯ä»¥é‡‡ç”¨åˆ†åº“åˆ†è¡¨æå‡æ€§èƒ½ï¼Œä½†ä¹Ÿä¸æ˜¯æˆ‘ä»¬æœ€æ¨èçš„æ–¹å¼ã€‚ RedisåŸå­æ€§åˆ©ç”¨ redis æ‰§è¡Œ setnx å‘½ä»¤ï¼Œå¤©ç„¶å…·æœ‰å¹‚ç­‰æ€§ã€‚ä»è€Œå®ç°ä¸é‡å¤æ¶ˆè´¹ï¼Œæ­¤æ–¹å¼ä¸ºç›®å‰ç”¨çš„æœ€å¤šçš„æ–¹æ¡ˆã€‚ ä¼˜å…ˆçº§é˜Ÿåˆ—ä½¿ç”¨åœºæ™¯åœ¨æˆ‘ä»¬ç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªè®¢å•å‚¬ä»˜çš„åœºæ™¯ï¼Œæˆ‘ä»¬çš„å®¢æˆ·åœ¨å¤©çŒ«ä¸‹çš„è®¢å•,æ·˜å®ä¼šåŠæ—¶å°†è®¢å•æ¨é€ç»™æˆ‘ä»¬ï¼Œå¦‚æœåœ¨ç”¨æˆ·è®¾å®šçš„æ—¶é—´å†…æœªä»˜æ¬¾é‚£ä¹ˆå°±ä¼šç»™ç”¨æˆ·æ¨é€ä¸€æ¡çŸ­ä¿¡æé†’ï¼Œå¾ˆç®€å•çš„ä¸€ä¸ªåŠŸèƒ½å¯¹å§ï¼Œä½†æ˜¯ï¼Œtmallå•†å®¶å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œè‚¯å®šæ˜¯è¦åˆ†å¤§å®¢æˆ·å’Œå°å®¢æˆ·çš„å¯¹å§ï¼Œæ¯”å¦‚åƒè‹¹æœï¼Œå°ç±³è¿™æ ·å¤§å•†å®¶ä¸€å¹´èµ·ç èƒ½ç»™æˆ‘ä»¬åˆ›é€ å¾ˆå¤§çš„åˆ©æ¶¦ï¼Œæ‰€ä»¥ç†åº”å½“ç„¶ï¼Œä»–ä»¬çš„è®¢å•å¿…é¡»å¾—åˆ°ä¼˜å…ˆå¤„ç†ï¼Œè€Œæ›¾ç»æˆ‘ä»¬çš„åç«¯ç³»ç»Ÿæ˜¯ä½¿ç”¨ redis æ¥å­˜æ”¾çš„å®šæ—¶è½®è¯¢ï¼Œå¤§å®¶éƒ½çŸ¥é“ redis åªèƒ½ç”¨ List åšä¸€ä¸ªç®€ç®€å•å•çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¹¶ä¸èƒ½å®ç°ä¸€ä¸ªä¼˜å…ˆçº§çš„åœºæ™¯ï¼Œæ‰€ä»¥è®¢å•é‡å¤§äº†åé‡‡ç”¨ RabbitMQ è¿›è¡Œæ”¹é€ å’Œä¼˜åŒ–,å¦‚æœå‘ç°æ˜¯å¤§å®¢æˆ·çš„è®¢å•ç»™ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒé«˜çš„ä¼˜å…ˆçº§ï¼Œå¦åˆ™å°±æ˜¯é»˜è®¤ä¼˜å…ˆçº§ã€‚ å¦‚ä½•æ·»åŠ a.æ§åˆ¶å°é¡µé¢æ·»åŠ  b.é˜Ÿåˆ—ä¸­ä»£ç æ·»åŠ ä¼˜å…ˆçº§ 123Map&lt;String, Object&gt; params = new HashMap();params.put(&quot;x-max-priority&quot;, 10);channel.queueDeclare(&quot;hello&quot;, true, false, false, params); c.æ¶ˆæ¯ä¸­ä»£ç æ·»åŠ ä¼˜å…ˆçº§ 1AMQP.BasicProperties properties = new AMQP.BasicProperties().builder().priority(5).build(); d.æ³¨æ„äº‹é¡¹ è¦è®©é˜Ÿåˆ—å®ç°ä¼˜å…ˆçº§éœ€è¦åšçš„äº‹æƒ…æœ‰å¦‚ä¸‹äº‹æƒ…:é˜Ÿåˆ—éœ€è¦è®¾ç½®ä¸ºä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œæ¶ˆæ¯éœ€è¦è®¾ç½®æ¶ˆæ¯çš„ä¼˜å…ˆçº§ï¼Œæ¶ˆè´¹è€…éœ€è¦ç­‰å¾…æ¶ˆæ¯å·²ç»å‘é€åˆ°é˜Ÿåˆ—ä¸­æ‰å»æ¶ˆè´¹å› ä¸ºï¼Œè¿™æ ·æ‰æœ‰æœºä¼šå¯¹æ¶ˆæ¯è¿›è¡Œæ’åº å®æˆ˜ç”Ÿäº§è€…1234567891011121314151617181920public class Producer &#123; private static final String QUEUE_NAME = &quot;hello&quot;; public static void main(String[] args) throws Exception &#123; try (Channel channel = RabbitMqUtils.getChannel();) &#123; // ç»™æ¶ˆæ¯èµ‹äºˆä¸€ä¸ª priority å±æ€§ AMQP.BasicProperties properties = new AMQP.BasicProperties().builder().priority(5).build(); for (int i = 1; i &lt; 11; i++) &#123; String message = &quot;info&quot; + i; if (i == 5) &#123; channel.basicPublish(&quot;&quot;, QUEUE_NAME, properties, message.getBytes()); &#125; else &#123; channel.basicPublish(&quot;&quot;, QUEUE_NAME, null, message.getBytes()); &#125; System.out.println(&quot; å‘é€æ¶ˆæ¯å®Œæˆ:&quot; + message); &#125; &#125; &#125;&#125; æ¶ˆè´¹è€…12345678910111213141516171819public class Consumer &#123; private static final String QUEUE_NAME = &quot;hello&quot;; public static void main(String[] args) throws Exception &#123; Channel channel = RabbitMqUtils.getChannel(); // è®¾ç½®é˜Ÿåˆ—çš„æœ€å¤§ä¼˜å…ˆçº§ æœ€å¤§å¯ä»¥è®¾ç½®åˆ° 255 å®˜ç½‘æ¨è 1-10 å¦‚æœè®¾ç½®å¤ªé«˜æ¯”è¾ƒåƒå†…å­˜å’Œ CPU Map&lt;String, Object&gt; params = new HashMap(); params.put(&quot;x-max-priority&quot;, 10); channel.queueDeclare(QUEUE_NAME, true, false, false, params); System.out.println(&quot; æ¶ˆè´¹è€…å¯åŠ¨ç­‰å¾…æ¶ˆè´¹......&quot;); DeliverCallback deliverCallback = (consumerTag, delivery) -&gt; &#123; String receivedMessage = new String(delivery.getBody()); System.out.println(&quot; æ¥æ”¶åˆ°æ¶ˆæ¯:&quot; + receivedMessage); &#125;; channel.basicConsume(QUEUE_NAME, true, deliverCallback, (consumerTag) -&gt; &#123; System.out.println(&quot; æ¶ˆè´¹è€…æ— æ³•æ¶ˆè´¹ æ¶ˆæ¯æ—¶è°ƒç”¨ï¼Œå¦‚é˜Ÿåˆ—è¢«åˆ é™¤&quot;); &#125;); &#125;&#125; æƒ°æ€§é˜Ÿåˆ—RabbitMQ ä» 3.6.0 ç‰ˆæœ¬å¼€å§‹å¼•å…¥äº†æƒ°æ€§é˜Ÿåˆ—çš„æ¦‚å¿µã€‚æƒ°æ€§é˜Ÿåˆ—ä¼šå°½å¯èƒ½çš„å°†æ¶ˆæ¯å­˜å…¥ç£ç›˜ä¸­ï¼Œè€Œåœ¨æ¶ˆè´¹è€…æ¶ˆè´¹åˆ°ç›¸åº”çš„æ¶ˆæ¯æ—¶æ‰ä¼šè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå®ƒçš„ä¸€ä¸ªé‡è¦çš„è®¾è®¡ç›®æ ‡æ˜¯èƒ½å¤Ÿæ”¯æŒæ›´é•¿çš„é˜Ÿåˆ—ï¼Œå³æ”¯æŒæ›´å¤šçš„æ¶ˆæ¯å­˜å‚¨ã€‚å½“æ¶ˆè´¹è€…ç”±äºå„ç§å„æ ·çš„åŸå› (æ¯”å¦‚æ¶ˆè´¹è€…ä¸‹çº¿ã€å®•æœºäº¦æˆ–è€…æ˜¯ç”±äºç»´æŠ¤è€Œå…³é—­ç­‰)è€Œè‡´ä½¿é•¿æ—¶é—´å†…ä¸èƒ½æ¶ˆè´¹æ¶ˆæ¯é€ æˆå †ç§¯æ—¶ï¼Œæƒ°æ€§é˜Ÿåˆ—å°±å¾ˆæœ‰å¿…è¦äº†ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€åˆ° RabbitMQ çš„æ—¶å€™ï¼Œé˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ä¼šå°½å¯èƒ½çš„å­˜å‚¨åœ¨å†…å­˜ä¹‹ä¸­ï¼Œè¿™æ ·å¯ä»¥æ›´åŠ å¿«é€Ÿçš„å°†æ¶ˆæ¯å‘é€ç»™æ¶ˆè´¹è€…ã€‚å³ä½¿æ˜¯æŒä¹…åŒ–çš„æ¶ˆæ¯ï¼Œåœ¨è¢«å†™å…¥ç£ç›˜çš„åŒæ—¶ä¹Ÿä¼šåœ¨å†…å­˜ä¸­é©»ç•™ä¸€ä»½å¤‡ä»½ã€‚å½“ RabbitMQ éœ€è¦é‡Šæ”¾å†…å­˜çš„æ—¶å€™ï¼Œä¼šå°†å†…å­˜ä¸­çš„æ¶ˆæ¯æ¢é¡µè‡³ç£ç›˜ä¸­ï¼Œè¿™ä¸ªæ“ä½œä¼šè€—è´¹è¾ƒé•¿çš„æ—¶é—´ï¼Œä¹Ÿä¼šé˜»å¡é˜Ÿåˆ—çš„æ“ä½œï¼Œè¿›è€Œæ— æ³•æ¥æ”¶æ–°çš„æ¶ˆæ¯ã€‚è™½ç„¶ RabbitMQ çš„å¼€å‘è€…ä»¬ä¸€ç›´åœ¨å‡çº§ç›¸å…³çš„ç®—æ³•ï¼Œä½†æ˜¯æ•ˆæœå§‹ç»ˆä¸å¤ªç†æƒ³ï¼Œå°¤å…¶æ˜¯åœ¨æ¶ˆæ¯é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ã€‚ ä¸¤ç§æ¨¡å¼é˜Ÿåˆ—å…·å¤‡ä¸¤ç§æ¨¡å¼ï¼šdefault å’Œ lazyã€‚é»˜è®¤çš„ä¸º default æ¨¡å¼ï¼Œåœ¨ 3.6.0 ä¹‹å‰çš„ç‰ˆæœ¬æ— éœ€åšä»»ä½•å˜æ›´ã€‚lazyæ¨¡å¼å³ä¸ºæƒ°æ€§é˜Ÿåˆ—çš„æ¨¡å¼ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ channel.queueDeclare æ–¹æ³•çš„æ—¶å€™åœ¨å‚æ•°ä¸­è®¾ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Policy çš„æ–¹å¼è®¾ç½®ï¼Œå¦‚æœä¸€ä¸ªé˜Ÿåˆ—åŒæ—¶ä½¿ç”¨è¿™ä¸¤ç§æ–¹å¼è®¾ç½®çš„è¯ï¼Œé‚£ä¹ˆ Policy çš„æ–¹å¼å…·å¤‡æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚å¦‚æœè¦é€šè¿‡å£°æ˜çš„æ–¹å¼æ”¹å˜å·²æœ‰é˜Ÿåˆ—çš„æ¨¡å¼çš„è¯ï¼Œé‚£ä¹ˆåªèƒ½å…ˆåˆ é™¤é˜Ÿåˆ—ï¼Œç„¶åå†é‡æ–°å£°æ˜ä¸€ä¸ªæ–°çš„ã€‚åœ¨é˜Ÿåˆ—å£°æ˜çš„æ—¶å€™å¯ä»¥é€šè¿‡â€œx-queue-modeâ€å‚æ•°æ¥è®¾ç½®é˜Ÿåˆ—çš„æ¨¡å¼ï¼Œå–å€¼ä¸ºâ€œdefaultâ€å’Œâ€œlazyâ€ã€‚ä¸‹é¢ç¤ºä¾‹ä¸­æ¼”ç¤ºäº†ä¸€ä¸ªæƒ°æ€§é˜Ÿåˆ—çš„å£°æ˜ç»†èŠ‚ï¼š 123Map&lt;String, Object&gt; args = new HashMap&lt;String, Object&gt;();args.put(&quot;x-queue-mode&quot;, &quot;lazy&quot;);channel.queueDeclare(&quot;myqueue&quot;, false, false, false, args); å†…å­˜å¼€é”€å¯¹æ¯” åœ¨å‘é€ 1 ç™¾ä¸‡æ¡æ¶ˆæ¯ï¼Œæ¯æ¡æ¶ˆæ¯å¤§æ¦‚å  1KB çš„æƒ…å†µä¸‹ï¼Œæ™®é€šé˜Ÿåˆ—å ç”¨å†…å­˜æ˜¯ 1.2GBï¼Œè€Œæƒ°æ€§é˜Ÿåˆ—ä»…ä»…å ç”¨ 1.5MB RabbitMQ é›†ç¾¤clusteringé›†ç¾¤æ¨¡å¼ä½¿ç”¨é›†ç¾¤çš„åŸå› æœ€å¼€å§‹æˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•å®‰è£…åŠè¿è¡Œ RabbitMQ æœåŠ¡ï¼Œä¸è¿‡è¿™äº›æ˜¯å•æœºç‰ˆçš„ï¼Œæ— æ³•æ»¡è¶³ç›®å‰çœŸå®åº”ç”¨çš„è¦æ±‚ã€‚å¦‚æœ RabbitMQ æœåŠ¡å™¨é‡åˆ°å†…å­˜å´©æºƒã€æœºå™¨æ‰ç”µæˆ–è€…ä¸»æ¿æ•…éšœç­‰æƒ…å†µï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿå•å° RabbitMQæœåŠ¡å™¨å¯ä»¥æ»¡è¶³æ¯ç§’ 1000 æ¡æ¶ˆæ¯çš„ååé‡ï¼Œé‚£ä¹ˆå¦‚æœåº”ç”¨éœ€è¦ RabbitMQ æœåŠ¡æ»¡è¶³æ¯ç§’ 10 ä¸‡æ¡æ¶ˆæ¯çš„ååé‡å‘¢ï¼Ÿè´­ä¹°æ˜‚è´µçš„æœåŠ¡å™¨æ¥å¢å¼ºå•æœº RabbitMQ åŠ¡çš„æ€§èƒ½æ˜¾å¾—æ‰è¥Ÿè§è‚˜ï¼Œæ­å»ºä¸€ä¸ª RabbitMQ é›†ç¾¤æ‰æ˜¯è§£å†³å®é™…é—®é¢˜çš„å…³é”®ã€‚ æ­å»ºæ­¥éª¤1.ä¿®æ”¹ 3 å°æœºå™¨çš„ä¸»æœºåç§° vim /etc/hostname 2.é…ç½®å„ä¸ªèŠ‚ç‚¹çš„ hosts æ–‡ä»¶ï¼Œè®©å„ä¸ªèŠ‚ç‚¹éƒ½èƒ½äº’ç›¸è¯†åˆ«å¯¹æ–¹ vim /etc/hosts10.211.55.74 node110.211.55.75 node210.211.55.76 node3 3.ä»¥ç¡®ä¿å„ä¸ªèŠ‚ç‚¹çš„ cookie æ–‡ä»¶ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªå€¼ åœ¨ node1 ä¸Šæ‰§è¡Œè¿œç¨‹æ“ä½œå‘½ä»¤scp /var/lib/rabbitmq/.erlang.cookie root@node2:/var/lib/rabbitmq/.erlang.cookiescp /var/lib/rabbitmq/.erlang.cookie root@node3:/var/lib/rabbitmq/.erlang.cookie 4.å¯åŠ¨ RabbitMQ æœåŠ¡,é¡ºå¸¦å¯åŠ¨ Erlang è™šæ‹Ÿæœºå’Œ RbbitMQ åº”ç”¨æœåŠ¡(åœ¨ä¸‰å°èŠ‚ç‚¹ä¸Šåˆ†åˆ«æ‰§è¡Œä»¥ä¸‹å‘½ä»¤) rabbitmq-server -detached 5.åœ¨èŠ‚ç‚¹ 2 æ‰§è¡Œ 1234rabbitmqctl stop_app (rabbitmqctl stop ä¼šå°† Erlang è™šæ‹Ÿæœºå…³é—­ï¼Œrabbitmqctl stop_app åªå…³é—­ RabbitMQ æœåŠ¡)rabbitmqctl resetrabbitmqctl join_cluster rabbit@node1rabbitmqctl start_app(åªå¯åŠ¨åº”ç”¨æœåŠ¡) 6.åœ¨èŠ‚ç‚¹ 3 æ‰§è¡Œ 1234rabbitmqctl stop_apprabbitmqctl resetrabbitmqctl join_cluster rabbit@node2rabbitmqctl start_app 7.é›†ç¾¤çŠ¶æ€ rabbitmqctl cluster_status 8.éœ€è¦é‡æ–°è®¾ç½®ç”¨æˆ· åˆ›å»ºè´¦å·rabbitmqctl add_user admin 123è®¾ç½®ç”¨æˆ·è§’è‰²rabbitmqctl set_user_tags admin administratorè®¾ç½®ç”¨æˆ·æƒé™rabbitmqctl set_permissions -p &quot;/&quot; admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot; 9.è§£é™¤é›†ç¾¤èŠ‚ç‚¹(node2 å’Œ node3 æœºå™¨åˆ†åˆ«æ‰§è¡Œ) 12345rabbitmqctl stop_apprabbitmqctl resetrabbitmqctl start_apprabbitmqctl cluster_statusrabbitmqctl forget_cluster_node rabbit@node2(node1 æœºå™¨ä¸Šæ‰§è¡Œ) é•œåƒé˜Ÿåˆ—ä½¿ç”¨é•œåƒçš„åŸå› å¦‚æœ RabbitMQ é›†ç¾¤ä¸­åªæœ‰ä¸€ä¸ª Broker èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¯¥èŠ‚ç‚¹çš„å¤±æ•ˆå°†å¯¼è‡´æ•´ä½“æœåŠ¡çš„ä¸´æ—¶æ€§ä¸å¯ç”¨ï¼Œå¹¶ä¸”ä¹Ÿå¯èƒ½ä¼šå¯¼è‡´æ¶ˆæ¯çš„ä¸¢å¤±ã€‚å¯ä»¥å°†æ‰€æœ‰æ¶ˆæ¯éƒ½è®¾ç½®ä¸ºæŒä¹…åŒ–ï¼Œå¹¶ä¸”å¯¹åº”é˜Ÿåˆ—çš„durableå±æ€§ä¹Ÿè®¾ç½®ä¸ºtrueï¼Œä½†æ˜¯è¿™æ ·ä»ç„¶æ— æ³•é¿å…ç”±äºç¼“å­˜å¯¼è‡´çš„é—®é¢˜ï¼šå› ä¸ºæ¶ˆæ¯åœ¨å‘é€ä¹‹åå’Œè¢«å†™å…¥ç£ç›˜äº•æ‰§è¡Œåˆ·ç›˜åŠ¨ä½œä¹‹é—´å­˜åœ¨ä¸€ä¸ªçŸ­æš‚å´ä¼šäº§ç”Ÿé—®é¢˜çš„æ—¶é—´çª—ã€‚é€šè¿‡ publisherconfirm æœºåˆ¶èƒ½å¤Ÿç¡®ä¿å®¢æˆ·ç«¯çŸ¥é“å“ªäº›æ¶ˆæ¯å·±ç»å­˜å…¥ç£ç›˜ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œä¸€èˆ¬ä¸å¸Œæœ›é‡åˆ°å› å•ç‚¹æ•…éšœå¯¼è‡´çš„æœåŠ¡ä¸å¯ç”¨ã€‚å¼•å…¥é•œåƒé˜Ÿåˆ—(Mirror Queue)çš„æœºåˆ¶ï¼Œå¯ä»¥å°†é˜Ÿåˆ—é•œåƒåˆ°é›†ç¾¤ä¸­çš„å…¶ä»– Broker èŠ‚ç‚¹ä¹‹ä¸Šï¼Œå¦‚æœé›†ç¾¤ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹å¤±æ•ˆäº†ï¼Œé˜Ÿåˆ—èƒ½è‡ªåŠ¨åœ°åˆ‡æ¢åˆ°é•œåƒä¸­çš„å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šä»¥ä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ã€‚ æ­å»ºæ­¥éª¤1.å¯åŠ¨ä¸‰å°é›†ç¾¤èŠ‚ç‚¹ 2.éšä¾¿æ‰¾ä¸€ä¸ªèŠ‚ç‚¹æ·»åŠ  policy 3.åœ¨ node1 ä¸Šåˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œé˜Ÿåˆ—å­˜åœ¨é•œåƒé˜Ÿåˆ— 4.åœæ‰ node1 ä¹‹åå‘ç° node2 æˆä¸ºé•œåƒé˜Ÿåˆ— 5.å°±ç®—æ•´ä¸ªé›†ç¾¤åªå‰©ä¸‹ä¸€å°æœºå™¨äº† ä¾ç„¶èƒ½æ¶ˆè´¹é˜Ÿåˆ—é‡Œé¢çš„æ¶ˆæ¯ è¯´æ˜é˜Ÿåˆ—é‡Œé¢çš„æ¶ˆæ¯è¢«é•œåƒé˜Ÿåˆ—ä¼ é€’åˆ°ç›¸åº”æœºå™¨é‡Œé¢äº† å®ç°é«˜å¯ç”¨è´Ÿè½½å‡è¡¡æ•´ä½“æ¶æ„å›¾ Haproxy å®ç°è´Ÿè½½å‡è¡¡HAProxy æä¾›é«˜å¯ç”¨æ€§ã€è´Ÿè½½å‡è¡¡åŠåŸºäº TCPHTTP åº”ç”¨çš„ä»£ç†ï¼Œæ”¯æŒè™šæ‹Ÿä¸»æœºï¼Œå®ƒæ˜¯å…è´¹ã€å¿«é€Ÿå¹¶ä¸”å¯é çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ Twitter,Reddit,StackOverflow,GitHub åœ¨å†…çš„å¤šå®¶çŸ¥åäº’è”ç½‘å…¬å¸åœ¨ä½¿ç”¨ã€‚HAProxy å®ç°äº†ä¸€ç§äº‹ä»¶é©±åŠ¨ã€å•ä¸€è¿›ç¨‹æ¨¡å‹ï¼Œæ­¤æ¨¡å‹æ”¯æŒéå¸¸å¤§çš„äº•å‘è¿æ¥æ•°ã€‚ æ‰©å±• nginx,lvs,haproxy ä¹‹é—´çš„åŒºåˆ«: http://www.ha97.com/5646.html Keepalivedå®ç°åŒæœºè¯•æƒ³å¦‚æœå‰é¢é…ç½®çš„ HAProxy ä¸»æœºçªç„¶å®•æœºæˆ–è€…ç½‘å¡å¤±æ•ˆï¼Œé‚£ä¹ˆè™½ç„¶ RbbitMQ é›†ç¾¤æ²¡æœ‰ä»»ä½•æ•…éšœä½†æ˜¯å¯¹äºå¤–ç•Œçš„å®¢æˆ·ç«¯æ¥è¯´æ‰€æœ‰çš„è¿æ¥éƒ½ä¼šè¢«æ–­å¼€ç»“æœå°†æ˜¯ç¾éš¾æ€§çš„ä¸ºäº†ç¡®ä¿è´Ÿè½½å‡è¡¡æœåŠ¡çš„å¯é æ€§åŒæ ·æ˜¾å¾—ååˆ†é‡è¦ï¼Œè¿™é‡Œå°±è¦å¼•å…¥ Keepalived å®ƒèƒ½å¤Ÿé€šè¿‡è‡ªèº«å¥åº·æ£€æŸ¥ã€èµ„æºæ¥ç®¡åŠŸèƒ½åšé«˜å¯ç”¨(åŒæœºçƒ­å¤‡)ï¼Œå®ç°æ•…éšœè½¬ç§»ã€‚ Federation Exchangeâ€‹ (broker åŒ—äº¬)ï¼Œ(broker æ·±åœ³)å½¼æ­¤ä¹‹é—´ç›¸è·ç”šè¿œï¼Œç½‘ç»œå»¶è¿Ÿæ˜¯ä¸€ä¸ªä¸å¾—ä¸é¢å¯¹çš„é—®é¢˜ã€‚æœ‰ä¸€ä¸ªåœ¨åŒ—äº¬çš„ä¸šåŠ¡(Client åŒ—äº¬) éœ€è¦è¿æ¥(broker åŒ—äº¬)ï¼Œå‘å…¶ä¸­çš„äº¤æ¢å™¨ exchangeA å‘é€æ¶ˆæ¯ï¼Œæ­¤æ—¶çš„ç½‘ç»œå»¶è¿Ÿå¾ˆå°ï¼Œ(Client åŒ—äº¬)å¯ä»¥è¿…é€Ÿå°†æ¶ˆæ¯å‘é€è‡³ exchangeA ä¸­ï¼Œå°±ç®—åœ¨å¼€å¯äº† publisherconfirm æœºåˆ¶æˆ–è€…äº‹åŠ¡æœºåˆ¶çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥è¿…é€Ÿæ”¶åˆ°ç¡®è®¤ä¿¡æ¯ã€‚æ­¤æ—¶åˆæœ‰ä¸ªåœ¨æ·±åœ³çš„ä¸šåŠ¡(Client æ·±åœ³)éœ€è¦å‘ exchangeA å‘é€æ¶ˆæ¯ï¼Œé‚£ä¹ˆ(Client æ·±åœ³) (broker åŒ—äº¬)ä¹‹é—´æœ‰å¾ˆå¤§çš„ç½‘ç»œå»¶è¿Ÿï¼Œ(Client æ·±åœ³) å°†å‘é€æ¶ˆæ¯è‡³ exchangeA ä¼šç»å†ä¸€å®šçš„å»¶è¿Ÿï¼Œå°¤å…¶æ˜¯åœ¨å¼€å¯äº† publisherconfirm æœºåˆ¶æˆ–è€…äº‹åŠ¡æœºåˆ¶çš„æƒ…å†µä¸‹ï¼Œ(Client æ·±åœ³) ä¼šç­‰å¾…å¾ˆé•¿çš„å»¶è¿Ÿæ—¶é—´æ¥æ¥æ”¶(broker åŒ—äº¬)çš„ç¡®è®¤ä¿¡æ¯ï¼Œè¿›è€Œå¿…ç„¶é€ æˆè¿™æ¡å‘é€çº¿ç¨‹çš„æ€§èƒ½é™ä½ï¼Œç”šè‡³é€ æˆä¸€å®šç¨‹åº¦ä¸Šçš„é˜»å¡ã€‚â€‹ å°†ä¸šåŠ¡(Client æ·±åœ³)éƒ¨ç½²åˆ°åŒ—äº¬çš„æœºæˆ¿å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å¦‚æœ(Client æ·±åœ³)è°ƒç”¨çš„å¦äº›æœåŠ¡éƒ½éƒ¨ç½²åœ¨æ·±åœ³ï¼Œé‚£ä¹ˆåˆä¼šå¼•å‘æ–°çš„æ—¶å»¶é—®é¢˜ï¼Œæ€»ä¸è§å¾—å°†æ‰€æœ‰ä¸šåŠ¡å…¨éƒ¨éƒ¨ç½²åœ¨ä¸€ä¸ªæœºæˆ¿ï¼Œé‚£ä¹ˆå®¹ç¾åˆä½•ä»¥å®ç°ï¼Ÿè¿™é‡Œä½¿ç”¨ Federation æ’ä»¶å°±å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜. æ­å»ºæ­¥éª¤1.éœ€è¦ä¿è¯æ¯å°èŠ‚ç‚¹å•ç‹¬è¿è¡Œ 2.åœ¨æ¯å°æœºå™¨ä¸Šå¼€å¯ federation ç›¸å…³æ’ä»¶ 12rabbitmq-plugins enable rabbitmq_federationrabbitmq-plugins enable rabbitmq_federation_management 3.åŸç†å›¾(å…ˆè¿è¡Œ consumer åœ¨ node2 åˆ›å»º fed_exchange) 4.åœ¨ downstream(node2)é…ç½® upstream(node1) 5.æ·»åŠ  policy 6.æˆåŠŸçš„å‰æ Federation Queueè”é‚¦é˜Ÿåˆ—å¯ä»¥åœ¨å¤šä¸ª Broker èŠ‚ç‚¹(æˆ–è€…é›†ç¾¤)ä¹‹é—´ä¸ºå•ä¸ªé˜Ÿåˆ—æä¾›å‡è¡¡è´Ÿè½½çš„åŠŸèƒ½ã€‚ä¸€ä¸ªè”é‚¦é˜Ÿåˆ—å¯ä»¥è¿æ¥ä¸€ä¸ªæˆ–è€…å¤šä¸ªä¸Šæ¸¸é˜Ÿåˆ—(upstream queue)ï¼Œå¹¶ä»è¿™äº›ä¸Šæ¸¸é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯ä»¥æ»¡è¶³æœ¬åœ°æ¶ˆè´¹è€…æ¶ˆè´¹æ¶ˆæ¯çš„éœ€æ±‚ã€‚ æ­å»ºæ­¥éª¤1.åŸç†å›¾ 2.æ·»åŠ  upstream(åŒä¸Š) 3.æ·»åŠ  policy ShovelFederation å…·å¤‡çš„æ•°æ®è½¬å‘åŠŸèƒ½ç±»ä¼¼ï¼ŒShovel å¤Ÿå¯é ã€æŒç»­åœ°ä»ä¸€ä¸ª Broker ä¸­çš„é˜Ÿåˆ—(ä½œä¸ºæºç«¯ï¼Œå³source)æ‹‰å–æ•°æ®å¹¶è½¬å‘è‡³å¦ä¸€ä¸ª Broker ä¸­çš„äº¤æ¢å™¨(ä½œä¸ºç›®çš„ç«¯ï¼Œå³ destination)ã€‚ä½œä¸ºæºç«¯çš„é˜Ÿåˆ—å’Œä½œä¸ºç›®çš„ç«¯çš„äº¤æ¢å™¨å¯ä»¥åŒæ—¶ä½äºåŒä¸€ä¸ª Brokerï¼Œä¹Ÿå¯ä»¥ä½äºä¸åŒçš„ Broker ä¸Šã€‚Shovel å¯ä»¥ç¿»è¯‘ä¸ºâ€é“²å­â€ï¼Œæ˜¯ä¸€ç§æ¯”è¾ƒå½¢è±¡çš„æ¯”å–»ï¼Œè¿™ä¸ªâ€é“²å­â€å¯ä»¥å°†æ¶ˆæ¯ä»ä¸€æ–¹â€é“²å­â€å¦ä¸€æ–¹ã€‚Shovel è¡Œä¸ºå°±åƒä¼˜ç§€çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºèƒ½å¤Ÿè´Ÿè´£è¿æ¥æºå’Œç›®çš„åœ°ã€è´Ÿè´£æ¶ˆæ¯çš„è¯»å†™åŠè´Ÿè´£è¿æ¥å¤±è´¥é—®é¢˜çš„å¤„ç†ã€‚ æ­å»ºæ­¥éª¤1.å¼€å¯æ’ä»¶(éœ€è¦çš„æœºå™¨éƒ½å¼€å¯) 12rabbitmq-plugins enable rabbitmq_shovelrabbitmq-plugins enable rabbitmq_shovel_management 2.åŸç†å›¾åœ¨æºå¤´å‘é€çš„æ¶ˆæ¯ç›´æ¥å›è¿›å…¥åˆ°ç›®çš„åœ°é˜Ÿåˆ— 3.æ·»åŠ  shovel æºå’Œç›®çš„åœ° RabbitMQå·¥å…·ç±»åœ¨ä¼ä¸šå¼€å‘è¿‡ç¨‹ä¸­ï¼Œç›´æ¥ä½¿ç”¨SpringBootæä¾›çš„RabbitTemplateè¿˜æ˜¯ç•¥æ˜¾å¤æ‚ï¼Œé€šå¸¸æˆ‘ä»¬ä¸€ä¸ªç³»ç»Ÿå‘é€æ¶ˆæ¯åŸºæœ¬ä¸Šä¹Ÿæ˜¯åªä¾èµ–äºä¸€ä¸ªäº¤æ¢æœºå’Œä¸€ä¸ªé˜Ÿåˆ—ï¼ˆå»¶è¿Ÿæ¶ˆæ¯éœ€å•ç‹¬ä¾èµ–äºå»¶è¿Ÿäº¤æ¢æœºï¼‰ï¼ŒåŸºäºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠäº¤æ¢æœºã€é˜Ÿåˆ—ä»¥åŠè·¯ç”±keyç­‰å£°æ˜ç›´æ¥æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œç„¶åå°è£…å‘é€æ™®é€šæ¶ˆæ¯çš„å·¥å…·ç±»ï¼Œå’Œå‘é€å»¶è¿Ÿæ¶ˆæ¯çš„å·¥å…·ç±»ï¼Œå‘é€çš„æ¶ˆæ¯ä½“å†…å®¹æˆ‘ä»¬å¯ä»¥å¢åŠ äº¤æ˜“ç è¿™ä¸ªæ¦‚å¿µï¼Œæ¶ˆè´¹è€…é€šè¿‡ä¸åŒäº¤æ˜“ç ï¼Œå¤„ç†ä¸åŒçš„ä¸šåŠ¡ã€‚æ¶ˆæ¯ä½“é€šè¿‡æ³›å‹ï¼Œåœ¨å‘æ¶ˆæ¯æ—¶å£°æ˜æ¶ˆæ¯ä½“ç±»å‹ï¼Œé€šè¿‡jsonåºåˆ—åŒ–ä¼ è¾“ã€‚ å·¥å…·ç±»ä½¿ç”¨å»¶è¿Ÿæ¶ˆæ¯å‘é€é¡¹ç›®å¯åŠ¨æ—¶ï¼Œç›´æ¥å£°æ˜å¥½å»¶è¿Ÿäº¤æ¢æœºï¼Œå»¶è¿Ÿé˜Ÿåˆ—ä»¥åŠè·¯ç”±keyï¼Œå‘é€å»¶è¿Ÿæ¶ˆæ¯åªéœ€è¦ä¸€å¥ä»£ç  12345public void sendDelayMsg(@PathVariable String message, @PathVariable Integer delayTime) &#123; log.info(&quot;å½“å‰æ—¶é—´ï¼š&#123;&#125;,å‘é€ä¸€æ¡æ—¶é•¿&#123;&#125;æ¯«ç§’TTLä¿¡æ¯ç»™é˜Ÿåˆ—QC:&#123;&#125;&quot;, new Date(), delayTime, message); MsgData&lt;String&gt; msgData = new MsgData&lt;&gt;(&quot;0001&quot;, message, &quot;è¿™æ˜¯æˆ‘çš„æµ‹è¯•å»¶è¿Ÿæ¶ˆæ¯ï¼&quot;); EventDispatcherUtil.eventDispatch(msgData, delayTime);&#125; æ™®é€šæ¶ˆæ¯å‘é€æ™®é€šæ¶ˆæ¯é€šè¿‡å‘å¸ƒè®¢é˜…æ¨¡å¼å®ç°ï¼Œå…¶ä»–ç³»ç»Ÿè‹¥è¦æ¥æ”¶æ¬¡æ¶ˆæ¯ï¼Œåªéœ€è¦å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—ç„¶åæ·»åŠ ç›‘å¬ï¼Œç»‘å®šåˆ°æ­¤äº¤æ¢æœºä¸Šå³å¯ï¼Œå‘é€æ™®é€šæ¶ˆæ¯ä¹Ÿåªéœ€è¦ä¸€å¥ä»£ç å®ç° 12345public void sendFanoutMsg(@PathVariable String message) &#123; log.info(&quot;å½“å‰æ—¶é—´ï¼š&#123;&#125;,å‘é€ä¸€æ¡ä¿¡æ¯ç»™é˜Ÿåˆ—QC:&#123;&#125;&quot;, new Date(), message); MsgData&lt;String&gt; msgData = new MsgData&lt;&gt;(&quot;0001&quot;, message, &quot;è¿™æ˜¯æˆ‘çš„æµ‹è®¢é˜…æ¶ˆæ¯ï¼&quot;); EventDispatcherUtil.eventDispatch(msgData);&#125; RabbitMQç›¸å…³é¢è¯•é¢˜å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Ÿ é˜Ÿåˆ—å’Œæ¶ˆæ¯æŒä¹…åŒ–ï¼šä¿è¯MQå®•æœºäº†æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Œå¿…é¡»ä¿è¯åœ¨ç£ç›˜ä¸Šæ‰èƒ½ï¼ˆ3.4.2ã€3.4.3ï¼‰ æ¶ˆæ¯å‘å¸ƒç¡®è®¤ï¼šå¼€å¯æ¶ˆæ¯å‘å¸ƒç¡®è®¤ï¼ŒMQå°†æ¶ˆæ¯å‘é€åˆ°äº¤æ¢æœºå¹¶ä¸”ä¿å­˜åœ¨ç£ç›˜ä¸Šä¹‹åè¿”å›ä¸€ä¸ªç¡®è®¤ï¼Œæ­¤æ—¶å¯ä»¥ä¿è¯ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯ç»å¯¹ä¸ä¸¢å¤±ã€‚è§ï¼š9.1 æ¶ˆæ¯å›é€€å¤„ç†ï¼šå½“æ¶ˆæ¯åˆ°è¾¾äº¤æ¢æœºæ— æ³•è·¯ç”±åˆ°é˜Ÿåˆ—æ—¶ï¼Œäº¤æ¢æœºæŠŠæ¶ˆæ¯å›é€€ç»™ç”Ÿäº§è€…ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¤‡ä»½äº¤æ¢æœºå®ç°ã€‚è§ï¼š9.2 æ¶ˆæ¯åº”ç­”æœºåˆ¶ï¼šè®¾ç½®ä¸ºæ‰‹åŠ¨åº”ç­”ï¼Œä¿è¯æ¶ˆè´¹è€…æ­£ç¡®å¤„ç†å®Œæ¶ˆæ¯ï¼Œå¦‚æœå¤„ç†å¤±è´¥ï¼Œæ¶ˆæ¯é‡æ–°å…¥é˜Ÿ é›†ç¾¤ç¯å¢ƒä¸‹ï¼Œæ·»åŠ é•œåƒé˜Ÿåˆ—ã€‚è§ï¼š11.2 æ¶ˆæ¯çš„ç±»å‹ä¸»è¦æ˜¯äº¤æ¢æœºçš„ç±»å‹ï¼ŒåŒ…æ‹¬ï¼š ç›´æ¥(direct)ï¼šè·¯ç”±ç±»å‹ ä¸»é¢˜(topic) æ ‡é¢˜(headers) ï¼šå·²ç»ä¸ç”¨äº† æ‰‡å‡º(fanout)ï¼šå‘å¸ƒè®¢é˜…ç±»å‹","categories":[{"name":"ä¸­é—´ä»¶","slug":"ä¸­é—´ä»¶","permalink":"https://zhangyong3214.github.io/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/"}],"tags":[{"name":"åç«¯æŠ€æœ¯","slug":"åç«¯æŠ€æœ¯","permalink":"https://zhangyong3214.github.io/tags/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/"}]}],"categories":[{"name":"ç®—æ³•åˆ·é¢˜","slug":"ç®—æ³•åˆ·é¢˜","permalink":"https://zhangyong3214.github.io/categories/%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://zhangyong3214.github.io/categories/%E6%95%99%E7%A8%8B/"},{"name":"è½¯ä»¶åˆ†äº«","slug":"è½¯ä»¶åˆ†äº«","permalink":"https://zhangyong3214.github.io/categories/%E8%BD%AF%E4%BB%B6%E5%88%86%E4%BA%AB/"},{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"https://zhangyong3214.github.io/categories/%E7%AC%94%E8%AE%B0/"},{"name":"é¢è¯•çŸ¥è¯†","slug":"é¢è¯•çŸ¥è¯†","permalink":"https://zhangyong3214.github.io/categories/%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86/"},{"name":"åŸºç¡€çŸ¥è¯†","slug":"åŸºç¡€çŸ¥è¯†","permalink":"https://zhangyong3214.github.io/categories/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"},{"name":"æ¡†æ¶","slug":"æ¡†æ¶","permalink":"https://zhangyong3214.github.io/categories/%E6%A1%86%E6%9E%B6/"},{"name":"ä¸­é—´ä»¶","slug":"ä¸­é—´ä»¶","permalink":"https://zhangyong3214.github.io/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/"}],"tags":[{"name":"ç®—æ³•ä¸æ•°æ®ç»“æ„","slug":"ç®—æ³•ä¸æ•°æ®ç»“æ„","permalink":"https://zhangyong3214.github.io/tags/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"è½¯ä»¶å·¥å…·","slug":"è½¯ä»¶å·¥å…·","permalink":"https://zhangyong3214.github.io/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/"},{"name":"åç«¯æŠ€æœ¯","slug":"åç«¯æŠ€æœ¯","permalink":"https://zhangyong3214.github.io/tags/%E5%90%8E%E7%AB%AF%E6%8A%80%E6%9C%AF/"},{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"https://zhangyong3214.github.io/tags/%E5%BC%80%E5%8F%91/"}]}